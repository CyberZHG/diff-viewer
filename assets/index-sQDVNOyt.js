(function(){const d=document.createElement("link").relList;if(d&&d.supports&&d.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))_(u);new MutationObserver(u=>{for(const p of u)if(p.type==="childList")for(const m of p.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&_(m)}).observe(document,{childList:!0,subtree:!0});function s(u){const p={};return u.integrity&&(p.integrity=u.integrity),u.referrerPolicy&&(p.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?p.credentials="include":u.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function _(u){if(u.ep)return;u.ep=!0;const p=s(u);fetch(u.href,p)}})();const Pi="modulepreload",$i=function(I){return"/diff-viewer/"+I},ir={},ki=function(d,s,_){let u=Promise.resolve();if(s&&s.length>0){let w=function(y){return Promise.all(y.map(F=>Promise.resolve(F).then(C=>({status:"fulfilled",value:C}),C=>({status:"rejected",reason:C}))))};document.getElementsByTagName("link");const m=document.querySelector("meta[property=csp-nonce]"),v=m?.nonce||m?.getAttribute("nonce");u=w(s.map(y=>{if(y=$i(y),y in ir)return;ir[y]=!0;const F=y.endsWith(".css"),C=F?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${C}`))return;const T=document.createElement("link");if(T.rel=F?"stylesheet":Pi,F||(T.as="script"),T.crossOrigin="",T.href=y,v&&T.setAttribute("nonce",v),document.head.appendChild(T),F)return new Promise((N,G)=>{T.addEventListener("load",N),T.addEventListener("error",()=>G(new Error(`Unable to preload CSS for ${y}`)))})}))}function p(m){const v=new Event("vite:preloadError",{cancelable:!0});if(v.payload=m,window.dispatchEvent(v),!v.defaultPrevented)throw m}return u.then(m=>{for(const v of m||[])v.status==="rejected"&&p(v.reason);return d().catch(p)})};async function Ii(I={}){var d;(function(){function e(c){c=c.split("-")[0];for(var f=c.split(".").slice(0,3);f.length<3;)f.push("00");return f=f.map((g,S,b)=>g.padStart(2,"0")),f.join("")}var t=c=>[c/1e4|0,(c/100|0)%100,c%100].join("."),r=2147483647,n=typeof process<"u"&&process.versions?.node?e(process.versions.node):r;if(n<16e4)throw new Error(`This emscripten-generated code requires node v${t(16e4)} (detected v${t(n)})`);var i=typeof navigator<"u"&&navigator.userAgent;if(i){var o=i.includes("Safari/")&&!i.includes("Chrome/")&&i.match(/Version\/(\d+\.?\d*\.?\d*)/)?e(i.match(/Version\/(\d+\.?\d*\.?\d*)/)[1]):r;if(o<15e4)throw new Error(`This emscripten-generated code requires Safari v${t(15e4)} (detected v${o})`);var a=i.match(/Firefox\/(\d+(?:\.\d+)?)/)?parseFloat(i.match(/Firefox\/(\d+(?:\.\d+)?)/)[1]):r;if(a<79)throw new Error(`This emscripten-generated code requires Firefox v79 (detected v${a})`);var l=i.match(/Chrome\/(\d+(?:\.\d+)?)/)?parseFloat(i.match(/Chrome\/(\d+(?:\.\d+)?)/)[1]):r;if(l<85)throw new Error(`This emscripten-generated code requires Chrome v85 (detected v${l})`)}})();var s=I,_=!!globalThis.window,u=!!globalThis.WorkerGlobalScope,p=globalThis.process?.versions?.node&&globalThis.process?.type!="renderer",m=!_&&!p&&!u;if(p){const{createRequire:e}=await ki(async()=>{const{createRequire:t}=await Promise.resolve().then(()=>Di);return{createRequire:t}},void 0);var v=e(import.meta.url)}var w="./this.program",y=import.meta.url,F="";function C(e){return s.locateFile?s.locateFile(e,F):F+e}var T,N;if(p){if(!(globalThis.process?.versions?.node&&globalThis.process?.type!="renderer"))throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");var G=v("node:fs");y.startsWith("file:")&&(F=v("node:path").dirname(v("node:url").fileURLToPath(y))+"/"),N=t=>{t=ye(t)?new URL(t):t;var r=G.readFileSync(t);return h(Buffer.isBuffer(r)),r},T=async(t,r=!0)=>{t=ye(t)?new URL(t):t;var n=G.readFileSync(t,r?void 0:"utf8");return h(r?Buffer.isBuffer(n):typeof n=="string"),n},process.argv.length>1&&(w=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2)}else if(!m)if(_||u){try{F=new URL(".",y).href}catch{}if(!(globalThis.window||globalThis.WorkerGlobalScope))throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");u&&(N=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),T=async e=>{if(ye(e))return new Promise((r,n)=>{var i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="arraybuffer",i.onload=()=>{if(i.status==200||i.status==0&&i.response){r(i.response);return}n(i.status)},i.onerror=n,i.send(null)});var t=await fetch(e,{credentials:"same-origin"});if(t.ok)return t.arrayBuffer();throw new Error(t.status+" : "+t.url)}}else throw new Error("environment detection error");var J=console.log.bind(console),V=console.error.bind(console);h(!m,"shell environment detected but not enabled at build time.  Add `shell` to `-sENVIRONMENT` to enable.");var me;globalThis.WebAssembly||V("no native wasm support detected");var Ue=!1;function h(e,t){e||j("Assertion failed"+(t?": "+t:""))}var ye=e=>e.startsWith("file://");function sr(){var e=rt();h((e&3)==0),e==0&&(e+=4),P[e>>2]=34821223,P[e+4>>2]=2310721022,P[0]=1668509029}function He(){if(!Ue){var e=rt();e==0&&(e+=4);var t=P[e>>2],r=P[e+4>>2];(t!=34821223||r!=2310721022)&&j(`Stack overflow! Stack cookie has been overwritten at ${ue(e)}, expected hex dwords 0x89BACDFE and 0x2135467, but received ${ue(r)} ${ue(t)}`),P[0]!=1668509029&&j("Runtime error: The application has corrupted its heap memory area (address zero)!")}}class M extends Error{}class Be extends M{constructor(t){super(t),this.excPtr=t;const r=Ht(t);this.name=r[0],this.message=r[1]}}(()=>{var e=new Int16Array(1),t=new Int8Array(e.buffer);e[0]=25459,(t[0]!==115||t[1]!==99)&&j("Runtime error: expected the system to be little-endian! (Run with -sSUPPORT_BIG_ENDIAN to bypass)")})();function $e(e){Object.getOwnPropertyDescriptor(s,e)||Object.defineProperty(s,e,{configurable:!0,set(){j(`Attempt to set \`Module.${e}\` after it has already been processed.  This can happen, for example, when code is injected via '--post-js' rather than '--pre-js'`)}})}function U(e){return()=>h(!1,`call to '${e}' via reference taken before Wasm module initialization`)}function ar(e){Object.getOwnPropertyDescriptor(s,e)&&j(`\`Module.${e}\` was supplied but \`${e}\` not included in INCOMING_MODULE_JS_API`)}function lr(e){return e==="FS_createPath"||e==="FS_createDataFile"||e==="FS_createPreloadedFile"||e==="FS_preloadFile"||e==="FS_unlink"||e==="addRunDependency"||e==="FS_createLazyFile"||e==="FS_createDevice"||e==="removeRunDependency"}function cr(e){lt(e)}function lt(e){Object.getOwnPropertyDescriptor(s,e)||Object.defineProperty(s,e,{configurable:!0,get(){var t=`'${e}' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the Emscripten FAQ)`;lr(e)&&(t+=". Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you"),j(t)}})}var ct,dt,re,K,Se,ce,de,P,ut,ft,ht,pt,ke=!1;function dr(){var e=Zt.buffer;re=new Int8Array(e),Se=new Int16Array(e),K=new Uint8Array(e),ce=new Uint16Array(e),de=new Int32Array(e),P=new Uint32Array(e),ut=new Float32Array(e),ft=new Float64Array(e),ht=new BigInt64Array(e),pt=new BigUint64Array(e)}h(globalThis.Int32Array&&globalThis.Float64Array&&Int32Array.prototype.subarray&&Int32Array.prototype.set,"JS engine does not provide full typed array support");function ur(){if(s.preRun)for(typeof s.preRun=="function"&&(s.preRun=[s.preRun]);s.preRun.length;)wr(s.preRun.shift());$e("preRun"),_t(vt)}function fr(){h(!ke),ke=!0,He(),ve.__wasm_call_ctors()}function hr(){if(He(),s.postRun)for(typeof s.postRun=="function"&&(s.postRun=[s.postRun]);s.postRun.length;)br(s.postRun.shift());$e("postRun"),_t(gt)}function j(e){s.onAbort?.(e),e="Aborted("+e+")",V(e),Ue=!0;var t=new WebAssembly.RuntimeError(e);throw dt?.(t),t}var q={error(){j("Filesystem support (FS) was not included. The problem is that you are using files from JS, but files were not used from C/C++, so filesystem support was not auto-included. You can force-include filesystem support with -sFORCE_FILESYSTEM")},init(){q.error()},createDataFile(){q.error()},createPreloadedFile(){q.error()},createLazyFile(){q.error()},open(){q.error()},mkdev(){q.error()},registerDevice(){q.error()},analyzePath(){q.error()},ErrnoError(){q.error()}};function X(e,t){return(...r)=>{h(ke,`native function \`${e}\` called before runtime initialization`);var n=ve[e];return h(n,`exported native function \`${e}\` not found`),h(r.length<=t,`native function \`${e}\` called with ${r.length} args but expects ${t}`),n(...r)}}var Ve;function pr(){return s.locateFile?C("DiffViewWASM.wasm"):new URL("/diff-viewer/assets/DiffViewWASM-USCNajdT.wasm",import.meta.url).href}function _r(e){if(e==Ve&&me)return new Uint8Array(me);if(N)return N(e);throw"both async and sync fetching of the wasm failed"}async function gr(e){if(!me)try{var t=await T(e);return new Uint8Array(t)}catch{}return _r(e)}async function vr(e,t){try{var r=await gr(e),n=await WebAssembly.instantiate(r,t);return n}catch(i){V(`failed to asynchronously prepare wasm: ${i}`),ye(e)&&V(`warning: Loading from a file URI (${e}) is not supported in most browsers. See https://emscripten.org/docs/getting_started/FAQ.html#how-do-i-run-a-local-webserver-for-testing-why-does-my-program-stall-in-downloading-or-preparing`),j(i)}}async function mr(e,t,r){if(!e&&!ye(t)&&!p)try{var n=fetch(t,{credentials:"same-origin"}),i=await WebAssembly.instantiateStreaming(n,r);return i}catch(o){V(`wasm streaming compile failed: ${o}`),V("falling back to ArrayBuffer instantiation")}return vr(t,r)}function yr(){var e={env:Qt,wasi_snapshot_preview1:Qt};return e}async function Sr(){function e(a,l){return ve=a.exports,Qn(ve),dr(),ve}var t=s;function r(a){return h(s===t,"the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?"),t=null,e(a.instance)}var n=yr();if(s.instantiateWasm)return new Promise((a,l)=>{try{s.instantiateWasm(n,(c,f)=>{a(e(c,f))})}catch(c){V(`Module.instantiateWasm callback failed with error: ${c}`),l(c)}});Ve??=pr();var i=await mr(me,Ve,n),o=r(i);return o}var _t=e=>{for(;e.length>0;)e.shift()(s)},gt=[],br=e=>gt.push(e),vt=[],wr=e=>vt.push(e),ue=e=>(h(typeof e=="number",`ptrToString expects a number, got ${typeof e}`),e>>>=0,"0x"+e.toString(16).padStart(8,"0")),x=e=>zt(e),L=()=>qt(),be=e=>{be.shown||={},be.shown[e]||(be.shown[e]=1,p&&(e="warning: "+e),V(e))},mt=globalThis.TextDecoder&&new TextDecoder,yt=(e,t,r,n)=>{var i=t+r;if(n)return i;for(;e[t]&&!(t>=i);)++t;return t},St=(e,t=0,r,n)=>{var i=yt(e,t,r,n);if(i-t>16&&e.buffer&&mt)return mt.decode(e.subarray(t,i));for(var o="";t<i;){var a=e[t++];if(!(a&128)){o+=String.fromCharCode(a);continue}var l=e[t++]&63;if((a&224)==192){o+=String.fromCharCode((a&31)<<6|l);continue}var c=e[t++]&63;if((a&240)==224?a=(a&15)<<12|l<<6|c:((a&248)!=240&&be("Invalid UTF-8 leading byte "+ue(a)+" encountered when deserializing a UTF-8 string in wasm memory to a JS string!"),a=(a&7)<<18|l<<12|c<<6|e[t++]&63),a<65536)o+=String.fromCharCode(a);else{var f=a-65536;o+=String.fromCharCode(55296|f>>10,56320|f&1023)}}return o},fe=(e,t,r)=>(h(typeof e=="number",`UTF8ToString expects a number (got ${typeof e})`),e?St(K,e,t,r):""),Fr=(e,t,r,n)=>j(`Assertion failed: ${fe(e)}, at: `+[t?fe(t):"unknown filename",r,n?fe(n):"unknown function"]),Tr=e=>{var t=new je(e);return t.get_caught()||t.set_caught(!0),t.set_rethrown(!1),Xt(e)},he=0;class je{constructor(t){this.excPtr=t,this.ptr=t-24}set_type(t){P[this.ptr+4>>2]=t}get_type(){return P[this.ptr+4>>2]}set_destructor(t){P[this.ptr+8>>2]=t}get_destructor(){return P[this.ptr+8>>2]}set_caught(t){t=t?1:0,re[this.ptr+12]=t}get_caught(){return re[this.ptr+12]!=0}set_rethrown(t){t=t?1:0,re[this.ptr+13]=t}get_rethrown(){return re[this.ptr+13]!=0}init(t,r){this.set_adjusted_ptr(0),this.set_type(t),this.set_destructor(r)}set_adjusted_ptr(t){P[this.ptr+16>>2]=t}get_adjusted_ptr(){return P[this.ptr+16>>2]}}var Ie=e=>Vt(e),bt=e=>{var t=he?.excPtr;if(!t)return Ie(0),0;var r=new je(t);r.set_adjusted_ptr(t);var n=r.get_type();if(!n)return Ie(0),t;for(var i of e){if(i===0||i===n)break;var o=r.ptr+16;if(Kt(i,n,o))return Ie(i),t}return Ie(n),t},Er=()=>bt([]),Cr=e=>bt([e]),Pr=(e,t,r)=>{var n=new je(e);throw n.init(t,r),nt(e),he=new Be(e),he},$r=e=>{throw he||(he=new Be(e)),he},kr=()=>j("native code called abort()"),Ae={},ze=e=>{for(;e.length;){var t=e.pop(),r=e.pop();r(t)}};function we(e){return this.fromWireType(P[e>>2])}var pe={},ae={},Re={},Ir=class extends Error{constructor(t){super(t),this.name="InternalError"}},Me=e=>{throw new Ir(e)},ie=(e,t,r)=>{e.forEach(l=>Re[l]=t);function n(l){var c=r(l);c.length!==e.length&&Me("Mismatched type converter count");for(var f=0;f<e.length;++f)z(e[f],c[f])}var i=new Array(t.length),o=[],a=0;for(let[l,c]of t.entries())ae.hasOwnProperty(c)?i[l]=ae[c]:(o.push(c),pe.hasOwnProperty(c)||(pe[c]=[]),pe[c].push(()=>{i[l]=ae[c],++a,a===o.length&&n(i)}));o.length===0&&n(i)},Ar=e=>{var t=Ae[e];delete Ae[e];var r=t.rawConstructor,n=t.rawDestructor,i=t.fields,o=i.map(a=>a.getterReturnType).concat(i.map(a=>a.setterArgumentType));ie([e],o,a=>{var l={};for(var[c,f]of i.entries()){const g=a[c],S=f.getter,b=f.getterContext,E=a[c+i.length],A=f.setter,R=f.setterContext;l[f.fieldName]={read:H=>g.fromWireType(S(b,H)),write:(H,B)=>{var oe=[];A(R,H,E.toWireType(oe,B)),ze(oe)},optional:g.optional}}return[{name:t.name,fromWireType:g=>{var S={};for(var b in l)S[b]=l[b].read(g);return n(g),S},toWireType:(g,S)=>{for(var b in l)if(!(b in S)&&!l[b].optional)throw new TypeError(`Missing field: "${b}"`);var E=r();for(b in l)l[b].write(E,S[b]);return g!==null&&g.push(n,E),E},readValueFromPointer:we,destructorFunction:n}]})},D=e=>{for(var t="";;){var r=K[e++];if(!r)return t;t+=String.fromCharCode(r)}},Fe=class extends Error{constructor(t){super(t),this.name="BindingError"}},$=e=>{throw new Fe(e)};function Rr(e,t,r={}){var n=t.name;if(e||$(`type "${n}" must have a positive integer typeid pointer`),ae.hasOwnProperty(e)){if(r.ignoreDuplicateRegistrations)return;$(`Cannot register type '${n}' twice`)}if(ae[e]=t,delete Re[e],pe.hasOwnProperty(e)){var i=pe[e];delete pe[e],i.forEach(o=>o())}}function z(e,t,r={}){return Rr(e,t,r)}var wt=(e,t,r)=>{switch(t){case 1:return r?n=>re[n]:n=>K[n];case 2:return r?n=>Se[n>>1]:n=>ce[n>>1];case 4:return r?n=>de[n>>2]:n=>P[n>>2];case 8:return r?n=>ht[n>>3]:n=>pt[n>>3];default:throw new TypeError(`invalid integer width (${t}): ${e}`)}},le=e=>{if(e===null)return"null";var t=typeof e;return t==="object"||t==="array"||t==="function"?e.toString():""+e},Ft=(e,t,r,n)=>{if(t<r||t>n)throw new TypeError(`Passing a number "${le(t)}" from JS side to C/C++ side to an argument of type "${e}", which is outside the valid range [${r}, ${n}]!`)},Mr=(e,t,r,n,i)=>{t=D(t);const o=n===0n;let a=l=>l;if(o){const l=r*8;a=c=>BigInt.asUintN(l,c),i=a(i)}z(e,{name:t,fromWireType:a,toWireType:(l,c)=>{if(typeof c=="number")c=BigInt(c);else if(typeof c!="bigint")throw new TypeError(`Cannot convert "${le(c)}" to ${this.name}`);return Ft(t,c,n,i),c},readValueFromPointer:wt(t,r,!o),destructorFunction:null})},xr=(e,t,r,n)=>{t=D(t),z(e,{name:t,fromWireType:function(i){return!!i},toWireType:function(i,o){return o?r:n},readValueFromPointer:function(i){return this.fromWireType(K[i])},destructorFunction:null})},Lr=e=>({count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType}),Ge=e=>{function t(r){return r.$$.ptrType.registeredClass.name}$(t(e)+" instance already deleted")},qe=!1,Tt=e=>{},Wr=e=>{e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)},Et=e=>{e.count.value-=1;var t=e.count.value===0;t&&Wr(e)},Ct=(e,t,r)=>{if(t===r)return e;if(r.baseClass===void 0)return null;var n=Ct(e,t,r.baseClass);return n===null?null:r.downcast(n)},Pt={},Or={},Dr=(e,t)=>{for(t===void 0&&$("ptr should not be undefined");e.baseClass;)t=e.upcast(t),e=e.baseClass;return t},Nr=(e,t)=>(t=Dr(e,t),Or[t]),xe=(e,t)=>{(!t.ptrType||!t.ptr)&&Me("makeClassHandle requires ptr and ptrType");var r=!!t.smartPtrType,n=!!t.smartPtr;return r!==n&&Me("Both smartPtrType and smartPtr must be specified"),t.count={value:1},Te(Object.create(e,{$$:{value:t,writable:!0}}))};function $t(e){var t=this.getPointee(e);if(!t)return this.destructor(e),null;var r=Nr(this.registeredClass,t);if(r!==void 0){if(r.$$.count.value===0)return r.$$.ptr=t,r.$$.smartPtr=e,r.clone();var n=r.clone();return this.destructor(e),n}function i(){return this.isSmartPointer?xe(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:t,smartPtrType:this,smartPtr:e}):xe(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var o=this.registeredClass.getActualType(t),a=Pt[o];if(!a)return i.call(this);var l;this.isConst?l=a.constPointerType:l=a.pointerType;var c=Ct(t,this.registeredClass,l.registeredClass);return c===null?i.call(this):this.isSmartPointer?xe(l.registeredClass.instancePrototype,{ptrType:l,ptr:c,smartPtrType:this,smartPtr:e}):xe(l.registeredClass.instancePrototype,{ptrType:l,ptr:c})}var Te=e=>globalThis.FinalizationRegistry?(qe=new FinalizationRegistry(t=>{console.warn(t.leakWarning),Et(t.$$)}),Te=t=>{var r=t.$$,n=!!r.smartPtr;if(n){var i={$$:r},o=r.ptrType.registeredClass,a=new Error(`Embind found a leaked C++ instance ${o.name} <${ue(r.ptr)}>.
We'll free it automatically in this case, but this functionality is not reliable across various environments.
Make sure to invoke .delete() manually once you're done with the instance instead.
Originally allocated`);"captureStackTrace"in Error&&Error.captureStackTrace(a,$t),i.leakWarning=a.stack.replace(/^Error: /,""),qe.register(t,i,t)}return t},Tt=t=>qe.unregister(t),Te(e)):(Te=t=>t,e),Ur=()=>{let e=Le.prototype;Object.assign(e,{isAliasOf(r){if(!(this instanceof Le)||!(r instanceof Le))return!1;var n=this.$$.ptrType.registeredClass,i=this.$$.ptr;r.$$=r.$$;for(var o=r.$$.ptrType.registeredClass,a=r.$$.ptr;n.baseClass;)i=n.upcast(i),n=n.baseClass;for(;o.baseClass;)a=o.upcast(a),o=o.baseClass;return n===o&&i===a},clone(){if(this.$$.ptr||Ge(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var r=Te(Object.create(Object.getPrototypeOf(this),{$$:{value:Lr(this.$$)}}));return r.$$.count.value+=1,r.$$.deleteScheduled=!1,r},delete(){this.$$.ptr||Ge(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&$("Object already scheduled for deletion"),Tt(this),Et(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted(){return!this.$$.ptr},deleteLater(){return this.$$.ptr||Ge(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&$("Object already scheduled for deletion"),this.$$.deleteScheduled=!0,this}});const t=Symbol.dispose;t&&(e[t]=e.delete)};function Le(){}var We=(e,t)=>Object.defineProperty(t,"name",{value:e}),kt=(e,t,r)=>{if(e[t].overloadTable===void 0){var n=e[t];e[t]=function(...i){return e[t].overloadTable.hasOwnProperty(i.length)||$(`Function '${r}' called with an invalid number of arguments (${i.length}) - expects one of (${e[t].overloadTable})!`),e[t].overloadTable[i.length].apply(this,i)},e[t].overloadTable=[],e[t].overloadTable[n.argCount]=n}},Ee=(e,t,r)=>{s.hasOwnProperty(e)?((r===void 0||s[e].overloadTable!==void 0&&s[e].overloadTable[r]!==void 0)&&$(`Cannot register public name '${e}' twice`),kt(s,e,e),s[e].overloadTable.hasOwnProperty(r)&&$(`Cannot register multiple overloads of a function with the same number of arguments (${r})!`),s[e].overloadTable[r]=t):(s[e]=t,s[e].argCount=r)},Hr=48,Br=57,Vr=e=>{h(typeof e=="string"),e=e.replace(/[^a-zA-Z0-9_]/g,"$");var t=e.charCodeAt(0);return t>=Hr&&t<=Br?`_${e}`:e};function jr(e,t,r,n,i,o,a,l){this.name=e,this.constructor=t,this.instancePrototype=r,this.rawDestructor=n,this.baseClass=i,this.getActualType=o,this.upcast=a,this.downcast=l,this.pureVirtualFunctions=[]}var Ye=(e,t,r)=>{for(;t!==r;)t.upcast||$(`Expected null or instance of ${r.name}, got an instance of ${t.name}`),e=t.upcast(e),t=t.baseClass;return e};function zr(e,t){if(t===null)return this.isReference&&$(`null is not a valid ${this.name}`),0;t.$$||$(`Cannot pass "${le(t)}" as a ${this.name}`),t.$$.ptr||$(`Cannot pass deleted object as a pointer of type ${this.name}`);var r=t.$$.ptrType.registeredClass,n=Ye(t.$$.ptr,r,this.registeredClass);return n}function Gr(e,t){var r;if(t===null)return this.isReference&&$(`null is not a valid ${this.name}`),this.isSmartPointer?(r=this.rawConstructor(),e!==null&&e.push(this.rawDestructor,r),r):0;(!t||!t.$$)&&$(`Cannot pass "${le(t)}" as a ${this.name}`),t.$$.ptr||$(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&t.$$.ptrType.isConst&&$(`Cannot convert argument of type ${t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name} to parameter type ${this.name}`);var n=t.$$.ptrType.registeredClass;if(r=Ye(t.$$.ptr,n,this.registeredClass),this.isSmartPointer)switch(t.$$.smartPtr===void 0&&$("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:t.$$.smartPtrType===this?r=t.$$.smartPtr:$(`Cannot convert argument of type ${t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:r=t.$$.smartPtr;break;case 2:if(t.$$.smartPtrType===this)r=t.$$.smartPtr;else{var i=t.clone();r=this.rawShare(r,_e.toHandle(()=>i.delete())),e!==null&&e.push(this.rawDestructor,r)}break;default:$("Unsupported sharing policy")}return r}function qr(e,t){if(t===null)return this.isReference&&$(`null is not a valid ${this.name}`),0;t.$$||$(`Cannot pass "${le(t)}" as a ${this.name}`),t.$$.ptr||$(`Cannot pass deleted object as a pointer of type ${this.name}`),t.$$.ptrType.isConst&&$(`Cannot convert argument of type ${t.$$.ptrType.name} to parameter type ${this.name}`);var r=t.$$.ptrType.registeredClass,n=Ye(t.$$.ptr,r,this.registeredClass);return n}var Yr=()=>{Object.assign(Oe.prototype,{getPointee(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e},destructor(e){this.rawDestructor?.(e)},readValueFromPointer:we,fromWireType:$t})};function Oe(e,t,r,n,i,o,a,l,c,f,g){this.name=e,this.registeredClass=t,this.isReference=r,this.isConst=n,this.isSmartPointer=i,this.pointeeType=o,this.sharingPolicy=a,this.rawGetPointee=l,this.rawConstructor=c,this.rawShare=f,this.rawDestructor=g,!i&&t.baseClass===void 0?n?(this.toWireType=zr,this.destructorFunction=null):(this.toWireType=qr,this.destructorFunction=null):this.toWireType=Gr}var It=(e,t,r)=>{s.hasOwnProperty(e)||Me("Replacing nonexistent public symbol"),s[e].overloadTable!==void 0&&r!==void 0?s[e].overloadTable[r]=t:(s[e]=t,s[e].argCount=r)},At=[],W=e=>{var t=At[e];return t||(At[e]=t=it.get(e)),h(it.get(e)==t,"JavaScript-side Wasm function table mirror is out of date!"),t},Y=(e,t,r=!1)=>{h(!r,"Async bindings are only supported with JSPI."),e=D(e);function n(){var o=W(t);return o}var i=n();return typeof i!="function"&&$(`unknown function pointer with signature ${e}: ${t}`),i};class Jr extends Error{}var Rt=e=>{var t=Bt(e),r=D(t);return Z(t),r},De=(e,t)=>{var r=[],n={};function i(o){if(!n[o]&&!ae[o]){if(Re[o]){Re[o].forEach(i);return}r.push(o),n[o]=!0}}throw t.forEach(i),new Jr(`${e}: `+r.map(Rt).join([", "]))},Kr=(e,t,r,n,i,o,a,l,c,f,g,S,b)=>{g=D(g),o=Y(i,o),l&&=Y(a,l),f&&=Y(c,f),b=Y(S,b);var E=Vr(g);Ee(E,function(){De(`Cannot construct ${g} due to unbound types`,[n])}),ie([e,t,r],n?[n]:[],A=>{A=A[0];var R,H;n?(R=A.registeredClass,H=R.instancePrototype):H=Le.prototype;var B=We(g,function(...ot){if(Object.getPrototypeOf(this)!==oe)throw new Fe(`Use 'new' to construct ${g}`);if(Q.constructor_body===void 0)throw new Fe(`${g} has no accessible constructor`);var nr=Q.constructor_body[ot.length];if(nr===void 0)throw new Fe(`Tried to invoke ctor of ${g} with invalid number of parameters (${ot.length}) - expected (${Object.keys(Q.constructor_body).toString()}) parameters instead!`);return nr.apply(this,ot)}),oe=Object.create(H,{constructor:{value:B}});B.prototype=oe;var Q=new jr(g,B,oe,b,R,o,l,f);Q.baseClass&&(Q.baseClass.__derivedClasses??=[],Q.baseClass.__derivedClasses.push(Q));var Ci=new Oe(g,Q,!0,!1,!1),tr=new Oe(g+"*",Q,!1,!1,!1),rr=new Oe(g+" const*",Q,!1,!0,!1);return Pt[e]={pointerType:tr,constPointerType:rr},It(E,B),[Ci,tr,rr]})},Je=(e,t)=>{for(var r=[],n=0;n<e;n++)r.push(P[t+n*4>>2]);return r};function Mt(e){for(var t=1;t<e.length;++t)if(e[t]!==null&&e[t].destructorFunction===void 0)return!0;return!1}function Xr(e,t,r,n,i){if(e<t||e>r){var o=t==r?t:`${t} to ${r}`;i(`function ${n} called with ${e} arguments, expected ${o}`)}}function Zr(e,t,r,n){var i=Mt(e),o=e.length-2,a=[],l=["fn"];t&&l.push("thisWired");for(var c=0;c<o;++c)a.push(`arg${c}`),l.push(`arg${c}Wired`);a=a.join(","),l=l.join(",");var f=`return function (${a}) {
`;f+=`checkArgCount(arguments.length, minArgs, maxArgs, humanName, throwBindingError);
`,i&&(f+=`var destructors = [];
`);var g=i?"destructors":"null",S=["humanName","throwBindingError","invoker","fn","runDestructors","fromRetWire","toClassParamWire"];t&&(f+=`var thisWired = toClassParamWire(${g}, this);
`);for(var c=0;c<o;++c){var b=`toArg${c}Wire`;f+=`var arg${c}Wired = ${b}(${g}, arg${c});
`,S.push(b)}if(f+=(r||n?"var rv = ":"")+`invoker(${l});
`,i)f+=`runDestructors(destructors);
`;else for(var c=t?1:2;c<e.length;++c){var E=c===1?"thisWired":"arg"+(c-2)+"Wired";e[c].destructorFunction!==null&&(f+=`${E}_dtor(${E});
`,S.push(`${E}_dtor`))}return r&&(f+=`var ret = fromRetWire(rv);
return ret;
`),f+=`}
`,S.push("checkArgCount","minArgs","maxArgs"),f=`if (arguments.length !== ${S.length}){ throw new Error(humanName + "Expected ${S.length} closure arguments " + arguments.length + " given."); }
${f}`,new Function(S,f)}function Qr(e){for(var t=e.length-2,r=e.length-1;r>=2&&e[r].optional;--r)t--;return t}function Ke(e,t,r,n,i,o){var a=t.length;a<2&&$("argTypes array size mismatch! Must at least get return value and 'this' types!"),h(!o,"Async bindings are only supported with JSPI.");for(var l=t[1]!==null&&r!==null,c=Mt(t),f=!t[0].isVoid,g=a-2,S=Qr(t),b=t[0],E=t[1],A=[e,$,n,i,ze,b.fromWireType.bind(b),E?.toWireType.bind(E)],R=2;R<a;++R){var H=t[R];A.push(H.toWireType.bind(H))}if(!c)for(var R=l?1:2;R<t.length;++R)t[R].destructorFunction!==null&&A.push(t[R].destructorFunction);A.push(Xr,S,g);var oe=Zr(t,l,f,o)(...A);return We(e,oe)}var en=(e,t,r,n,i,o)=>{h(t>0);var a=Je(t,r);i=Y(n,i),ie([],[e],l=>{l=l[0];var c=`constructor ${l.name}`;if(l.registeredClass.constructor_body===void 0&&(l.registeredClass.constructor_body=[]),l.registeredClass.constructor_body[t-1]!==void 0)throw new Fe(`Cannot register multiple constructors with identical number of parameters (${t-1}) for class '${l.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return l.registeredClass.constructor_body[t-1]=()=>{De(`Cannot construct ${l.name} due to unbound types`,a)},ie([],a,f=>(f.splice(1,0,null),l.registeredClass.constructor_body[t-1]=Ke(c,f,null,i,o),[])),[]})},xt=e=>{e=e.trim();const t=e.indexOf("(");return t===-1?e:(h(e.endsWith(")"),"Parentheses for argument names should match."),e.slice(0,t))},tn=(e,t,r,n,i,o,a,l,c,f)=>{var g=Je(r,n);t=D(t),t=xt(t),o=Y(i,o,c),ie([],[e],S=>{S=S[0];var b=`${S.name}.${t}`;t.startsWith("@@")&&(t=Symbol[t.substring(2)]),l&&S.registeredClass.pureVirtualFunctions.push(t);function E(){De(`Cannot call ${b} due to unbound types`,g)}var A=S.registeredClass.instancePrototype,R=A[t];return R===void 0||R.overloadTable===void 0&&R.className!==S.name&&R.argCount===r-2?(E.argCount=r-2,E.className=S.name,A[t]=E):(kt(A,t,b),A[t].overloadTable[r-2]=E),ie([],g,H=>{var B=Ke(b,H,S,o,a,c);return A[t].overloadTable===void 0?(B.argCount=r-2,A[t]=B):A[t].overloadTable[r-2]=B,[]}),[]})},Lt=[],ne=[0,1,,1,null,1,!0,1,!1,1],Wt=e=>{e>9&&--ne[e+1]===0&&(h(ne[e]!==void 0,"Decref for unallocated handle."),ne[e]=void 0,Lt.push(e))},_e={toValue:e=>(e||$(`Cannot use deleted val. handle = ${e}`),h(e===2||ne[e]!==void 0&&e%2===0,`invalid handle: ${e}`),ne[e]),toHandle:e=>{switch(e){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:{const t=Lt.pop()||ne.length;return ne[t]=e,ne[t+1]=1,t}}}},Ot={name:"emscripten::val",fromWireType:e=>{var t=_e.toValue(e);return Wt(e),t},toWireType:(e,t)=>_e.toHandle(t),readValueFromPointer:we,destructorFunction:null},rn=e=>z(e,Ot),Xe=(e,t,r)=>{switch(t){case 1:return r?function(n){return this.fromWireType(re[n])}:function(n){return this.fromWireType(K[n])};case 2:return r?function(n){return this.fromWireType(Se[n>>1])}:function(n){return this.fromWireType(ce[n>>1])};case 4:return r?function(n){return this.fromWireType(de[n>>2])}:function(n){return this.fromWireType(P[n>>2])};default:throw new TypeError(`invalid integer width (${t}): ${e}`)}};function nn(e){return e===0?"object":e===1?"number":"string"}var on=(e,t,r,n,i)=>{t=D(t);const o=nn(i);switch(o){case"object":{let f=function(){};f.values={},z(e,{name:t,constructor:f,valueType:o,fromWireType:function(g){return this.constructor.values[g]},toWireType:(g,S)=>S.value,readValueFromPointer:Xe(t,r,n),destructorFunction:null}),Ee(t,f);break}case"number":{var a={};z(e,{name:t,keysMap:a,valueType:o,fromWireType:f=>f,toWireType:(f,g)=>g,readValueFromPointer:Xe(t,r,n),destructorFunction:null}),Ee(t,a),delete s[t].argCount;break}case"string":{var l={},c={},a={};z(e,{name:t,valuesMap:l,reverseMap:c,keysMap:a,valueType:o,fromWireType:function(g){return this.reverseMap[g]},toWireType:function(g,S){return this.valuesMap[S]},readValueFromPointer:Xe(t,r,n),destructorFunction:null}),Ee(t,a),delete s[t].argCount;break}}},Dt=(e,t)=>{var r=ae[e];return r===void 0&&$(`${t} has unknown type ${Rt(e)}`),r},sn=(e,t,r)=>{var n=Dt(e,"enum");switch(t=D(t),n.valueType){case"object":{var i=n.constructor,o=Object.create(n.constructor.prototype,{value:{value:r},constructor:{value:We(`${n.name}_${t}`,function(){})}});i.values[r]=o,i[t]=o;break}case"number":{n.keysMap[t]=r;break}case"string":{n.valuesMap[t]=r,n.reverseMap[r]=t,n.keysMap[t]=t;break}}},an=(e,t)=>{switch(t){case 4:return function(r){return this.fromWireType(ut[r>>2])};case 8:return function(r){return this.fromWireType(ft[r>>3])};default:throw new TypeError(`invalid float width (${t}): ${e}`)}},ln=(e,t,r)=>{t=D(t),z(e,{name:t,fromWireType:n=>n,toWireType:(n,i)=>{if(typeof i!="number"&&typeof i!="boolean")throw new TypeError(`Cannot convert ${le(i)} to ${this.name}`);return i},readValueFromPointer:an(t,r),destructorFunction:null})},cn=(e,t,r,n,i,o,a,l)=>{var c=Je(t,r);e=D(e),e=xt(e),i=Y(n,i,a),Ee(e,function(){De(`Cannot call ${e} due to unbound types`,c)},t-1),ie([],c,f=>{var g=[f[0],null].concat(f.slice(1));return It(e,Ke(e,g,null,i,o,a),t-1),[]})},dn=(e,t,r,n,i)=>{t=D(t);const o=n===0;let a=c=>c;if(o){var l=32-8*r;a=c=>c<<l>>>l,i=a(i)}z(e,{name:t,fromWireType:a,toWireType:(c,f)=>{if(typeof f!="number"&&typeof f!="boolean")throw new TypeError(`Cannot convert "${le(f)}" to ${t}`);return Ft(t,f,n,i),f},readValueFromPointer:wt(t,r,n!==0),destructorFunction:null})},un=(e,t,r)=>{const n=(i,o)=>{let a=0;return{next(){if(a>=i)return{done:!0};const l=a;return a++,{value:o(l),done:!1}},[Symbol.iterator](){return this}}};e[Symbol.iterator]||(e[Symbol.iterator]=function(){const i=this[t]();return n(i,o=>this[r](o))})},fn=(e,t,r,n)=>{r=D(r),n=D(n),ie([],[e,t],i=>{const o=i[0];return un(o.registeredClass.instancePrototype,r,n),[]})},hn=(e,t,r)=>{var n=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array],i=n[t];function o(a){var l=P[a>>2],c=P[a+4>>2];return new i(re.buffer,c,l)}r=D(r),z(e,{name:r,fromWireType:o,readValueFromPointer:o},{ignoreDuplicateRegistrations:!0})},pn=Object.assign({optional:!0},Ot),_n=(e,t)=>{z(e,pn)},gn=(e,t,r,n)=>{if(h(typeof e=="string",`stringToUTF8Array expects a string (got ${typeof e})`),!(n>0))return 0;for(var i=r,o=r+n-1,a=0;a<e.length;++a){var l=e.codePointAt(a);if(l<=127){if(r>=o)break;t[r++]=l}else if(l<=2047){if(r+1>=o)break;t[r++]=192|l>>6,t[r++]=128|l&63}else if(l<=65535){if(r+2>=o)break;t[r++]=224|l>>12,t[r++]=128|l>>6&63,t[r++]=128|l&63}else{if(r+3>=o)break;l>1114111&&be("Invalid Unicode code point "+ue(l)+" encountered when serializing a JS string to a UTF-8 string in wasm memory! (Valid unicode code points should be in range 0-0x10FFFF)."),t[r++]=240|l>>18,t[r++]=128|l>>12&63,t[r++]=128|l>>6&63,t[r++]=128|l&63,a++}}return t[r]=0,r-i},ge=(e,t,r)=>(h(typeof r=="number","stringToUTF8(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),gn(e,K,t,r)),Ne=e=>{for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);n<=127?t++:n<=2047?t+=2:n>=55296&&n<=57343?(t+=4,++r):t+=3}return t},vn=(e,t)=>{t=D(t),z(e,{name:t,fromWireType(r){var n=P[r>>2],i=r+4,o;return o=fe(i,n,!0),Z(r),o},toWireType(r,n){n instanceof ArrayBuffer&&(n=new Uint8Array(n));var i,o=typeof n=="string";o||ArrayBuffer.isView(n)&&n.BYTES_PER_ELEMENT==1||$("Cannot pass non-string to std::string"),o?i=Ne(n):i=n.length;var a=tt(4+i+1),l=a+4;return P[a>>2]=i,o?ge(n,l,i+1):K.set(n,l),r!==null&&r.push(Z,a),a},readValueFromPointer:we,destructorFunction(r){Z(r)}})},Nt=globalThis.TextDecoder?new TextDecoder("utf-16le"):void 0,mn=(e,t,r)=>{h(e%2==0,"Pointer passed to UTF16ToString must be aligned to two bytes!");var n=e>>1,i=yt(ce,n,t/2,r);if(i-n>16&&Nt)return Nt.decode(ce.subarray(n,i));for(var o="",a=n;a<i;++a){var l=ce[a];o+=String.fromCharCode(l)}return o},yn=(e,t,r)=>{if(h(t%2==0,"Pointer passed to stringToUTF16 must be aligned to two bytes!"),h(typeof r=="number","stringToUTF16(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),r??=2147483647,r<2)return 0;r-=2;for(var n=t,i=r<e.length*2?r/2:e.length,o=0;o<i;++o){var a=e.charCodeAt(o);Se[t>>1]=a,t+=2}return Se[t>>1]=0,t-n},Sn=e=>e.length*2,bn=(e,t,r)=>{h(e%4==0,"Pointer passed to UTF32ToString must be aligned to four bytes!");for(var n="",i=e>>2,o=0;!(o>=t/4);o++){var a=P[i+o];if(!a&&!r)break;n+=String.fromCodePoint(a)}return n},wn=(e,t,r)=>{if(h(t%4==0,"Pointer passed to stringToUTF32 must be aligned to four bytes!"),h(typeof r=="number","stringToUTF32(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),r??=2147483647,r<4)return 0;for(var n=t,i=n+r-4,o=0;o<e.length;++o){var a=e.codePointAt(o);if(a>65535&&o++,de[t>>2]=a,t+=4,t+4>i)break}return de[t>>2]=0,t-n},Fn=e=>{for(var t=0,r=0;r<e.length;++r){var n=e.codePointAt(r);n>65535&&r++,t+=4}return t},Tn=(e,t,r)=>{r=D(r);var n,i,o;t===2?(n=mn,i=yn,o=Sn):(h(t===4,"only 2-byte and 4-byte strings are currently supported"),n=bn,i=wn,o=Fn),z(e,{name:r,fromWireType:a=>{var l=P[a>>2],c=n(a+4,l*t,!0);return Z(a),c},toWireType:(a,l)=>{typeof l!="string"&&$(`Cannot pass non-string to C++ string type ${r}`);var c=o(l),f=tt(4+c+t);return P[f>>2]=c/t,i(l,f+4,c+t),a!==null&&a.push(Z,f),f},readValueFromPointer:we,destructorFunction(a){Z(a)}})},En=(e,t,r,n,i,o)=>{Ae[e]={name:D(t),rawConstructor:Y(r,n),rawDestructor:Y(i,o),fields:[]}},Cn=(e,t,r,n,i,o,a,l,c,f)=>{Ae[e].fields.push({fieldName:D(t),getterReturnType:r,getter:Y(n,i),getterContext:o,setterArgumentType:a,setter:Y(l,c),setterContext:f})},Pn=(e,t)=>{t=D(t),z(e,{isVoid:!0,name:t,fromWireType:()=>{},toWireType:(r,n)=>{}})},Ze=[],$n=e=>{var t=Ze.length;return Ze.push(e),t},kn=(e,t)=>{for(var r=new Array(e),n=0;n<e;++n)r[n]=Dt(P[t+n*4>>2],`parameter ${n}`);return r},In=(e,t,r)=>{var n=[],i=e(n,r);return n.length&&(P[t>>2]=_e.toHandle(n)),i},An={},Rn=e=>{var t=An[e];return t===void 0?D(e):t},Mn=(e,t,r)=>{var n=8,[i,...o]=kn(e,t),a=i.toWireType.bind(i),l=o.map(E=>E.readValueFromPointer.bind(E));e--;var c={toValue:_e.toValue},f=l.map((E,A)=>{var R=`argFromPtr${A}`;return c[R]=E,`${R}(args${A?"+"+A*n:""})`}),g;switch(r){case 0:g="toValue(handle)";break;case 2:g="new (toValue(handle))";break;case 3:g="";break;case 1:c.getStringOrSymbol=Rn,g="toValue(handle)[getStringOrSymbol(methodName)]";break}g+=`(${f})`,i.isVoid||(c.toReturnWire=a,c.emval_returnValue=In,g=`return emval_returnValue(toReturnWire, destructorsRef, ${g})`),g=`return function (handle, methodName, destructorsRef, args) {
${g}
}`;var S=new Function(Object.keys(c),g)(...Object.values(c)),b=`methodCaller<(${o.map(E=>E.name)}) => ${i.name}>`;return $n(We(b,S))},xn=(e,t,r,n,i)=>Ze[e](t,r,n,i),Ln=e=>{var t=_e.toValue(e);ze(t),Wt(e)},Wn=(e,t,r,n)=>{var i=new Date().getFullYear(),o=new Date(i,0,1),a=new Date(i,6,1),l=o.getTimezoneOffset(),c=a.getTimezoneOffset(),f=Math.max(l,c);P[e>>2]=f*60,de[t>>2]=+(l!=c);var g=E=>{var A=E>=0?"-":"+",R=Math.abs(E),H=String(Math.floor(R/60)).padStart(2,"0"),B=String(R%60).padStart(2,"0");return`UTC${A}${H}${B}`},S=g(l),b=g(c);h(S),h(b),h(Ne(S)<=16,`timezone name truncated to fit in TZNAME_MAX (${S})`),h(Ne(b)<=16,`timezone name truncated to fit in TZNAME_MAX (${b})`),c<l?(ge(S,r,17),ge(b,n,17)):(ge(S,n,17),ge(b,r,17))},On=e=>{j(`Cannot enlarge memory arrays to size ${e} bytes (OOM). Either (1) compile with -sINITIAL_MEMORY=X with X higher than the current value ${re.length}, (2) compile with -sALLOW_MEMORY_GROWTH which allows increasing the size at runtime, or (3) if you want malloc to return NULL (0) instead of this abort, compile with -sABORTING_MALLOC=0`)},Dn=e=>{K.length,e>>>=0,On(e)},Qe={},Nn=()=>w||"./this.program",Ce=()=>{if(!Ce.strings){var e=(globalThis.navigator?.language??"C").replace("-","_")+".UTF-8",t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:e,_:Nn()};for(var r in Qe)Qe[r]===void 0?delete t[r]:t[r]=Qe[r];var n=[];for(var r in t)n.push(`${r}=${t[r]}`);Ce.strings=n}return Ce.strings},Un=(e,t)=>{var r=0,n=0;for(var i of Ce()){var o=t+r;P[e+n>>2]=o,r+=ge(i,o,1/0)+1,n+=4}return 0},Hn=(e,t)=>{var r=Ce();P[e>>2]=r.length;var n=0;for(var i of r)n+=Ne(i)+1;return P[t>>2]=n,0},Bn=e=>{j("fd_close called without SYSCALLS_REQUIRE_FILESYSTEM")};function Vn(e,t,r,n){return 70}var jn=[null,[],[]],zn=(e,t)=>{var r=jn[e];h(r),t===0||t===10?((e===1?J:V)(St(r)),r.length=0):r.push(t)},Gn=(e,t,r,n)=>{for(var i=0,o=0;o<r;o++){var a=P[t>>2],l=P[t+4>>2];t+=8;for(var c=0;c<l;c++)zn(e,K[a+c]);i+=l}return P[n>>2]=i,0},et=e=>e instanceof Be?e.excPtr:e,qn=e=>nt(et(e)),Yn=e=>Yt(et(e)),Ut=e=>Gt(e),Jn=e=>{var t=L(),r=Ut(4),n=Ut(4);Jt(e,r,n);var i=P[r>>2],o=P[n>>2],a=fe(i);Z(i);var l;return o&&(l=fe(o),Z(o)),x(t),[a,l]},Ht=e=>Jn(et(e));Ur(),Yr(),h(ne.length===10);{if(s.noExitRuntime&&s.noExitRuntime,s.print&&(J=s.print),s.printErr&&(V=s.printErr),s.wasmBinary&&(me=s.wasmBinary),s.FS_createDataFile=q.createDataFile,s.FS_createPreloadedFile=q.createPreloadedFile,Zn(),s.arguments&&s.arguments,s.thisProgram&&(w=s.thisProgram),h(typeof s.memoryInitializerPrefixURL>"u","Module.memoryInitializerPrefixURL option was removed, use Module.locateFile instead"),h(typeof s.pthreadMainPrefixURL>"u","Module.pthreadMainPrefixURL option was removed, use Module.locateFile instead"),h(typeof s.cdInitializerPrefixURL>"u","Module.cdInitializerPrefixURL option was removed, use Module.locateFile instead"),h(typeof s.filePackagePrefixURL>"u","Module.filePackagePrefixURL option was removed, use Module.locateFile instead"),h(typeof s.read>"u","Module.read option was removed"),h(typeof s.readAsync>"u","Module.readAsync option was removed (modify readAsync in JS)"),h(typeof s.readBinary>"u","Module.readBinary option was removed (modify readBinary in JS)"),h(typeof s.setWindowTitle>"u","Module.setWindowTitle option was removed (modify emscripten_set_window_title in JS)"),h(typeof s.TOTAL_MEMORY>"u","Module.TOTAL_MEMORY has been renamed Module.INITIAL_MEMORY"),h(typeof s.ENVIRONMENT>"u","Module.ENVIRONMENT has been deprecated. To force the environment, use the ENVIRONMENT compile-time option (for example, -sENVIRONMENT=web or -sENVIRONMENT=node)"),h(typeof s.STACK_SIZE>"u","STACK_SIZE can no longer be set at runtime.  Use -sSTACK_SIZE at link time"),h(typeof s.wasmMemory>"u","Use of `wasmMemory` detected.  Use -sIMPORTED_MEMORY to define wasmMemory externally"),h(typeof s.INITIAL_MEMORY>"u","Detected runtime INITIAL_MEMORY setting.  Use -sIMPORTED_MEMORY to define wasmMemory dynamically"),s.preInit)for(typeof s.preInit=="function"&&(s.preInit=[s.preInit]);s.preInit.length>0;)s.preInit.shift()();$e("preInit")}var Kn=["writeI53ToI64","writeI53ToI64Clamped","writeI53ToI64Signaling","writeI53ToU64Clamped","writeI53ToU64Signaling","readI53FromI64","readI53FromU64","convertI32PairToI53","convertI32PairToI53Checked","convertU32PairToI53","getTempRet0","zeroMemory","exitJS","getHeapMax","growMemory","withStackSave","strError","inetPton4","inetNtop4","inetPton6","inetNtop6","readSockaddr","writeSockaddr","readEmAsmArgs","jstoi_q","autoResumeAudioContext","getDynCaller","dynCall","handleException","keepRuntimeAlive","runtimeKeepalivePush","runtimeKeepalivePop","callUserCallback","maybeExit","asyncLoad","asmjsMangle","alignMemory","mmapAlloc","HandleAllocator","getUniqueRunDependency","addRunDependency","removeRunDependency","addOnInit","addOnPostCtor","addOnPreMain","addOnExit","STACK_SIZE","STACK_ALIGN","POINTER_SIZE","ASSERTIONS","ccall","cwrap","convertJsFunctionToWasm","getEmptyTableSlot","updateTableMap","getFunctionAddress","addFunction","removeFunction","intArrayFromString","intArrayToString","stringToAscii","stringToNewUTF8","stringToUTF8OnStack","writeArrayToMemory","registerKeyEventCallback","maybeCStringToJsString","findEventTarget","getBoundingClientRect","fillMouseEventData","registerMouseEventCallback","registerWheelEventCallback","registerUiEventCallback","registerFocusEventCallback","fillDeviceOrientationEventData","registerDeviceOrientationEventCallback","fillDeviceMotionEventData","registerDeviceMotionEventCallback","screenOrientation","fillOrientationChangeEventData","registerOrientationChangeEventCallback","fillFullscreenChangeEventData","registerFullscreenChangeEventCallback","JSEvents_requestFullscreen","JSEvents_resizeCanvasForFullscreen","registerRestoreOldStyle","hideEverythingExceptGivenElement","restoreHiddenElements","setLetterbox","softFullscreenResizeWebGLRenderTarget","doRequestFullscreen","fillPointerlockChangeEventData","registerPointerlockChangeEventCallback","registerPointerlockErrorEventCallback","requestPointerLock","fillVisibilityChangeEventData","registerVisibilityChangeEventCallback","registerTouchEventCallback","fillGamepadEventData","registerGamepadEventCallback","registerBeforeUnloadEventCallback","fillBatteryEventData","registerBatteryEventCallback","setCanvasElementSize","getCanvasElementSize","jsStackTrace","getCallstack","convertPCtoSourceLocation","checkWasiClock","wasiRightsToMuslOFlags","wasiOFlagsToMuslOFlags","initRandomFill","randomFill","safeSetTimeout","setImmediateWrapped","safeRequestAnimationFrame","clearImmediateWrapped","registerPostMainLoop","registerPreMainLoop","getPromise","makePromise","idsToPromises","makePromiseCallback","Browser_asyncPrepareDataCounter","isLeapYear","ydayFromDate","arraySum","addDays","getSocketFromFD","getSocketAddress","FS_createPreloadedFile","FS_preloadFile","FS_modeStringToFlags","FS_getMode","FS_stdin_getChar","FS_mkdirTree","_setNetworkCallback","heapObjectForWebGLType","toTypedArrayIndex","webgl_enable_ANGLE_instanced_arrays","webgl_enable_OES_vertex_array_object","webgl_enable_WEBGL_draw_buffers","webgl_enable_WEBGL_multi_draw","webgl_enable_EXT_polygon_offset_clamp","webgl_enable_EXT_clip_control","webgl_enable_WEBGL_polygon_mode","emscriptenWebGLGet","computeUnpackAlignedImageSize","colorChannelsInGlTextureFormat","emscriptenWebGLGetTexPixelData","emscriptenWebGLGetUniform","webglGetUniformLocation","webglPrepareUniformLocationsBeforeFirstUse","webglGetLeftBracePos","emscriptenWebGLGetVertexAttrib","__glGetActiveAttribOrUniform","writeGLArray","registerWebGlEventCallback","runAndAbortIfError","ALLOC_NORMAL","ALLOC_STACK","allocate","writeStringToMemory","writeAsciiToMemory","allocateUTF8","allocateUTF8OnStack","demangle","stackTrace","getNativeTypeSize","getFunctionArgsName","createJsInvokerSignature","PureVirtualError","registerInheritedInstance","unregisterInheritedInstance","getInheritedInstanceCount","getLiveInheritedInstances","setDelayFunction","validateThis","count_emval_handles"];Kn.forEach(cr);var Xn=["run","out","err","callMain","abort","wasmExports","HEAPF32","HEAPF64","HEAP8","HEAPU8","HEAP16","HEAPU16","HEAP32","HEAPU32","HEAP64","HEAPU64","writeStackCookie","checkStackCookie","INT53_MAX","INT53_MIN","bigintToI53Checked","stackSave","stackRestore","stackAlloc","setTempRet0","createNamedFunction","ptrToString","abortOnCannotGrowMemory","ENV","ERRNO_CODES","DNS","Protocols","Sockets","timers","warnOnce","readEmAsmArgsArray","getExecutableName","wasmTable","wasmMemory","noExitRuntime","addOnPreRun","addOnPostRun","freeTableIndexes","functionsInTableMap","setValue","getValue","PATH","PATH_FS","UTF8Decoder","UTF8ArrayToString","UTF8ToString","stringToUTF8Array","stringToUTF8","lengthBytesUTF8","AsciiToString","UTF16Decoder","UTF16ToString","stringToUTF16","lengthBytesUTF16","UTF32ToString","stringToUTF32","lengthBytesUTF32","JSEvents","specialHTMLTargets","findCanvasEventTarget","currentFullscreenStrategy","restoreOldWindowedStyle","UNWIND_CACHE","ExitStatus","getEnvStrings","flush_NO_FILESYSTEM","emSetImmediate","emClearImmediate_deps","emClearImmediate","promiseMap","uncaughtExceptionCount","exceptionLast","exceptionCaught","ExceptionInfo","findMatchingCatch","getExceptionMessageCommon","exnToPtr","Browser","requestFullscreen","requestFullScreen","setCanvasSize","getUserMedia","createContext","getPreloadedImageData__data","wget","MONTH_DAYS_REGULAR","MONTH_DAYS_LEAP","MONTH_DAYS_REGULAR_CUMULATIVE","MONTH_DAYS_LEAP_CUMULATIVE","SYSCALLS","preloadPlugins","FS_stdin_getChar_buffer","FS_unlink","FS_createPath","FS_createDevice","FS_readFile","FS","FS_root","FS_mounts","FS_devices","FS_streams","FS_nextInode","FS_nameTable","FS_currentPath","FS_initialized","FS_ignorePermissions","FS_filesystems","FS_syncFSRequests","FS_readFiles","FS_lookupPath","FS_getPath","FS_hashName","FS_hashAddNode","FS_hashRemoveNode","FS_lookupNode","FS_createNode","FS_destroyNode","FS_isRoot","FS_isMountpoint","FS_isFile","FS_isDir","FS_isLink","FS_isChrdev","FS_isBlkdev","FS_isFIFO","FS_isSocket","FS_flagsToPermissionString","FS_nodePermissions","FS_mayLookup","FS_mayCreate","FS_mayDelete","FS_mayOpen","FS_checkOpExists","FS_nextfd","FS_getStreamChecked","FS_getStream","FS_createStream","FS_closeStream","FS_dupStream","FS_doSetAttr","FS_chrdev_stream_ops","FS_major","FS_minor","FS_makedev","FS_registerDevice","FS_getDevice","FS_getMounts","FS_syncfs","FS_mount","FS_unmount","FS_lookup","FS_mknod","FS_statfs","FS_statfsStream","FS_statfsNode","FS_create","FS_mkdir","FS_mkdev","FS_symlink","FS_rename","FS_rmdir","FS_readdir","FS_readlink","FS_stat","FS_fstat","FS_lstat","FS_doChmod","FS_chmod","FS_lchmod","FS_fchmod","FS_doChown","FS_chown","FS_lchown","FS_fchown","FS_doTruncate","FS_truncate","FS_ftruncate","FS_utime","FS_open","FS_close","FS_isClosed","FS_llseek","FS_read","FS_write","FS_mmap","FS_msync","FS_ioctl","FS_writeFile","FS_cwd","FS_chdir","FS_createDefaultDirectories","FS_createDefaultDevices","FS_createSpecialDirectories","FS_createStandardStreams","FS_staticInit","FS_init","FS_quit","FS_findObject","FS_analyzePath","FS_createFile","FS_createDataFile","FS_forceLoadFile","FS_createLazyFile","FS_absolutePath","FS_createFolder","FS_createLink","FS_joinPath","FS_mmapAlloc","FS_standardizePath","MEMFS","TTY","PIPEFS","SOCKFS","tempFixedLengthArray","miniTempWebGLFloatBuffers","miniTempWebGLIntBuffers","GL","AL","GLUT","EGL","GLEW","IDBStore","SDL","SDL_gfx","print","printErr","jstoi_s","InternalError","BindingError","throwInternalError","throwBindingError","registeredTypes","awaitingDependencies","typeDependencies","tupleRegistrations","structRegistrations","sharedRegisterType","whenDependentTypesAreResolved","getTypeName","getFunctionName","heap32VectorToArray","requireRegisteredType","usesDestructorStack","checkArgCount","getEnumValueType","getRequiredArgCount","createJsInvoker","UnboundTypeError","EmValType","EmValOptionalType","throwUnboundTypeError","ensureOverloadTable","exposePublicSymbol","replacePublicSymbol","embindRepr","registeredInstances","getBasestPointer","getInheritedInstance","registeredPointers","registerType","integerReadValueFromPointer","enumReadValueFromPointer","floatReadValueFromPointer","assertIntegerRange","readPointer","installIndexedIterator","runDestructors","craftInvokerFunction","embind__requireFunction","genericPointerToWireType","constNoSmartPtrRawPointerToWireType","nonConstNoSmartPtrRawPointerToWireType","init_RegisteredPointer","RegisteredPointer","RegisteredPointer_fromWireType","runDestructor","releaseClassHandle","finalizationRegistry","detachFinalizer_deps","detachFinalizer","attachFinalizer","makeClassHandle","init_ClassHandle","ClassHandle","throwInstanceAlreadyDeleted","deletionQueue","flushPendingDeletes","delayFunction","RegisteredClass","shallowCopyInternalPointer","downcastPointer","upcastPointer","char_0","char_9","makeLegalFunctionName","emval_freelist","emval_handles","emval_symbols","getStringOrSymbol","Emval","emval_returnValue","emval_lookupTypes","emval_methodCallers","emval_addMethodCaller"];Xn.forEach(lt),s.incrementExceptionRefcount=qn,s.decrementExceptionRefcount=Yn,s.getExceptionMessage=Ht;function Zn(){ar("fetchSettings")}var Bt=U("___getTypeName"),tt=U("_malloc"),rt=U("_emscripten_stack_get_end"),Z=U("_free"),O=U("_setThrew"),Vt=U("__emscripten_tempret_set"),jt=U("_emscripten_stack_init"),zt=U("__emscripten_stack_restore"),Gt=U("__emscripten_stack_alloc"),qt=U("_emscripten_stack_get_current"),Yt=U("___cxa_decrement_exception_refcount"),nt=U("___cxa_increment_exception_refcount"),Jt=U("___get_exception_message"),Kt=U("___cxa_can_catch"),Xt=U("___cxa_get_exception_ptr"),Zt=U("wasmMemory"),it=U("wasmTable");function Qn(e){h(typeof e.__getTypeName<"u","missing Wasm export: __getTypeName"),h(typeof e.malloc<"u","missing Wasm export: malloc"),h(typeof e.fflush<"u","missing Wasm export: fflush"),h(typeof e.emscripten_stack_get_end<"u","missing Wasm export: emscripten_stack_get_end"),h(typeof e.emscripten_stack_get_base<"u","missing Wasm export: emscripten_stack_get_base"),h(typeof e.strerror<"u","missing Wasm export: strerror"),h(typeof e.free<"u","missing Wasm export: free"),h(typeof e.setThrew<"u","missing Wasm export: setThrew"),h(typeof e._emscripten_tempret_set<"u","missing Wasm export: _emscripten_tempret_set"),h(typeof e.emscripten_stack_init<"u","missing Wasm export: emscripten_stack_init"),h(typeof e.emscripten_stack_get_free<"u","missing Wasm export: emscripten_stack_get_free"),h(typeof e._emscripten_stack_restore<"u","missing Wasm export: _emscripten_stack_restore"),h(typeof e._emscripten_stack_alloc<"u","missing Wasm export: _emscripten_stack_alloc"),h(typeof e.emscripten_stack_get_current<"u","missing Wasm export: emscripten_stack_get_current"),h(typeof e.__cxa_decrement_exception_refcount<"u","missing Wasm export: __cxa_decrement_exception_refcount"),h(typeof e.__cxa_increment_exception_refcount<"u","missing Wasm export: __cxa_increment_exception_refcount"),h(typeof e.__cxa_free_exception<"u","missing Wasm export: __cxa_free_exception"),h(typeof e.__get_exception_message<"u","missing Wasm export: __get_exception_message"),h(typeof e.__cxa_can_catch<"u","missing Wasm export: __cxa_can_catch"),h(typeof e.__cxa_get_exception_ptr<"u","missing Wasm export: __cxa_get_exception_ptr"),h(typeof e.memory<"u","missing Wasm export: memory"),h(typeof e.__indirect_function_table<"u","missing Wasm export: __indirect_function_table"),Bt=X("__getTypeName",1),tt=X("malloc",1),rt=e.emscripten_stack_get_end,e.emscripten_stack_get_base,Z=X("free",1),O=X("setThrew",2),Vt=X("_emscripten_tempret_set",1),jt=e.emscripten_stack_init,e.emscripten_stack_get_free,zt=e._emscripten_stack_restore,Gt=e._emscripten_stack_alloc,qt=e.emscripten_stack_get_current,Yt=X("__cxa_decrement_exception_refcount",1),nt=X("__cxa_increment_exception_refcount",1),Jt=X("__get_exception_message",3),Kt=X("__cxa_can_catch",3),Xt=X("__cxa_get_exception_ptr",1),Zt=e.memory,it=e.__indirect_function_table}var Qt={__assert_fail:Fr,__cxa_begin_catch:Tr,__cxa_find_matching_catch_2:Er,__cxa_find_matching_catch_3:Cr,__cxa_throw:Pr,__resumeException:$r,_abort_js:kr,_embind_finalize_value_object:Ar,_embind_register_bigint:Mr,_embind_register_bool:xr,_embind_register_class:Kr,_embind_register_class_constructor:en,_embind_register_class_function:tn,_embind_register_emval:rn,_embind_register_enum:on,_embind_register_enum_value:sn,_embind_register_float:ln,_embind_register_function:cn,_embind_register_integer:dn,_embind_register_iterable:fn,_embind_register_memory_view:hn,_embind_register_optional:_n,_embind_register_std_string:vn,_embind_register_std_wstring:Tn,_embind_register_value_object:En,_embind_register_value_object_field:Cn,_embind_register_void:Pn,_emval_create_invoker:Mn,_emval_invoke:xn,_emval_run_destructors:Ln,_tzset_js:Wn,emscripten_resize_heap:Dn,environ_get:Un,environ_sizes_get:Hn,fd_close:Bn,fd_seek:Vn,fd_write:Gn,invoke_diii:mi,invoke_fiii:vi,invoke_i:yi,invoke_ii:oi,invoke_iii:ii,invoke_iiii:ni,invoke_iiiii:pi,invoke_iiiiii:di,invoke_iiiiiii:ci,invoke_iiiiiiii:fi,invoke_iiiiiiiiiii:hi,invoke_iiiiiiiiiiii:bi,invoke_iiiiiiiiiiiii:gi,invoke_jiiii:_i,invoke_v:li,invoke_vi:ai,invoke_vii:si,invoke_viii:ui,invoke_viiidi:ti,invoke_viiifi:ei,invoke_viiii:ri,invoke_viiiiiii:Si,invoke_viiiiiiiiii:wi,invoke_viiiiiiiiiiiiiii:Fi};function ei(e,t,r,n,i,o){var a=L();try{W(e)(t,r,n,i,o)}catch(l){if(x(a),!(l instanceof M))throw l;O(1,0)}}function ti(e,t,r,n,i,o){var a=L();try{W(e)(t,r,n,i,o)}catch(l){if(x(a),!(l instanceof M))throw l;O(1,0)}}function ri(e,t,r,n,i){var o=L();try{W(e)(t,r,n,i)}catch(a){if(x(o),!(a instanceof M))throw a;O(1,0)}}function ni(e,t,r,n){var i=L();try{return W(e)(t,r,n)}catch(o){if(x(i),!(o instanceof M))throw o;O(1,0)}}function ii(e,t,r){var n=L();try{return W(e)(t,r)}catch(i){if(x(n),!(i instanceof M))throw i;O(1,0)}}function oi(e,t){var r=L();try{return W(e)(t)}catch(n){if(x(r),!(n instanceof M))throw n;O(1,0)}}function si(e,t,r){var n=L();try{W(e)(t,r)}catch(i){if(x(n),!(i instanceof M))throw i;O(1,0)}}function ai(e,t){var r=L();try{W(e)(t)}catch(n){if(x(r),!(n instanceof M))throw n;O(1,0)}}function li(e){var t=L();try{W(e)()}catch(r){if(x(t),!(r instanceof M))throw r;O(1,0)}}function ci(e,t,r,n,i,o,a){var l=L();try{return W(e)(t,r,n,i,o,a)}catch(c){if(x(l),!(c instanceof M))throw c;O(1,0)}}function di(e,t,r,n,i,o){var a=L();try{return W(e)(t,r,n,i,o)}catch(l){if(x(a),!(l instanceof M))throw l;O(1,0)}}function ui(e,t,r,n){var i=L();try{W(e)(t,r,n)}catch(o){if(x(i),!(o instanceof M))throw o;O(1,0)}}function fi(e,t,r,n,i,o,a,l){var c=L();try{return W(e)(t,r,n,i,o,a,l)}catch(f){if(x(c),!(f instanceof M))throw f;O(1,0)}}function hi(e,t,r,n,i,o,a,l,c,f,g){var S=L();try{return W(e)(t,r,n,i,o,a,l,c,f,g)}catch(b){if(x(S),!(b instanceof M))throw b;O(1,0)}}function pi(e,t,r,n,i){var o=L();try{return W(e)(t,r,n,i)}catch(a){if(x(o),!(a instanceof M))throw a;O(1,0)}}function _i(e,t,r,n,i){var o=L();try{return W(e)(t,r,n,i)}catch(a){if(x(o),!(a instanceof M))throw a;return O(1,0),0n}}function gi(e,t,r,n,i,o,a,l,c,f,g,S,b){var E=L();try{return W(e)(t,r,n,i,o,a,l,c,f,g,S,b)}catch(A){if(x(E),!(A instanceof M))throw A;O(1,0)}}function vi(e,t,r,n){var i=L();try{return W(e)(t,r,n)}catch(o){if(x(i),!(o instanceof M))throw o;O(1,0)}}function mi(e,t,r,n){var i=L();try{return W(e)(t,r,n)}catch(o){if(x(i),!(o instanceof M))throw o;O(1,0)}}function yi(e){var t=L();try{return W(e)()}catch(r){if(x(t),!(r instanceof M))throw r;O(1,0)}}function Si(e,t,r,n,i,o,a,l){var c=L();try{W(e)(t,r,n,i,o,a,l)}catch(f){if(x(c),!(f instanceof M))throw f;O(1,0)}}function bi(e,t,r,n,i,o,a,l,c,f,g,S){var b=L();try{return W(e)(t,r,n,i,o,a,l,c,f,g,S)}catch(E){if(x(b),!(E instanceof M))throw E;O(1,0)}}function wi(e,t,r,n,i,o,a,l,c,f,g){var S=L();try{W(e)(t,r,n,i,o,a,l,c,f,g)}catch(b){if(x(S),!(b instanceof M))throw b;O(1,0)}}function Fi(e,t,r,n,i,o,a,l,c,f,g,S,b,E,A,R){var H=L();try{W(e)(t,r,n,i,o,a,l,c,f,g,S,b,E,A,R)}catch(B){if(x(H),!(B instanceof M))throw B;O(1,0)}}var er;function Ti(){jt(),sr()}function Ei(){Ti(),ur();function e(){h(!er),er=!0,s.calledRun=!0,!Ue&&(fr(),ct?.(s),s.onRuntimeInitialized?.(),$e("onRuntimeInitialized"),h(!s._main,'compiled without a main, but one is present. if you added it from JS, use Module["onRuntimeInitialized"]'),hr())}s.setStatus?(s.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>s.setStatus(""),1),e()},1)):e(),He()}var ve;ve=await Sr(),Ei(),ke?d=s:d=new Promise((e,t)=>{ct=e,dt=t});for(const e of Object.keys(s))e in I||Object.defineProperty(I,e,{configurable:!0,get(){j(`Access to module property ('${e}') is no longer possible via the module constructor argument; Instead, use the result of the module constructor.`)}});return d}let Pe=null;async function Ai(){return Pe||(Pe=await Ii()),Pe}function Ri(){if(!Pe)throw new Error("Call init() first");return Pe}const k={Blank:0,Context:1,Removed:2,Added:3};function at(I){return typeof I=="number"?I:typeof I=="object"&&I!==null&&"value"in I?I.value:I}function Mi(I,d,s=3){return Ri().createViewModel(I,d,s)}function st(I){const d=[];for(let s=0;s<I.size();s++)d.push(I.get(s));return d}function or(I,d,s){return at(d.kind)===k.Blank||d.lineNo===0?"":(s?I.oldLines:I.newLines).get(d.lineNo-1)}function xi(I){const d=st(I.lines).map((u,p)=>({index:p,left:{kind:at(u.left.kind),lineNo:u.left.lineNo,content:or(I,u.left,!0)},right:{kind:at(u.right.kind),lineNo:u.right.lineNo,content:or(I,u.right,!1)}})),s=st(I.highlights).map(u=>({row:u.row,start:u.start,end:u.end,isLeft:u.isLeft})),_=st(I.connectors).map(u=>({top:u.top,bottom:u.bottom,leftStart:u.leftStart,leftEnd:u.leftEnd,rightStart:u.rightStart,rightEnd:u.rightEnd}));return{lines:d,highlights:s,connectors:_}}const ee=20,te=8,se=48,Li="",Wi="";class Oi{el;state;constructor(){this.state={isDarkMode:localStorage.getItem("darkMode")!=="false",isSoftWrap:localStorage.getItem("softWrap")==="true",indentSize:parseInt(localStorage.getItem("indentSize")??"4",10),diffResult:null,scrollPending:!1,resizeTimeout:null},this.el=this.queryElements(),this.setup()}queryElements(){return{leftEditor:document.getElementById("leftEditor"),rightEditor:document.getElementById("rightEditor"),leftHighlight:document.getElementById("leftHighlight"),rightHighlight:document.getElementById("rightHighlight"),leftContent:document.getElementById("leftContent"),rightContent:document.getElementById("rightContent"),leftLineNumbers:document.getElementById("leftLineNumbers"),rightLineNumbers:document.getElementById("rightLineNumbers"),leftStats:document.getElementById("leftStats"),rightStats:document.getElementById("rightStats"),connectorSvg:document.getElementById("connectorSvg"),connectorContent:document.querySelector(".connector-content"),wrapBtn:document.getElementById("wrapBtn"),themeBtn:document.getElementById("themeBtn"),indentSelect:document.getElementById("indentSelect")}}setup(){this.el.leftEditor.value=Li,this.el.rightEditor.value=Wi,this.el.indentSelect.value=String(this.state.indentSize),this.bindEvents(),this.applyTheme(),this.applyWrap(),this.updateDiff(),requestAnimationFrame(()=>{this.syncHeight(this.el.leftHighlight,this.el.leftEditor),this.syncHeight(this.el.rightHighlight,this.el.rightEditor)})}bindEvents(){this.el.leftEditor.addEventListener("input",()=>this.onLeftInput()),this.el.rightEditor.addEventListener("input",()=>this.onRightInput()),this.el.leftEditor.addEventListener("keydown",d=>this.handleKeyDown(d,this.el.leftEditor)),this.el.rightEditor.addEventListener("keydown",d=>this.handleKeyDown(d,this.el.rightEditor)),this.el.leftContent.addEventListener("scroll",()=>this.handleLeftScroll()),this.el.rightContent.addEventListener("scroll",()=>this.handleRightScroll()),this.el.wrapBtn.addEventListener("click",()=>this.toggleWrap()),this.el.themeBtn.addEventListener("click",()=>this.toggleTheme()),this.el.indentSelect.addEventListener("change",()=>this.handleIndentChange()),window.addEventListener("resize",()=>{this.state.resizeTimeout&&clearTimeout(this.state.resizeTimeout),this.state.resizeTimeout=window.setTimeout(()=>{this.state.isSoftWrap&&(this.syncHeight(this.el.leftHighlight,this.el.leftEditor),this.syncHeight(this.el.rightHighlight,this.el.rightEditor)),this.drawConnectors()},100)})}onLeftInput(){this.updateDiff()}onRightInput(){this.updateDiff()}toggleTheme(){this.state.isDarkMode=!this.state.isDarkMode,localStorage.setItem("darkMode",String(this.state.isDarkMode)),this.applyTheme()}applyTheme(){document.body.classList.toggle("light-mode",!this.state.isDarkMode)}toggleWrap(){this.state.isSoftWrap=!this.state.isSoftWrap,localStorage.setItem("softWrap",String(this.state.isSoftWrap)),this.applyWrap()}applyWrap(){[this.el.leftEditor,this.el.rightEditor,this.el.leftHighlight,this.el.rightHighlight].forEach(s=>s.classList.toggle("soft-wrap",this.state.isSoftWrap)),this.el.wrapBtn.classList.toggle("active",this.state.isSoftWrap),requestAnimationFrame(()=>{this.syncHeight(this.el.leftHighlight,this.el.leftEditor),this.syncHeight(this.el.rightHighlight,this.el.rightEditor)})}handleIndentChange(){this.state.indentSize=parseInt(this.el.indentSelect.value,10),localStorage.setItem("indentSize",String(this.state.indentSize))}handleKeyDown(d,s){d.key==="Tab"&&(d.preventDefault(),d.shiftKey?this.unindent(s):this.indent(s))}indent(d){const{selectionStart:s,selectionEnd:_,value:u}=d,p=" ".repeat(this.state.indentSize);if(s===_)d.value=u.slice(0,s)+p+u.slice(_),d.selectionStart=d.selectionEnd=s+this.state.indentSize;else{const m=u.split(`
`);let v=0,w=s,y=_;for(let F=0;F<m.length;F++){const C=v,T=v+m[F].length;T>=s&&C<_&&(m[F]=p+m[F],C<=s&&(w+=this.state.indentSize),C<_&&(y+=this.state.indentSize)),v=T+1}d.value=m.join(`
`),d.selectionStart=w,d.selectionEnd=y}d.dispatchEvent(new Event("input"))}unindent(d){const{selectionStart:s,selectionEnd:_,value:u}=d;if(s===_){const p=u.lastIndexOf(`
`,s-1)+1,m=u.slice(p,s);let v=0;for(let w=m.length-1;w>=0&&v<this.state.indentSize&&m[w]===" ";w--)v++;v>0&&(d.value=u.slice(0,s-v)+u.slice(s),d.selectionStart=d.selectionEnd=s-v,d.dispatchEvent(new Event("input")))}else{const p=u.split(`
`);let m=0,v=s,w=_;for(let y=0;y<p.length;y++){const F=m,C=m+p[y].length;if(C>=s&&F<_){let T=0;for(let N=0;N<p[y].length&&N<this.state.indentSize&&p[y][N]===" ";N++)T++;T>0&&(p[y]=p[y].slice(T),F<=s&&(v-=Math.min(T,s-F)),F<_&&(w-=T))}m=C+1}d.value=p.join(`
`),d.selectionStart=v,d.selectionEnd=w,d.dispatchEvent(new Event("input"))}}handleLeftScroll(){this.el.leftLineNumbers.scrollTop=this.el.leftContent.scrollTop,this.scheduleConnectorRedraw()}handleRightScroll(){this.el.rightLineNumbers.scrollTop=this.el.rightContent.scrollTop,this.scheduleConnectorRedraw()}scheduleConnectorRedraw(){this.state.scrollPending||(this.state.scrollPending=!0,requestAnimationFrame(()=>{this.drawConnectors(),this.state.scrollPending=!1}))}updateDiff(){const d=this.el.leftEditor.value,s=this.el.rightEditor.value,_=Mi(d,s);this.state.diffResult=xi(_),this.updateEditor("left"),this.updateEditor("right"),this.updateStats(),requestAnimationFrame(()=>this.drawConnectors())}updateEditor(d){const s=this.state.diffResult;if(!s)return;const _=d==="left",u=_?this.el.leftHighlight:this.el.rightHighlight,p=_?this.el.leftEditor:this.el.rightEditor,m=_?this.el.leftLineNumbers:this.el.rightLineNumbers,v=p.value.split(`
`);m.innerHTML=v.map((w,y)=>`<div class="line-number">${y+1}</div>`).join(""),this.renderHighlights(u,p,s,_),this.syncHeight(u,p)}renderHighlights(d,s,_,u){if(!_.lines.some(y=>{const F=u?y.left:y.right;return F.kind!==k.Context&&F.kind!==k.Blank})){d.classList.remove("visible"),s.classList.remove("has-highlights");return}d.classList.add("visible"),s.classList.add("has-highlights");const m=new Map;for(const y of _.lines){const F=y.left,C=y.right,T=u?F:C;if(T.kind===k.Blank)continue;const N=this.getLineClass(F.kind,C.kind,u),J=F.kind===k.Removed&&C.kind===k.Added?_.highlights.filter(V=>V.row===y.index&&V.isLeft===u):[];m.set(T.lineNo,{line:y,lineClass:N,highlights:J})}const v=s.value.split(`
`),w=[];for(let y=0;y<v.length;y++){const F=y+1,C=v[y];y>0&&w.push(`
`);const T=m.get(F),N=T?.lineClass??"",G=T?.highlights??[];w.push(`<span class="hl-line ${N}">`),G.length>0?w.push(this.renderCharHighlights(C,G,u)):w.push(this.escapeHtml(C)),w.push("</span>")}d.innerHTML=w.join("")}getLineClass(d,s,_){if(d===k.Removed&&s===k.Added)return"hl-modified";if(_){if(d===k.Removed&&s===k.Blank)return"hl-removed"}else if(s===k.Added&&d===k.Blank)return"hl-added";return""}renderCharHighlights(d,s,_){const u=[...s].sort((v,w)=>v.start-w.start),p=[];let m=0;for(const v of u){v.start>m&&p.push(this.escapeHtml(d.slice(m,v.start)));const w=_?"hl-char-removed":"hl-char-added";p.push(`<span class="${w}">${this.escapeHtml(d.slice(v.start,v.end))}</span>`),m=v.end}return m<d.length&&p.push(this.escapeHtml(d.slice(m))),p.join("")}escapeHtml(d){return d.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}syncHeight(d,s){s.style.height="auto",s.offsetHeight;const _=s.scrollHeight,u=s.parentElement?.clientHeight??0,p=Math.max(_,u);s.style.height=`${p}px`,d.style.height=`${p}px`}updateStats(){const d=this.state.diffResult;if(!d)return;const s=d.lines.filter(u=>u.left.kind===k.Removed).length,_=d.lines.filter(u=>u.right.kind===k.Added).length;this.el.leftStats.innerHTML=s>0?`<span class="stat-removed">-${s}</span>`:"",this.el.rightStats.innerHTML=_>0?`<span class="stat-added">+${_}</span>`:""}buildConnectorBlocks(d){const s=[],_=new Set;let u=0;for(;u<d.length;){const p=d[u],m=p.left.kind,v=p.right.kind;if(m===k.Context||m===k.Blank){m===k.Context&&_.add(u),u++;continue}if(m===k.Removed){const y=v===k.Added?"modified":"removed",F=u;let C=u;for(;C+1<d.length;){const T=d[C+1],N=T.left.kind,G=T.right.kind,J=N===k.Removed&&G===k.Added,V=N===k.Removed&&G===k.Blank;if(y==="modified"&&J||y==="removed"&&V)C++;else break}for(let T=F;T<=C;T++)(d[T].right.kind!==k.Added||d[T].left.kind===k.Removed)&&_.add(T);s.push({type:y,startIndex:F,endIndex:C}),u=C+1}else u++}for(u=0;u<d.length;){const p=d[u];if(!_.has(u)&&p.right.kind===k.Added&&p.left.kind===k.Blank){const m=u;let v=u;for(;v+1<d.length;){const w=d[v+1];if(!_.has(v+1)&&w.right.kind===k.Added&&w.left.kind===k.Blank)v++;else break}s.push({type:"added",startIndex:m,endIndex:v}),u=v+1}else u++}return s}drawConnectors(){const d=this.state.diffResult;if(!d)return;for(;this.el.connectorSvg.firstChild;)this.el.connectorSvg.removeChild(this.el.connectorSvg.firstChild);const s=this.el.connectorContent.clientHeight;this.el.connectorSvg.setAttribute("width",String(se)),this.el.connectorSvg.setAttribute("height",String(s)),this.el.connectorSvg.setAttribute("viewBox",`0 0 ${se} ${s}`),this.el.connectorSvg.setAttribute("preserveAspectRatio","none");const _=this.el.leftContent.scrollTop,u=this.el.rightContent.scrollTop,p=this.buildConnectorBlocks(d.lines);for(const m of p)this.drawConnectorBlock(m,d.lines,_,u,s)}drawConnectorBlock(d,s,_,u,p){const m=this.getBlockDisplayPositions(s,d,!0),v=this.getBlockDisplayPositions(s,d,!1);let w,y,F,C;if(d.type==="added"){const J=this.getInsertionLineNo(s,d.startIndex,!0)-1;w=te+J*ee-_,y=w,F=te+v.start*ee-u,C=te+(v.end+1)*ee-u}else if(d.type==="removed"){const J=this.getInsertionLineNo(s,d.startIndex,!1)-1;w=te+m.start*ee-_,y=te+(m.end+1)*ee-_,F=te+J*ee-u,C=F}else w=te+m.start*ee-_,y=te+(m.end+1)*ee-_,F=te+v.start*ee-u,C=te+(v.end+1)*ee-u;const T=Math.min(w,F);Math.max(y,C)<0||T>p||this.drawConnectorShape(w,y,F,C,d.type)}getBlockDisplayPositions(d,s,_){let u=-1,p=-1;for(let m=s.startIndex;m<=s.endIndex;m++){const v=_?d[m].left:d[m].right;v.kind!==k.Blank&&v.lineNo>0&&((u===-1||v.lineNo<u)&&(u=v.lineNo),(p===-1||v.lineNo>p)&&(p=v.lineNo))}if(u===-1){const m=this.getInsertionLineNo(d,s.startIndex,_);return{start:m-1,end:m-1}}return{start:u-1,end:p-1}}getInsertionLineNo(d,s,_){for(let u=s-1;u>=0;u--){const p=_?d[u].left:d[u].right;if(p.kind!==k.Blank&&p.lineNo>0)return p.lineNo+1}return 1}drawConnectorShape(d,s,_,u,p){const m=this.getConnectorColor(p),v=se*.4,w=se*.6,y=this.createSvgPath(`M 0,${d} C ${v},${d} ${w},${_} ${se},${_} L ${se},${u} C ${w},${u} ${v},${s} 0,${s} Z`,{fill:m,opacity:"0.3"}),F=this.createSvgPath(`M 0,${d} C ${v},${d} ${w},${_} ${se},${_}`,{stroke:m,"stroke-width":"2",fill:"none",opacity:"0.8"}),C=this.createSvgPath(`M 0,${s} C ${v},${s} ${w},${u} ${se},${u}`,{stroke:m,"stroke-width":"2",fill:"none",opacity:"0.8"});this.el.connectorSvg.appendChild(y),this.el.connectorSvg.appendChild(F),this.el.connectorSvg.appendChild(C)}getConnectorColor(d){const s=getComputedStyle(document.documentElement);switch(d){case"added":return s.getPropertyValue("--color-connector-added").trim();case"removed":return s.getPropertyValue("--color-connector-removed").trim();default:return s.getPropertyValue("--color-connector-modified").trim()}}createSvgPath(d,s){const _=document.createElementNS("http://www.w3.org/2000/svg","path");_.setAttribute("d",d);for(const[u,p]of Object.entries(s))_.setAttribute(u,p);return _}}Ai().then(()=>new Oi);const Di=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));
