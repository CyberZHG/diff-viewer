(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))d(u);new MutationObserver(u=>{for(const g of u)if(g.type==="childList")for(const p of g.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&d(p)}).observe(document,{childList:!0,subtree:!0});function i(u){const g={};return u.integrity&&(g.integrity=u.integrity),u.referrerPolicy&&(g.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?g.credentials="include":u.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function d(u){if(u.ep)return;u.ep=!0;const g=i(u);fetch(u.href,g)}})();const Qi="modulepreload",eo=function(a){return"/diff-viewer/"+a},br={},to=function(o,i,d){let u=Promise.resolve();if(i&&i.length>0){let m=function(b){return Promise.all(b.map(T=>Promise.resolve(T).then(w=>({status:"fulfilled",value:w}),w=>({status:"rejected",reason:w}))))};document.getElementsByTagName("link");const p=document.querySelector("meta[property=csp-nonce]"),v=p?.nonce||p?.getAttribute("nonce");u=m(i.map(b=>{if(b=eo(b),b in br)return;br[b]=!0;const T=b.endsWith(".css"),w=T?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${b}"]${w}`))return;const F=document.createElement("link");if(F.rel=T?"stylesheet":Qi,T||(F.as="script"),F.crossOrigin="",F.href=b,v&&F.setAttribute("nonce",v),document.head.appendChild(F),T)return new Promise(($,R)=>{F.addEventListener("load",$),F.addEventListener("error",()=>R(new Error(`Unable to preload CSS for ${b}`)))})}))}function g(p){const v=new Event("vite:preloadError",{cancelable:!0});if(v.payload=p,window.dispatchEvent(v),!v.defaultPrevented)throw p}return u.then(p=>{for(const v of p||[])v.status==="rejected"&&g(v.reason);return o().catch(g)})};async function ro(a={}){var o;(function(){function e(h){h=h.split("-")[0];for(var _=h.split(".").slice(0,3);_.length<3;)_.push("00");return _=_.map((S,E,C)=>S.padStart(2,"0")),_.join("")}var t=h=>[h/1e4|0,(h/100|0)%100,h%100].join("."),r=2147483647,n=typeof process<"u"&&process.versions?.node?e(process.versions.node):r;if(n<16e4)throw new Error(`This emscripten-generated code requires node v${t(16e4)} (detected v${t(n)})`);var s=typeof navigator<"u"&&navigator.userAgent;if(s){var l=s.includes("Safari/")&&!s.includes("Chrome/")&&s.match(/Version\/(\d+\.?\d*\.?\d*)/)?e(s.match(/Version\/(\d+\.?\d*\.?\d*)/)[1]):r;if(l<15e4)throw new Error(`This emscripten-generated code requires Safari v${t(15e4)} (detected v${l})`);var c=s.match(/Firefox\/(\d+(?:\.\d+)?)/)?parseFloat(s.match(/Firefox\/(\d+(?:\.\d+)?)/)[1]):r;if(c<79)throw new Error(`This emscripten-generated code requires Firefox v79 (detected v${c})`);var f=s.match(/Chrome\/(\d+(?:\.\d+)?)/)?parseFloat(s.match(/Chrome\/(\d+(?:\.\d+)?)/)[1]):r;if(f<85)throw new Error(`This emscripten-generated code requires Chrome v85 (detected v${f})`)}})();var i=a,d=!!globalThis.window,u=!!globalThis.WorkerGlobalScope,g=globalThis.process?.versions?.node&&globalThis.process?.type!="renderer",p=!d&&!g&&!u;if(g){const{createRequire:e}=await to(async()=>{const{createRequire:t}=await Promise.resolve().then(()=>ko);return{createRequire:t}},void 0);var v=e(import.meta.url)}var m="./this.program",b=import.meta.url,T="";function w(e){return i.locateFile?i.locateFile(e,T):T+e}var F,$;if(g){if(!(globalThis.process?.versions?.node&&globalThis.process?.type!="renderer"))throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");var R=v("node:fs");b.startsWith("file:")&&(T=v("node:path").dirname(v("node:url").fileURLToPath(b))+"/"),$=t=>{t=we(t)?new URL(t):t;var r=R.readFileSync(t);return y(Buffer.isBuffer(r)),r},F=async(t,r=!0)=>{t=we(t)?new URL(t):t;var n=R.readFileSync(t,r?void 0:"utf8");return y(r?Buffer.isBuffer(n):typeof n=="string"),n},process.argv.length>1&&(m=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2)}else if(!p)if(d||u){try{T=new URL(".",b).href}catch{}if(!(globalThis.window||globalThis.WorkerGlobalScope))throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");u&&($=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),F=async e=>{if(we(e))return new Promise((r,n)=>{var s=new XMLHttpRequest;s.open("GET",e,!0),s.responseType="arraybuffer",s.onload=()=>{if(s.status==200||s.status==0&&s.response){r(s.response);return}n(s.status)},s.onerror=n,s.send(null)});var t=await fetch(e,{credentials:"same-origin"});if(t.ok)return t.arrayBuffer();throw new Error(t.status+" : "+t.url)}}else throw new Error("environment detection error");var J=console.log.bind(console),j=console.error.bind(console);y(!p,"shell environment detected but not enabled at build time.  Add `shell` to `-sENVIRONMENT` to enable.");var le;globalThis.WebAssembly||j("no native wasm support detected");var Se=!1;function y(e,t){e||q("Assertion failed"+(t?": "+t:""))}var we=e=>e.startsWith("file://");function Lr(){var e=ht();y((e&3)==0),e==0&&(e+=4),I[e>>2]=34821223,I[e+4>>2]=2310721022,I[0]=1668509029}function Ze(){if(!Se){var e=ht();e==0&&(e+=4);var t=I[e>>2],r=I[e+4>>2];(t!=34821223||r!=2310721022)&&q(`Stack overflow! Stack cookie has been overwritten at ${pe(e)}, expected hex dwords 0x89BACDFE and 0x2135467, but received ${pe(r)} ${pe(t)}`),I[0]!=1668509029&&q("Runtime error: The application has corrupted its heap memory area (address zero)!")}}class M extends Error{}class Qe extends M{constructor(t){super(t),this.excPtr=t;const r=rr(t);this.name=r[0],this.message=r[1]}}(()=>{var e=new Int16Array(1),t=new Int8Array(e.buffer);e[0]=25459,(t[0]!==115||t[1]!==99)&&q("Runtime error: expected the system to be little-endian! (Run with -sSUPPORT_BIG_ENDIAN to bypass)")})();function Re(e){Object.getOwnPropertyDescriptor(i,e)||Object.defineProperty(i,e,{configurable:!0,set(){q(`Attempt to set \`Module.${e}\` after it has already been processed.  This can happen, for example, when code is injected via '--post-js' rather than '--pre-js'`)}})}function V(e){return()=>y(!1,`call to '${e}' via reference taken before Wasm module initialization`)}function Rr(e){Object.getOwnPropertyDescriptor(i,e)&&q(`\`Module.${e}\` was supplied but \`${e}\` not included in INCOMING_MODULE_JS_API`)}function xr(e){return e==="FS_createPath"||e==="FS_createDataFile"||e==="FS_createPreloadedFile"||e==="FS_preloadFile"||e==="FS_unlink"||e==="addRunDependency"||e==="FS_createLazyFile"||e==="FS_createDevice"||e==="removeRunDependency"}function Mr(e){wt(e)}function wt(e){Object.getOwnPropertyDescriptor(i,e)||Object.defineProperty(i,e,{configurable:!0,get(){var t=`'${e}' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the Emscripten FAQ)`;xr(e)&&(t+=". Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you"),q(t)}})}var Et,Ft,re,Z,Ee,he,ge,I,Ct,kt,It,$t,xe=!1;function Dr(){var e=hr.buffer;re=new Int8Array(e),Ee=new Int16Array(e),Z=new Uint8Array(e),he=new Uint16Array(e),ge=new Int32Array(e),I=new Uint32Array(e),Ct=new Float32Array(e),kt=new Float64Array(e),It=new BigInt64Array(e),$t=new BigUint64Array(e)}y(globalThis.Int32Array&&globalThis.Float64Array&&Int32Array.prototype.subarray&&Int32Array.prototype.set,"JS engine does not provide full typed array support");function Wr(){if(i.preRun)for(typeof i.preRun=="function"&&(i.preRun=[i.preRun]);i.preRun.length;)Yr(i.preRun.shift());Re("preRun"),Pt(Lt)}function Or(){y(!xe),xe=!0,Ze(),Te.__wasm_call_ctors()}function Nr(){if(Ze(),i.postRun)for(typeof i.postRun=="function"&&(i.postRun=[i.postRun]);i.postRun.length;)qr(i.postRun.shift());Re("postRun"),Pt(At)}function q(e){i.onAbort?.(e),e="Aborted("+e+")",j(e),Se=!0;var t=new WebAssembly.RuntimeError(e);throw Ft?.(t),t}var K={error(){q("Filesystem support (FS) was not included. The problem is that you are using files from JS, but files were not used from C/C++, so filesystem support was not auto-included. You can force-include filesystem support with -sFORCE_FILESYSTEM")},init(){K.error()},createDataFile(){K.error()},createPreloadedFile(){K.error()},createLazyFile(){K.error()},open(){K.error()},mkdev(){K.error()},registerDevice(){K.error()},analyzePath(){K.error()},ErrnoError(){K.error()}};function Q(e,t){return(...r)=>{y(xe,`native function \`${e}\` called before runtime initialization`);var n=Te[e];return y(n,`exported native function \`${e}\` not found`),y(r.length<=t,`native function \`${e}\` called with ${r.length} args but expects ${t}`),n(...r)}}var et;function Ur(){return i.locateFile?w("DiffViewWASM.wasm"):new URL("/diff-viewer/assets/DiffViewWASM-USCNajdT.wasm",import.meta.url).href}function Br(e){if(e==et&&le)return new Uint8Array(le);if($)return $(e);throw"both async and sync fetching of the wasm failed"}async function Hr(e){if(!le)try{var t=await F(e);return new Uint8Array(t)}catch{}return Br(e)}async function Vr(e,t){try{var r=await Hr(e),n=await WebAssembly.instantiate(r,t);return n}catch(s){j(`failed to asynchronously prepare wasm: ${s}`),we(e)&&j(`warning: Loading from a file URI (${e}) is not supported in most browsers. See https://emscripten.org/docs/getting_started/FAQ.html#how-do-i-run-a-local-webserver-for-testing-why-does-my-program-stall-in-downloading-or-preparing`),q(s)}}async function jr(e,t,r){if(!e&&!we(t)&&!g)try{var n=fetch(t,{credentials:"same-origin"}),s=await WebAssembly.instantiateStreaming(n,r);return s}catch(l){j(`wasm streaming compile failed: ${l}`),j("falling back to ArrayBuffer instantiation")}return Vr(t,r)}function zr(){var e={env:gr,wasi_snapshot_preview1:gr};return e}async function Gr(){function e(c,f){return Te=c.exports,Fi(Te),Dr(),Te}var t=i;function r(c){return y(i===t,"the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?"),t=null,e(c.instance)}var n=zr();if(i.instantiateWasm)return new Promise((c,f)=>{try{i.instantiateWasm(n,(h,_)=>{c(e(h,_))})}catch(h){j(`Module.instantiateWasm callback failed with error: ${h}`),f(h)}});et??=Ur();var s=await jr(le,et,n),l=r(s);return l}var Pt=e=>{for(;e.length>0;)e.shift()(i)},At=[],qr=e=>At.push(e),Lt=[],Yr=e=>Lt.push(e),pe=e=>(y(typeof e=="number",`ptrToString expects a number, got ${typeof e}`),e>>>=0,"0x"+e.toString(16).padStart(8,"0")),D=e=>ar(e),W=()=>lr(),Fe=e=>{Fe.shown||={},Fe.shown[e]||(Fe.shown[e]=1,g&&(e="warning: "+e),j(e))},Rt=globalThis.TextDecoder&&new TextDecoder,xt=(e,t,r,n)=>{var s=t+r;if(n)return s;for(;e[t]&&!(t>=s);)++t;return t},Mt=(e,t=0,r,n)=>{var s=xt(e,t,r,n);if(s-t>16&&e.buffer&&Rt)return Rt.decode(e.subarray(t,s));for(var l="";t<s;){var c=e[t++];if(!(c&128)){l+=String.fromCharCode(c);continue}var f=e[t++]&63;if((c&224)==192){l+=String.fromCharCode((c&31)<<6|f);continue}var h=e[t++]&63;if((c&240)==224?c=(c&15)<<12|f<<6|h:((c&248)!=240&&Fe("Invalid UTF-8 leading byte "+pe(c)+" encountered when deserializing a UTF-8 string in wasm memory to a JS string!"),c=(c&7)<<18|f<<12|h<<6|e[t++]&63),c<65536)l+=String.fromCharCode(c);else{var _=c-65536;l+=String.fromCharCode(55296|_>>10,56320|_&1023)}}return l},ve=(e,t,r)=>(y(typeof e=="number",`UTF8ToString expects a number (got ${typeof e})`),e?Mt(Z,e,t,r):""),Jr=(e,t,r,n)=>q(`Assertion failed: ${ve(e)}, at: `+[t?ve(t):"unknown filename",r,n?ve(n):"unknown function"]),Kr=e=>{var t=new tt(e);return t.get_caught()||t.set_caught(!0),t.set_rethrown(!1),fr(e)},me=0;class tt{constructor(t){this.excPtr=t,this.ptr=t-24}set_type(t){I[this.ptr+4>>2]=t}get_type(){return I[this.ptr+4>>2]}set_destructor(t){I[this.ptr+8>>2]=t}get_destructor(){return I[this.ptr+8>>2]}set_caught(t){t=t?1:0,re[this.ptr+12]=t}get_caught(){return re[this.ptr+12]!=0}set_rethrown(t){t=t?1:0,re[this.ptr+13]=t}get_rethrown(){return re[this.ptr+13]!=0}init(t,r){this.set_adjusted_ptr(0),this.set_type(t),this.set_destructor(r)}set_adjusted_ptr(t){I[this.ptr+16>>2]=t}get_adjusted_ptr(){return I[this.ptr+16>>2]}}var Me=e=>ir(e),Dt=e=>{var t=me?.excPtr;if(!t)return Me(0),0;var r=new tt(t);r.set_adjusted_ptr(t);var n=r.get_type();if(!n)return Me(0),t;for(var s of e){if(s===0||s===n)break;var l=r.ptr+16;if(ur(s,n,l))return Me(s),t}return Me(n),t},Xr=()=>Dt([]),Zr=e=>Dt([e]),Qr=(e,t,r)=>{var n=new tt(e);throw n.init(t,r),gt(e),me=new Qe(e),me},en=e=>{throw me||(me=new Qe(e)),me},tn=()=>q("native code called abort()"),De={},rt=e=>{for(;e.length;){var t=e.pop(),r=e.pop();r(t)}};function Ce(e){return this.fromWireType(I[e>>2])}var _e={},ce={},We={},rn=class extends Error{constructor(t){super(t),this.name="InternalError"}},Oe=e=>{throw new rn(e)},oe=(e,t,r)=>{e.forEach(f=>We[f]=t);function n(f){var h=r(f);h.length!==e.length&&Oe("Mismatched type converter count");for(var _=0;_<e.length;++_)Y(e[_],h[_])}var s=new Array(t.length),l=[],c=0;for(let[f,h]of t.entries())ce.hasOwnProperty(h)?s[f]=ce[h]:(l.push(h),_e.hasOwnProperty(h)||(_e[h]=[]),_e[h].push(()=>{s[f]=ce[h],++c,c===l.length&&n(s)}));l.length===0&&n(s)},nn=e=>{var t=De[e];delete De[e];var r=t.rawConstructor,n=t.rawDestructor,s=t.fields,l=s.map(c=>c.getterReturnType).concat(s.map(c=>c.setterArgumentType));oe([e],l,c=>{var f={};for(var[h,_]of s.entries()){const S=c[h],E=_.getter,C=_.getterContext,k=c[h+s.length],L=_.setter,x=_.setterContext;f[_.fieldName]={read:z=>S.fromWireType(E(C,z)),write:(z,G)=>{var ae=[];L(x,z,k.toWireType(ae,G)),rt(ae)},optional:S.optional}}return[{name:t.name,fromWireType:S=>{var E={};for(var C in f)E[C]=f[C].read(S);return n(S),E},toWireType:(S,E)=>{for(var C in f)if(!(C in E)&&!f[C].optional)throw new TypeError(`Missing field: "${C}"`);var k=r();for(C in f)f[C].write(k,E[C]);return S!==null&&S.push(n,k),k},readValueFromPointer:Ce,destructorFunction:n}]})},U=e=>{for(var t="";;){var r=Z[e++];if(!r)return t;t+=String.fromCharCode(r)}},ke=class extends Error{constructor(t){super(t),this.name="BindingError"}},P=e=>{throw new ke(e)};function on(e,t,r={}){var n=t.name;if(e||P(`type "${n}" must have a positive integer typeid pointer`),ce.hasOwnProperty(e)){if(r.ignoreDuplicateRegistrations)return;P(`Cannot register type '${n}' twice`)}if(ce[e]=t,delete We[e],_e.hasOwnProperty(e)){var s=_e[e];delete _e[e],s.forEach(l=>l())}}function Y(e,t,r={}){return on(e,t,r)}var Wt=(e,t,r)=>{switch(t){case 1:return r?n=>re[n]:n=>Z[n];case 2:return r?n=>Ee[n>>1]:n=>he[n>>1];case 4:return r?n=>ge[n>>2]:n=>I[n>>2];case 8:return r?n=>It[n>>3]:n=>$t[n>>3];default:throw new TypeError(`invalid integer width (${t}): ${e}`)}},de=e=>{if(e===null)return"null";var t=typeof e;return t==="object"||t==="array"||t==="function"?e.toString():""+e},Ot=(e,t,r,n)=>{if(t<r||t>n)throw new TypeError(`Passing a number "${de(t)}" from JS side to C/C++ side to an argument of type "${e}", which is outside the valid range [${r}, ${n}]!`)},an=(e,t,r,n,s)=>{t=U(t);const l=n===0n;let c=f=>f;if(l){const f=r*8;c=h=>BigInt.asUintN(f,h),s=c(s)}Y(e,{name:t,fromWireType:c,toWireType:(f,h)=>{if(typeof h=="number")h=BigInt(h);else if(typeof h!="bigint")throw new TypeError(`Cannot convert "${de(h)}" to ${this.name}`);return Ot(t,h,n,s),h},readValueFromPointer:Wt(t,r,!l),destructorFunction:null})},sn=(e,t,r,n)=>{t=U(t),Y(e,{name:t,fromWireType:function(s){return!!s},toWireType:function(s,l){return l?r:n},readValueFromPointer:function(s){return this.fromWireType(Z[s])},destructorFunction:null})},ln=e=>({count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType}),nt=e=>{function t(r){return r.$$.ptrType.registeredClass.name}P(t(e)+" instance already deleted")},it=!1,Nt=e=>{},cn=e=>{e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)},Ut=e=>{e.count.value-=1;var t=e.count.value===0;t&&cn(e)},Bt=(e,t,r)=>{if(t===r)return e;if(r.baseClass===void 0)return null;var n=Bt(e,t,r.baseClass);return n===null?null:r.downcast(n)},Ht={},dn={},un=(e,t)=>{for(t===void 0&&P("ptr should not be undefined");e.baseClass;)t=e.upcast(t),e=e.baseClass;return t},fn=(e,t)=>(t=un(e,t),dn[t]),Ne=(e,t)=>{(!t.ptrType||!t.ptr)&&Oe("makeClassHandle requires ptr and ptrType");var r=!!t.smartPtrType,n=!!t.smartPtr;return r!==n&&Oe("Both smartPtrType and smartPtr must be specified"),t.count={value:1},Ie(Object.create(e,{$$:{value:t,writable:!0}}))};function Vt(e){var t=this.getPointee(e);if(!t)return this.destructor(e),null;var r=fn(this.registeredClass,t);if(r!==void 0){if(r.$$.count.value===0)return r.$$.ptr=t,r.$$.smartPtr=e,r.clone();var n=r.clone();return this.destructor(e),n}function s(){return this.isSmartPointer?Ne(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:t,smartPtrType:this,smartPtr:e}):Ne(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var l=this.registeredClass.getActualType(t),c=Ht[l];if(!c)return s.call(this);var f;this.isConst?f=c.constPointerType:f=c.pointerType;var h=Bt(t,this.registeredClass,f.registeredClass);return h===null?s.call(this):this.isSmartPointer?Ne(f.registeredClass.instancePrototype,{ptrType:f,ptr:h,smartPtrType:this,smartPtr:e}):Ne(f.registeredClass.instancePrototype,{ptrType:f,ptr:h})}var Ie=e=>globalThis.FinalizationRegistry?(it=new FinalizationRegistry(t=>{console.warn(t.leakWarning),Ut(t.$$)}),Ie=t=>{var r=t.$$,n=!!r.smartPtr;if(n){var s={$$:r},l=r.ptrType.registeredClass,c=new Error(`Embind found a leaked C++ instance ${l.name} <${pe(r.ptr)}>.
We'll free it automatically in this case, but this functionality is not reliable across various environments.
Make sure to invoke .delete() manually once you're done with the instance instead.
Originally allocated`);"captureStackTrace"in Error&&Error.captureStackTrace(c,Vt),s.leakWarning=c.stack.replace(/^Error: /,""),it.register(t,s,t)}return t},Nt=t=>it.unregister(t),Ie(e)):(Ie=t=>t,e),hn=()=>{let e=Ue.prototype;Object.assign(e,{isAliasOf(r){if(!(this instanceof Ue)||!(r instanceof Ue))return!1;var n=this.$$.ptrType.registeredClass,s=this.$$.ptr;r.$$=r.$$;for(var l=r.$$.ptrType.registeredClass,c=r.$$.ptr;n.baseClass;)s=n.upcast(s),n=n.baseClass;for(;l.baseClass;)c=l.upcast(c),l=l.baseClass;return n===l&&s===c},clone(){if(this.$$.ptr||nt(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var r=Ie(Object.create(Object.getPrototypeOf(this),{$$:{value:ln(this.$$)}}));return r.$$.count.value+=1,r.$$.deleteScheduled=!1,r},delete(){this.$$.ptr||nt(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&P("Object already scheduled for deletion"),Nt(this),Ut(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted(){return!this.$$.ptr},deleteLater(){return this.$$.ptr||nt(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&P("Object already scheduled for deletion"),this.$$.deleteScheduled=!0,this}});const t=Symbol.dispose;t&&(e[t]=e.delete)};function Ue(){}var Be=(e,t)=>Object.defineProperty(t,"name",{value:e}),jt=(e,t,r)=>{if(e[t].overloadTable===void 0){var n=e[t];e[t]=function(...s){return e[t].overloadTable.hasOwnProperty(s.length)||P(`Function '${r}' called with an invalid number of arguments (${s.length}) - expects one of (${e[t].overloadTable})!`),e[t].overloadTable[s.length].apply(this,s)},e[t].overloadTable=[],e[t].overloadTable[n.argCount]=n}},$e=(e,t,r)=>{i.hasOwnProperty(e)?((r===void 0||i[e].overloadTable!==void 0&&i[e].overloadTable[r]!==void 0)&&P(`Cannot register public name '${e}' twice`),jt(i,e,e),i[e].overloadTable.hasOwnProperty(r)&&P(`Cannot register multiple overloads of a function with the same number of arguments (${r})!`),i[e].overloadTable[r]=t):(i[e]=t,i[e].argCount=r)},gn=48,pn=57,vn=e=>{y(typeof e=="string"),e=e.replace(/[^a-zA-Z0-9_]/g,"$");var t=e.charCodeAt(0);return t>=gn&&t<=pn?`_${e}`:e};function mn(e,t,r,n,s,l,c,f){this.name=e,this.constructor=t,this.instancePrototype=r,this.rawDestructor=n,this.baseClass=s,this.getActualType=l,this.upcast=c,this.downcast=f,this.pureVirtualFunctions=[]}var ot=(e,t,r)=>{for(;t!==r;)t.upcast||P(`Expected null or instance of ${r.name}, got an instance of ${t.name}`),e=t.upcast(e),t=t.baseClass;return e};function _n(e,t){if(t===null)return this.isReference&&P(`null is not a valid ${this.name}`),0;t.$$||P(`Cannot pass "${de(t)}" as a ${this.name}`),t.$$.ptr||P(`Cannot pass deleted object as a pointer of type ${this.name}`);var r=t.$$.ptrType.registeredClass,n=ot(t.$$.ptr,r,this.registeredClass);return n}function bn(e,t){var r;if(t===null)return this.isReference&&P(`null is not a valid ${this.name}`),this.isSmartPointer?(r=this.rawConstructor(),e!==null&&e.push(this.rawDestructor,r),r):0;(!t||!t.$$)&&P(`Cannot pass "${de(t)}" as a ${this.name}`),t.$$.ptr||P(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&t.$$.ptrType.isConst&&P(`Cannot convert argument of type ${t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name} to parameter type ${this.name}`);var n=t.$$.ptrType.registeredClass;if(r=ot(t.$$.ptr,n,this.registeredClass),this.isSmartPointer)switch(t.$$.smartPtr===void 0&&P("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:t.$$.smartPtrType===this?r=t.$$.smartPtr:P(`Cannot convert argument of type ${t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:r=t.$$.smartPtr;break;case 2:if(t.$$.smartPtrType===this)r=t.$$.smartPtr;else{var s=t.clone();r=this.rawShare(r,be.toHandle(()=>s.delete())),e!==null&&e.push(this.rawDestructor,r)}break;default:P("Unsupported sharing policy")}return r}function yn(e,t){if(t===null)return this.isReference&&P(`null is not a valid ${this.name}`),0;t.$$||P(`Cannot pass "${de(t)}" as a ${this.name}`),t.$$.ptr||P(`Cannot pass deleted object as a pointer of type ${this.name}`),t.$$.ptrType.isConst&&P(`Cannot convert argument of type ${t.$$.ptrType.name} to parameter type ${this.name}`);var r=t.$$.ptrType.registeredClass,n=ot(t.$$.ptr,r,this.registeredClass);return n}var Tn=()=>{Object.assign(He.prototype,{getPointee(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e},destructor(e){this.rawDestructor?.(e)},readValueFromPointer:Ce,fromWireType:Vt})};function He(e,t,r,n,s,l,c,f,h,_,S){this.name=e,this.registeredClass=t,this.isReference=r,this.isConst=n,this.isSmartPointer=s,this.pointeeType=l,this.sharingPolicy=c,this.rawGetPointee=f,this.rawConstructor=h,this.rawShare=_,this.rawDestructor=S,!s&&t.baseClass===void 0?n?(this.toWireType=_n,this.destructorFunction=null):(this.toWireType=yn,this.destructorFunction=null):this.toWireType=bn}var zt=(e,t,r)=>{i.hasOwnProperty(e)||Oe("Replacing nonexistent public symbol"),i[e].overloadTable!==void 0&&r!==void 0?i[e].overloadTable[r]=t:(i[e]=t,i[e].argCount=r)},Gt=[],O=e=>{var t=Gt[e];return t||(Gt[e]=t=pt.get(e)),y(pt.get(e)==t,"JavaScript-side Wasm function table mirror is out of date!"),t},X=(e,t,r=!1)=>{y(!r,"Async bindings are only supported with JSPI."),e=U(e);function n(){var l=O(t);return l}var s=n();return typeof s!="function"&&P(`unknown function pointer with signature ${e}: ${t}`),s};class Sn extends Error{}var qt=e=>{var t=nr(e),r=U(t);return ee(t),r},Ve=(e,t)=>{var r=[],n={};function s(l){if(!n[l]&&!ce[l]){if(We[l]){We[l].forEach(s);return}r.push(l),n[l]=!0}}throw t.forEach(s),new Sn(`${e}: `+r.map(qt).join([", "]))},wn=(e,t,r,n,s,l,c,f,h,_,S,E,C)=>{S=U(S),l=X(s,l),f&&=X(c,f),_&&=X(h,_),C=X(E,C);var k=vn(S);$e(k,function(){Ve(`Cannot construct ${S} due to unbound types`,[n])}),oe([e,t,r],n?[n]:[],L=>{L=L[0];var x,z;n?(x=L.registeredClass,z=x.instancePrototype):z=Ue.prototype;var G=Be(S,function(...vt){if(Object.getPrototypeOf(this)!==ae)throw new ke(`Use 'new' to construct ${S}`);if(te.constructor_body===void 0)throw new ke(`${S} has no accessible constructor`);var _r=te.constructor_body[vt.length];if(_r===void 0)throw new ke(`Tried to invoke ctor of ${S} with invalid number of parameters (${vt.length}) - expected (${Object.keys(te.constructor_body).toString()}) parameters instead!`);return _r.apply(this,vt)}),ae=Object.create(z,{constructor:{value:G}});G.prototype=ae;var te=new mn(S,G,ae,C,x,l,f,_);te.baseClass&&(te.baseClass.__derivedClasses??=[],te.baseClass.__derivedClasses.push(te));var Zi=new He(S,te,!0,!1,!1),vr=new He(S+"*",te,!1,!1,!1),mr=new He(S+" const*",te,!1,!0,!1);return Ht[e]={pointerType:vr,constPointerType:mr},zt(k,G),[Zi,vr,mr]})},at=(e,t)=>{for(var r=[],n=0;n<e;n++)r.push(I[t+n*4>>2]);return r};function Yt(e){for(var t=1;t<e.length;++t)if(e[t]!==null&&e[t].destructorFunction===void 0)return!0;return!1}function En(e,t,r,n,s){if(e<t||e>r){var l=t==r?t:`${t} to ${r}`;s(`function ${n} called with ${e} arguments, expected ${l}`)}}function Fn(e,t,r,n){var s=Yt(e),l=e.length-2,c=[],f=["fn"];t&&f.push("thisWired");for(var h=0;h<l;++h)c.push(`arg${h}`),f.push(`arg${h}Wired`);c=c.join(","),f=f.join(",");var _=`return function (${c}) {
`;_+=`checkArgCount(arguments.length, minArgs, maxArgs, humanName, throwBindingError);
`,s&&(_+=`var destructors = [];
`);var S=s?"destructors":"null",E=["humanName","throwBindingError","invoker","fn","runDestructors","fromRetWire","toClassParamWire"];t&&(_+=`var thisWired = toClassParamWire(${S}, this);
`);for(var h=0;h<l;++h){var C=`toArg${h}Wire`;_+=`var arg${h}Wired = ${C}(${S}, arg${h});
`,E.push(C)}if(_+=(r||n?"var rv = ":"")+`invoker(${f});
`,s)_+=`runDestructors(destructors);
`;else for(var h=t?1:2;h<e.length;++h){var k=h===1?"thisWired":"arg"+(h-2)+"Wired";e[h].destructorFunction!==null&&(_+=`${k}_dtor(${k});
`,E.push(`${k}_dtor`))}return r&&(_+=`var ret = fromRetWire(rv);
return ret;
`),_+=`}
`,E.push("checkArgCount","minArgs","maxArgs"),_=`if (arguments.length !== ${E.length}){ throw new Error(humanName + "Expected ${E.length} closure arguments " + arguments.length + " given."); }
${_}`,new Function(E,_)}function Cn(e){for(var t=e.length-2,r=e.length-1;r>=2&&e[r].optional;--r)t--;return t}function st(e,t,r,n,s,l){var c=t.length;c<2&&P("argTypes array size mismatch! Must at least get return value and 'this' types!"),y(!l,"Async bindings are only supported with JSPI.");for(var f=t[1]!==null&&r!==null,h=Yt(t),_=!t[0].isVoid,S=c-2,E=Cn(t),C=t[0],k=t[1],L=[e,P,n,s,rt,C.fromWireType.bind(C),k?.toWireType.bind(k)],x=2;x<c;++x){var z=t[x];L.push(z.toWireType.bind(z))}if(!h)for(var x=f?1:2;x<t.length;++x)t[x].destructorFunction!==null&&L.push(t[x].destructorFunction);L.push(En,E,S);var ae=Fn(t,f,_,l)(...L);return Be(e,ae)}var kn=(e,t,r,n,s,l)=>{y(t>0);var c=at(t,r);s=X(n,s),oe([],[e],f=>{f=f[0];var h=`constructor ${f.name}`;if(f.registeredClass.constructor_body===void 0&&(f.registeredClass.constructor_body=[]),f.registeredClass.constructor_body[t-1]!==void 0)throw new ke(`Cannot register multiple constructors with identical number of parameters (${t-1}) for class '${f.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return f.registeredClass.constructor_body[t-1]=()=>{Ve(`Cannot construct ${f.name} due to unbound types`,c)},oe([],c,_=>(_.splice(1,0,null),f.registeredClass.constructor_body[t-1]=st(h,_,null,s,l),[])),[]})},Jt=e=>{e=e.trim();const t=e.indexOf("(");return t===-1?e:(y(e.endsWith(")"),"Parentheses for argument names should match."),e.slice(0,t))},In=(e,t,r,n,s,l,c,f,h,_)=>{var S=at(r,n);t=U(t),t=Jt(t),l=X(s,l,h),oe([],[e],E=>{E=E[0];var C=`${E.name}.${t}`;t.startsWith("@@")&&(t=Symbol[t.substring(2)]),f&&E.registeredClass.pureVirtualFunctions.push(t);function k(){Ve(`Cannot call ${C} due to unbound types`,S)}var L=E.registeredClass.instancePrototype,x=L[t];return x===void 0||x.overloadTable===void 0&&x.className!==E.name&&x.argCount===r-2?(k.argCount=r-2,k.className=E.name,L[t]=k):(jt(L,t,C),L[t].overloadTable[r-2]=k),oe([],S,z=>{var G=st(C,z,E,l,c,h);return L[t].overloadTable===void 0?(G.argCount=r-2,L[t]=G):L[t].overloadTable[r-2]=G,[]}),[]})},Kt=[],ne=[0,1,,1,null,1,!0,1,!1,1],Xt=e=>{e>9&&--ne[e+1]===0&&(y(ne[e]!==void 0,"Decref for unallocated handle."),ne[e]=void 0,Kt.push(e))},be={toValue:e=>(e||P(`Cannot use deleted val. handle = ${e}`),y(e===2||ne[e]!==void 0&&e%2===0,`invalid handle: ${e}`),ne[e]),toHandle:e=>{switch(e){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:{const t=Kt.pop()||ne.length;return ne[t]=e,ne[t+1]=1,t}}}},Zt={name:"emscripten::val",fromWireType:e=>{var t=be.toValue(e);return Xt(e),t},toWireType:(e,t)=>be.toHandle(t),readValueFromPointer:Ce,destructorFunction:null},$n=e=>Y(e,Zt),lt=(e,t,r)=>{switch(t){case 1:return r?function(n){return this.fromWireType(re[n])}:function(n){return this.fromWireType(Z[n])};case 2:return r?function(n){return this.fromWireType(Ee[n>>1])}:function(n){return this.fromWireType(he[n>>1])};case 4:return r?function(n){return this.fromWireType(ge[n>>2])}:function(n){return this.fromWireType(I[n>>2])};default:throw new TypeError(`invalid integer width (${t}): ${e}`)}};function Pn(e){return e===0?"object":e===1?"number":"string"}var An=(e,t,r,n,s)=>{t=U(t);const l=Pn(s);switch(l){case"object":{let _=function(){};_.values={},Y(e,{name:t,constructor:_,valueType:l,fromWireType:function(S){return this.constructor.values[S]},toWireType:(S,E)=>E.value,readValueFromPointer:lt(t,r,n),destructorFunction:null}),$e(t,_);break}case"number":{var c={};Y(e,{name:t,keysMap:c,valueType:l,fromWireType:_=>_,toWireType:(_,S)=>S,readValueFromPointer:lt(t,r,n),destructorFunction:null}),$e(t,c),delete i[t].argCount;break}case"string":{var f={},h={},c={};Y(e,{name:t,valuesMap:f,reverseMap:h,keysMap:c,valueType:l,fromWireType:function(S){return this.reverseMap[S]},toWireType:function(S,E){return this.valuesMap[E]},readValueFromPointer:lt(t,r,n),destructorFunction:null}),$e(t,c),delete i[t].argCount;break}}},Qt=(e,t)=>{var r=ce[e];return r===void 0&&P(`${t} has unknown type ${qt(e)}`),r},Ln=(e,t,r)=>{var n=Qt(e,"enum");switch(t=U(t),n.valueType){case"object":{var s=n.constructor,l=Object.create(n.constructor.prototype,{value:{value:r},constructor:{value:Be(`${n.name}_${t}`,function(){})}});s.values[r]=l,s[t]=l;break}case"number":{n.keysMap[t]=r;break}case"string":{n.valuesMap[t]=r,n.reverseMap[r]=t,n.keysMap[t]=t;break}}},Rn=(e,t)=>{switch(t){case 4:return function(r){return this.fromWireType(Ct[r>>2])};case 8:return function(r){return this.fromWireType(kt[r>>3])};default:throw new TypeError(`invalid float width (${t}): ${e}`)}},xn=(e,t,r)=>{t=U(t),Y(e,{name:t,fromWireType:n=>n,toWireType:(n,s)=>{if(typeof s!="number"&&typeof s!="boolean")throw new TypeError(`Cannot convert ${de(s)} to ${this.name}`);return s},readValueFromPointer:Rn(t,r),destructorFunction:null})},Mn=(e,t,r,n,s,l,c,f)=>{var h=at(t,r);e=U(e),e=Jt(e),s=X(n,s,c),$e(e,function(){Ve(`Cannot call ${e} due to unbound types`,h)},t-1),oe([],h,_=>{var S=[_[0],null].concat(_.slice(1));return zt(e,st(e,S,null,s,l,c),t-1),[]})},Dn=(e,t,r,n,s)=>{t=U(t);const l=n===0;let c=h=>h;if(l){var f=32-8*r;c=h=>h<<f>>>f,s=c(s)}Y(e,{name:t,fromWireType:c,toWireType:(h,_)=>{if(typeof _!="number"&&typeof _!="boolean")throw new TypeError(`Cannot convert "${de(_)}" to ${t}`);return Ot(t,_,n,s),_},readValueFromPointer:Wt(t,r,n!==0),destructorFunction:null})},Wn=(e,t,r)=>{const n=(s,l)=>{let c=0;return{next(){if(c>=s)return{done:!0};const f=c;return c++,{value:l(f),done:!1}},[Symbol.iterator](){return this}}};e[Symbol.iterator]||(e[Symbol.iterator]=function(){const s=this[t]();return n(s,l=>this[r](l))})},On=(e,t,r,n)=>{r=U(r),n=U(n),oe([],[e,t],s=>{const l=s[0];return Wn(l.registeredClass.instancePrototype,r,n),[]})},Nn=(e,t,r)=>{var n=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array],s=n[t];function l(c){var f=I[c>>2],h=I[c+4>>2];return new s(re.buffer,h,f)}r=U(r),Y(e,{name:r,fromWireType:l,readValueFromPointer:l},{ignoreDuplicateRegistrations:!0})},Un=Object.assign({optional:!0},Zt),Bn=(e,t)=>{Y(e,Un)},Hn=(e,t,r,n)=>{if(y(typeof e=="string",`stringToUTF8Array expects a string (got ${typeof e})`),!(n>0))return 0;for(var s=r,l=r+n-1,c=0;c<e.length;++c){var f=e.codePointAt(c);if(f<=127){if(r>=l)break;t[r++]=f}else if(f<=2047){if(r+1>=l)break;t[r++]=192|f>>6,t[r++]=128|f&63}else if(f<=65535){if(r+2>=l)break;t[r++]=224|f>>12,t[r++]=128|f>>6&63,t[r++]=128|f&63}else{if(r+3>=l)break;f>1114111&&Fe("Invalid Unicode code point "+pe(f)+" encountered when serializing a JS string to a UTF-8 string in wasm memory! (Valid unicode code points should be in range 0-0x10FFFF)."),t[r++]=240|f>>18,t[r++]=128|f>>12&63,t[r++]=128|f>>6&63,t[r++]=128|f&63,c++}}return t[r]=0,r-s},ye=(e,t,r)=>(y(typeof r=="number","stringToUTF8(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),Hn(e,Z,t,r)),je=e=>{for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);n<=127?t++:n<=2047?t+=2:n>=55296&&n<=57343?(t+=4,++r):t+=3}return t},Vn=(e,t)=>{t=U(t),Y(e,{name:t,fromWireType(r){var n=I[r>>2],s=r+4,l;return l=ve(s,n,!0),ee(r),l},toWireType(r,n){n instanceof ArrayBuffer&&(n=new Uint8Array(n));var s,l=typeof n=="string";l||ArrayBuffer.isView(n)&&n.BYTES_PER_ELEMENT==1||P("Cannot pass non-string to std::string"),l?s=je(n):s=n.length;var c=ft(4+s+1),f=c+4;return I[c>>2]=s,l?ye(n,f,s+1):Z.set(n,f),r!==null&&r.push(ee,c),c},readValueFromPointer:Ce,destructorFunction(r){ee(r)}})},er=globalThis.TextDecoder?new TextDecoder("utf-16le"):void 0,jn=(e,t,r)=>{y(e%2==0,"Pointer passed to UTF16ToString must be aligned to two bytes!");var n=e>>1,s=xt(he,n,t/2,r);if(s-n>16&&er)return er.decode(he.subarray(n,s));for(var l="",c=n;c<s;++c){var f=he[c];l+=String.fromCharCode(f)}return l},zn=(e,t,r)=>{if(y(t%2==0,"Pointer passed to stringToUTF16 must be aligned to two bytes!"),y(typeof r=="number","stringToUTF16(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),r??=2147483647,r<2)return 0;r-=2;for(var n=t,s=r<e.length*2?r/2:e.length,l=0;l<s;++l){var c=e.charCodeAt(l);Ee[t>>1]=c,t+=2}return Ee[t>>1]=0,t-n},Gn=e=>e.length*2,qn=(e,t,r)=>{y(e%4==0,"Pointer passed to UTF32ToString must be aligned to four bytes!");for(var n="",s=e>>2,l=0;!(l>=t/4);l++){var c=I[s+l];if(!c&&!r)break;n+=String.fromCodePoint(c)}return n},Yn=(e,t,r)=>{if(y(t%4==0,"Pointer passed to stringToUTF32 must be aligned to four bytes!"),y(typeof r=="number","stringToUTF32(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),r??=2147483647,r<4)return 0;for(var n=t,s=n+r-4,l=0;l<e.length;++l){var c=e.codePointAt(l);if(c>65535&&l++,ge[t>>2]=c,t+=4,t+4>s)break}return ge[t>>2]=0,t-n},Jn=e=>{for(var t=0,r=0;r<e.length;++r){var n=e.codePointAt(r);n>65535&&r++,t+=4}return t},Kn=(e,t,r)=>{r=U(r);var n,s,l;t===2?(n=jn,s=zn,l=Gn):(y(t===4,"only 2-byte and 4-byte strings are currently supported"),n=qn,s=Yn,l=Jn),Y(e,{name:r,fromWireType:c=>{var f=I[c>>2],h=n(c+4,f*t,!0);return ee(c),h},toWireType:(c,f)=>{typeof f!="string"&&P(`Cannot pass non-string to C++ string type ${r}`);var h=l(f),_=ft(4+h+t);return I[_>>2]=h/t,s(f,_+4,h+t),c!==null&&c.push(ee,_),_},readValueFromPointer:Ce,destructorFunction(c){ee(c)}})},Xn=(e,t,r,n,s,l)=>{De[e]={name:U(t),rawConstructor:X(r,n),rawDestructor:X(s,l),fields:[]}},Zn=(e,t,r,n,s,l,c,f,h,_)=>{De[e].fields.push({fieldName:U(t),getterReturnType:r,getter:X(n,s),getterContext:l,setterArgumentType:c,setter:X(f,h),setterContext:_})},Qn=(e,t)=>{t=U(t),Y(e,{isVoid:!0,name:t,fromWireType:()=>{},toWireType:(r,n)=>{}})},ct=[],ei=e=>{var t=ct.length;return ct.push(e),t},ti=(e,t)=>{for(var r=new Array(e),n=0;n<e;++n)r[n]=Qt(I[t+n*4>>2],`parameter ${n}`);return r},ri=(e,t,r)=>{var n=[],s=e(n,r);return n.length&&(I[t>>2]=be.toHandle(n)),s},ni={},ii=e=>{var t=ni[e];return t===void 0?U(e):t},oi=(e,t,r)=>{var n=8,[s,...l]=ti(e,t),c=s.toWireType.bind(s),f=l.map(k=>k.readValueFromPointer.bind(k));e--;var h={toValue:be.toValue},_=f.map((k,L)=>{var x=`argFromPtr${L}`;return h[x]=k,`${x}(args${L?"+"+L*n:""})`}),S;switch(r){case 0:S="toValue(handle)";break;case 2:S="new (toValue(handle))";break;case 3:S="";break;case 1:h.getStringOrSymbol=ii,S="toValue(handle)[getStringOrSymbol(methodName)]";break}S+=`(${_})`,s.isVoid||(h.toReturnWire=c,h.emval_returnValue=ri,S=`return emval_returnValue(toReturnWire, destructorsRef, ${S})`),S=`return function (handle, methodName, destructorsRef, args) {
${S}
}`;var E=new Function(Object.keys(h),S)(...Object.values(h)),C=`methodCaller<(${l.map(k=>k.name)}) => ${s.name}>`;return ei(Be(C,E))},ai=(e,t,r,n,s)=>ct[e](t,r,n,s),si=e=>{var t=be.toValue(e);rt(t),Xt(e)},li=(e,t,r,n)=>{var s=new Date().getFullYear(),l=new Date(s,0,1),c=new Date(s,6,1),f=l.getTimezoneOffset(),h=c.getTimezoneOffset(),_=Math.max(f,h);I[e>>2]=_*60,ge[t>>2]=+(f!=h);var S=k=>{var L=k>=0?"-":"+",x=Math.abs(k),z=String(Math.floor(x/60)).padStart(2,"0"),G=String(x%60).padStart(2,"0");return`UTC${L}${z}${G}`},E=S(f),C=S(h);y(E),y(C),y(je(E)<=16,`timezone name truncated to fit in TZNAME_MAX (${E})`),y(je(C)<=16,`timezone name truncated to fit in TZNAME_MAX (${C})`),h<f?(ye(E,r,17),ye(C,n,17)):(ye(E,n,17),ye(C,r,17))},ci=e=>{q(`Cannot enlarge memory arrays to size ${e} bytes (OOM). Either (1) compile with -sINITIAL_MEMORY=X with X higher than the current value ${re.length}, (2) compile with -sALLOW_MEMORY_GROWTH which allows increasing the size at runtime, or (3) if you want malloc to return NULL (0) instead of this abort, compile with -sABORTING_MALLOC=0`)},di=e=>{Z.length,e>>>=0,ci(e)},dt={},ui=()=>m||"./this.program",Pe=()=>{if(!Pe.strings){var e=(globalThis.navigator?.language??"C").replace("-","_")+".UTF-8",t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:e,_:ui()};for(var r in dt)dt[r]===void 0?delete t[r]:t[r]=dt[r];var n=[];for(var r in t)n.push(`${r}=${t[r]}`);Pe.strings=n}return Pe.strings},fi=(e,t)=>{var r=0,n=0;for(var s of Pe()){var l=t+r;I[e+n>>2]=l,r+=ye(s,l,1/0)+1,n+=4}return 0},hi=(e,t)=>{var r=Pe();I[e>>2]=r.length;var n=0;for(var s of r)n+=je(s)+1;return I[t>>2]=n,0},gi=e=>{q("fd_close called without SYSCALLS_REQUIRE_FILESYSTEM")};function pi(e,t,r,n){return 70}var vi=[null,[],[]],mi=(e,t)=>{var r=vi[e];y(r),t===0||t===10?((e===1?J:j)(Mt(r)),r.length=0):r.push(t)},_i=(e,t,r,n)=>{for(var s=0,l=0;l<r;l++){var c=I[t>>2],f=I[t+4>>2];t+=8;for(var h=0;h<f;h++)mi(e,Z[c+h]);s+=f}return I[n>>2]=s,0},ut=e=>e instanceof Qe?e.excPtr:e,bi=e=>gt(ut(e)),yi=e=>cr(ut(e)),tr=e=>sr(e),Ti=e=>{var t=W(),r=tr(4),n=tr(4);dr(e,r,n);var s=I[r>>2],l=I[n>>2],c=ve(s);ee(s);var f;return l&&(f=ve(l),ee(l)),D(t),[c,f]},rr=e=>Ti(ut(e));hn(),Tn(),y(ne.length===10);{if(i.noExitRuntime&&i.noExitRuntime,i.print&&(J=i.print),i.printErr&&(j=i.printErr),i.wasmBinary&&(le=i.wasmBinary),i.FS_createDataFile=K.createDataFile,i.FS_createPreloadedFile=K.createPreloadedFile,Ei(),i.arguments&&i.arguments,i.thisProgram&&(m=i.thisProgram),y(typeof i.memoryInitializerPrefixURL>"u","Module.memoryInitializerPrefixURL option was removed, use Module.locateFile instead"),y(typeof i.pthreadMainPrefixURL>"u","Module.pthreadMainPrefixURL option was removed, use Module.locateFile instead"),y(typeof i.cdInitializerPrefixURL>"u","Module.cdInitializerPrefixURL option was removed, use Module.locateFile instead"),y(typeof i.filePackagePrefixURL>"u","Module.filePackagePrefixURL option was removed, use Module.locateFile instead"),y(typeof i.read>"u","Module.read option was removed"),y(typeof i.readAsync>"u","Module.readAsync option was removed (modify readAsync in JS)"),y(typeof i.readBinary>"u","Module.readBinary option was removed (modify readBinary in JS)"),y(typeof i.setWindowTitle>"u","Module.setWindowTitle option was removed (modify emscripten_set_window_title in JS)"),y(typeof i.TOTAL_MEMORY>"u","Module.TOTAL_MEMORY has been renamed Module.INITIAL_MEMORY"),y(typeof i.ENVIRONMENT>"u","Module.ENVIRONMENT has been deprecated. To force the environment, use the ENVIRONMENT compile-time option (for example, -sENVIRONMENT=web or -sENVIRONMENT=node)"),y(typeof i.STACK_SIZE>"u","STACK_SIZE can no longer be set at runtime.  Use -sSTACK_SIZE at link time"),y(typeof i.wasmMemory>"u","Use of `wasmMemory` detected.  Use -sIMPORTED_MEMORY to define wasmMemory externally"),y(typeof i.INITIAL_MEMORY>"u","Detected runtime INITIAL_MEMORY setting.  Use -sIMPORTED_MEMORY to define wasmMemory dynamically"),i.preInit)for(typeof i.preInit=="function"&&(i.preInit=[i.preInit]);i.preInit.length>0;)i.preInit.shift()();Re("preInit")}var Si=["writeI53ToI64","writeI53ToI64Clamped","writeI53ToI64Signaling","writeI53ToU64Clamped","writeI53ToU64Signaling","readI53FromI64","readI53FromU64","convertI32PairToI53","convertI32PairToI53Checked","convertU32PairToI53","getTempRet0","zeroMemory","exitJS","getHeapMax","growMemory","withStackSave","strError","inetPton4","inetNtop4","inetPton6","inetNtop6","readSockaddr","writeSockaddr","readEmAsmArgs","jstoi_q","autoResumeAudioContext","getDynCaller","dynCall","handleException","keepRuntimeAlive","runtimeKeepalivePush","runtimeKeepalivePop","callUserCallback","maybeExit","asyncLoad","asmjsMangle","alignMemory","mmapAlloc","HandleAllocator","getUniqueRunDependency","addRunDependency","removeRunDependency","addOnInit","addOnPostCtor","addOnPreMain","addOnExit","STACK_SIZE","STACK_ALIGN","POINTER_SIZE","ASSERTIONS","ccall","cwrap","convertJsFunctionToWasm","getEmptyTableSlot","updateTableMap","getFunctionAddress","addFunction","removeFunction","intArrayFromString","intArrayToString","stringToAscii","stringToNewUTF8","stringToUTF8OnStack","writeArrayToMemory","registerKeyEventCallback","maybeCStringToJsString","findEventTarget","getBoundingClientRect","fillMouseEventData","registerMouseEventCallback","registerWheelEventCallback","registerUiEventCallback","registerFocusEventCallback","fillDeviceOrientationEventData","registerDeviceOrientationEventCallback","fillDeviceMotionEventData","registerDeviceMotionEventCallback","screenOrientation","fillOrientationChangeEventData","registerOrientationChangeEventCallback","fillFullscreenChangeEventData","registerFullscreenChangeEventCallback","JSEvents_requestFullscreen","JSEvents_resizeCanvasForFullscreen","registerRestoreOldStyle","hideEverythingExceptGivenElement","restoreHiddenElements","setLetterbox","softFullscreenResizeWebGLRenderTarget","doRequestFullscreen","fillPointerlockChangeEventData","registerPointerlockChangeEventCallback","registerPointerlockErrorEventCallback","requestPointerLock","fillVisibilityChangeEventData","registerVisibilityChangeEventCallback","registerTouchEventCallback","fillGamepadEventData","registerGamepadEventCallback","registerBeforeUnloadEventCallback","fillBatteryEventData","registerBatteryEventCallback","setCanvasElementSize","getCanvasElementSize","jsStackTrace","getCallstack","convertPCtoSourceLocation","checkWasiClock","wasiRightsToMuslOFlags","wasiOFlagsToMuslOFlags","initRandomFill","randomFill","safeSetTimeout","setImmediateWrapped","safeRequestAnimationFrame","clearImmediateWrapped","registerPostMainLoop","registerPreMainLoop","getPromise","makePromise","idsToPromises","makePromiseCallback","Browser_asyncPrepareDataCounter","isLeapYear","ydayFromDate","arraySum","addDays","getSocketFromFD","getSocketAddress","FS_createPreloadedFile","FS_preloadFile","FS_modeStringToFlags","FS_getMode","FS_stdin_getChar","FS_mkdirTree","_setNetworkCallback","heapObjectForWebGLType","toTypedArrayIndex","webgl_enable_ANGLE_instanced_arrays","webgl_enable_OES_vertex_array_object","webgl_enable_WEBGL_draw_buffers","webgl_enable_WEBGL_multi_draw","webgl_enable_EXT_polygon_offset_clamp","webgl_enable_EXT_clip_control","webgl_enable_WEBGL_polygon_mode","emscriptenWebGLGet","computeUnpackAlignedImageSize","colorChannelsInGlTextureFormat","emscriptenWebGLGetTexPixelData","emscriptenWebGLGetUniform","webglGetUniformLocation","webglPrepareUniformLocationsBeforeFirstUse","webglGetLeftBracePos","emscriptenWebGLGetVertexAttrib","__glGetActiveAttribOrUniform","writeGLArray","registerWebGlEventCallback","runAndAbortIfError","ALLOC_NORMAL","ALLOC_STACK","allocate","writeStringToMemory","writeAsciiToMemory","allocateUTF8","allocateUTF8OnStack","demangle","stackTrace","getNativeTypeSize","getFunctionArgsName","createJsInvokerSignature","PureVirtualError","registerInheritedInstance","unregisterInheritedInstance","getInheritedInstanceCount","getLiveInheritedInstances","setDelayFunction","validateThis","count_emval_handles"];Si.forEach(Mr);var wi=["run","out","err","callMain","abort","wasmExports","HEAPF32","HEAPF64","HEAP8","HEAPU8","HEAP16","HEAPU16","HEAP32","HEAPU32","HEAP64","HEAPU64","writeStackCookie","checkStackCookie","INT53_MAX","INT53_MIN","bigintToI53Checked","stackSave","stackRestore","stackAlloc","setTempRet0","createNamedFunction","ptrToString","abortOnCannotGrowMemory","ENV","ERRNO_CODES","DNS","Protocols","Sockets","timers","warnOnce","readEmAsmArgsArray","getExecutableName","wasmTable","wasmMemory","noExitRuntime","addOnPreRun","addOnPostRun","freeTableIndexes","functionsInTableMap","setValue","getValue","PATH","PATH_FS","UTF8Decoder","UTF8ArrayToString","UTF8ToString","stringToUTF8Array","stringToUTF8","lengthBytesUTF8","AsciiToString","UTF16Decoder","UTF16ToString","stringToUTF16","lengthBytesUTF16","UTF32ToString","stringToUTF32","lengthBytesUTF32","JSEvents","specialHTMLTargets","findCanvasEventTarget","currentFullscreenStrategy","restoreOldWindowedStyle","UNWIND_CACHE","ExitStatus","getEnvStrings","flush_NO_FILESYSTEM","emSetImmediate","emClearImmediate_deps","emClearImmediate","promiseMap","uncaughtExceptionCount","exceptionLast","exceptionCaught","ExceptionInfo","findMatchingCatch","getExceptionMessageCommon","exnToPtr","Browser","requestFullscreen","requestFullScreen","setCanvasSize","getUserMedia","createContext","getPreloadedImageData__data","wget","MONTH_DAYS_REGULAR","MONTH_DAYS_LEAP","MONTH_DAYS_REGULAR_CUMULATIVE","MONTH_DAYS_LEAP_CUMULATIVE","SYSCALLS","preloadPlugins","FS_stdin_getChar_buffer","FS_unlink","FS_createPath","FS_createDevice","FS_readFile","FS","FS_root","FS_mounts","FS_devices","FS_streams","FS_nextInode","FS_nameTable","FS_currentPath","FS_initialized","FS_ignorePermissions","FS_filesystems","FS_syncFSRequests","FS_readFiles","FS_lookupPath","FS_getPath","FS_hashName","FS_hashAddNode","FS_hashRemoveNode","FS_lookupNode","FS_createNode","FS_destroyNode","FS_isRoot","FS_isMountpoint","FS_isFile","FS_isDir","FS_isLink","FS_isChrdev","FS_isBlkdev","FS_isFIFO","FS_isSocket","FS_flagsToPermissionString","FS_nodePermissions","FS_mayLookup","FS_mayCreate","FS_mayDelete","FS_mayOpen","FS_checkOpExists","FS_nextfd","FS_getStreamChecked","FS_getStream","FS_createStream","FS_closeStream","FS_dupStream","FS_doSetAttr","FS_chrdev_stream_ops","FS_major","FS_minor","FS_makedev","FS_registerDevice","FS_getDevice","FS_getMounts","FS_syncfs","FS_mount","FS_unmount","FS_lookup","FS_mknod","FS_statfs","FS_statfsStream","FS_statfsNode","FS_create","FS_mkdir","FS_mkdev","FS_symlink","FS_rename","FS_rmdir","FS_readdir","FS_readlink","FS_stat","FS_fstat","FS_lstat","FS_doChmod","FS_chmod","FS_lchmod","FS_fchmod","FS_doChown","FS_chown","FS_lchown","FS_fchown","FS_doTruncate","FS_truncate","FS_ftruncate","FS_utime","FS_open","FS_close","FS_isClosed","FS_llseek","FS_read","FS_write","FS_mmap","FS_msync","FS_ioctl","FS_writeFile","FS_cwd","FS_chdir","FS_createDefaultDirectories","FS_createDefaultDevices","FS_createSpecialDirectories","FS_createStandardStreams","FS_staticInit","FS_init","FS_quit","FS_findObject","FS_analyzePath","FS_createFile","FS_createDataFile","FS_forceLoadFile","FS_createLazyFile","FS_absolutePath","FS_createFolder","FS_createLink","FS_joinPath","FS_mmapAlloc","FS_standardizePath","MEMFS","TTY","PIPEFS","SOCKFS","tempFixedLengthArray","miniTempWebGLFloatBuffers","miniTempWebGLIntBuffers","GL","AL","GLUT","EGL","GLEW","IDBStore","SDL","SDL_gfx","print","printErr","jstoi_s","InternalError","BindingError","throwInternalError","throwBindingError","registeredTypes","awaitingDependencies","typeDependencies","tupleRegistrations","structRegistrations","sharedRegisterType","whenDependentTypesAreResolved","getTypeName","getFunctionName","heap32VectorToArray","requireRegisteredType","usesDestructorStack","checkArgCount","getEnumValueType","getRequiredArgCount","createJsInvoker","UnboundTypeError","EmValType","EmValOptionalType","throwUnboundTypeError","ensureOverloadTable","exposePublicSymbol","replacePublicSymbol","embindRepr","registeredInstances","getBasestPointer","getInheritedInstance","registeredPointers","registerType","integerReadValueFromPointer","enumReadValueFromPointer","floatReadValueFromPointer","assertIntegerRange","readPointer","installIndexedIterator","runDestructors","craftInvokerFunction","embind__requireFunction","genericPointerToWireType","constNoSmartPtrRawPointerToWireType","nonConstNoSmartPtrRawPointerToWireType","init_RegisteredPointer","RegisteredPointer","RegisteredPointer_fromWireType","runDestructor","releaseClassHandle","finalizationRegistry","detachFinalizer_deps","detachFinalizer","attachFinalizer","makeClassHandle","init_ClassHandle","ClassHandle","throwInstanceAlreadyDeleted","deletionQueue","flushPendingDeletes","delayFunction","RegisteredClass","shallowCopyInternalPointer","downcastPointer","upcastPointer","char_0","char_9","makeLegalFunctionName","emval_freelist","emval_handles","emval_symbols","getStringOrSymbol","Emval","emval_returnValue","emval_lookupTypes","emval_methodCallers","emval_addMethodCaller"];wi.forEach(wt),i.incrementExceptionRefcount=bi,i.decrementExceptionRefcount=yi,i.getExceptionMessage=rr;function Ei(){Rr("fetchSettings")}var nr=V("___getTypeName"),ft=V("_malloc"),ht=V("_emscripten_stack_get_end"),ee=V("_free"),N=V("_setThrew"),ir=V("__emscripten_tempret_set"),or=V("_emscripten_stack_init"),ar=V("__emscripten_stack_restore"),sr=V("__emscripten_stack_alloc"),lr=V("_emscripten_stack_get_current"),cr=V("___cxa_decrement_exception_refcount"),gt=V("___cxa_increment_exception_refcount"),dr=V("___get_exception_message"),ur=V("___cxa_can_catch"),fr=V("___cxa_get_exception_ptr"),hr=V("wasmMemory"),pt=V("wasmTable");function Fi(e){y(typeof e.__getTypeName<"u","missing Wasm export: __getTypeName"),y(typeof e.malloc<"u","missing Wasm export: malloc"),y(typeof e.fflush<"u","missing Wasm export: fflush"),y(typeof e.emscripten_stack_get_end<"u","missing Wasm export: emscripten_stack_get_end"),y(typeof e.emscripten_stack_get_base<"u","missing Wasm export: emscripten_stack_get_base"),y(typeof e.strerror<"u","missing Wasm export: strerror"),y(typeof e.free<"u","missing Wasm export: free"),y(typeof e.setThrew<"u","missing Wasm export: setThrew"),y(typeof e._emscripten_tempret_set<"u","missing Wasm export: _emscripten_tempret_set"),y(typeof e.emscripten_stack_init<"u","missing Wasm export: emscripten_stack_init"),y(typeof e.emscripten_stack_get_free<"u","missing Wasm export: emscripten_stack_get_free"),y(typeof e._emscripten_stack_restore<"u","missing Wasm export: _emscripten_stack_restore"),y(typeof e._emscripten_stack_alloc<"u","missing Wasm export: _emscripten_stack_alloc"),y(typeof e.emscripten_stack_get_current<"u","missing Wasm export: emscripten_stack_get_current"),y(typeof e.__cxa_decrement_exception_refcount<"u","missing Wasm export: __cxa_decrement_exception_refcount"),y(typeof e.__cxa_increment_exception_refcount<"u","missing Wasm export: __cxa_increment_exception_refcount"),y(typeof e.__cxa_free_exception<"u","missing Wasm export: __cxa_free_exception"),y(typeof e.__get_exception_message<"u","missing Wasm export: __get_exception_message"),y(typeof e.__cxa_can_catch<"u","missing Wasm export: __cxa_can_catch"),y(typeof e.__cxa_get_exception_ptr<"u","missing Wasm export: __cxa_get_exception_ptr"),y(typeof e.memory<"u","missing Wasm export: memory"),y(typeof e.__indirect_function_table<"u","missing Wasm export: __indirect_function_table"),nr=Q("__getTypeName",1),ft=Q("malloc",1),ht=e.emscripten_stack_get_end,e.emscripten_stack_get_base,ee=Q("free",1),N=Q("setThrew",2),ir=Q("_emscripten_tempret_set",1),or=e.emscripten_stack_init,e.emscripten_stack_get_free,ar=e._emscripten_stack_restore,sr=e._emscripten_stack_alloc,lr=e.emscripten_stack_get_current,cr=Q("__cxa_decrement_exception_refcount",1),gt=Q("__cxa_increment_exception_refcount",1),dr=Q("__get_exception_message",3),ur=Q("__cxa_can_catch",3),fr=Q("__cxa_get_exception_ptr",1),hr=e.memory,pt=e.__indirect_function_table}var gr={__assert_fail:Jr,__cxa_begin_catch:Kr,__cxa_find_matching_catch_2:Xr,__cxa_find_matching_catch_3:Zr,__cxa_throw:Qr,__resumeException:en,_abort_js:tn,_embind_finalize_value_object:nn,_embind_register_bigint:an,_embind_register_bool:sn,_embind_register_class:wn,_embind_register_class_constructor:kn,_embind_register_class_function:In,_embind_register_emval:$n,_embind_register_enum:An,_embind_register_enum_value:Ln,_embind_register_float:xn,_embind_register_function:Mn,_embind_register_integer:Dn,_embind_register_iterable:On,_embind_register_memory_view:Nn,_embind_register_optional:Bn,_embind_register_std_string:Vn,_embind_register_std_wstring:Kn,_embind_register_value_object:Xn,_embind_register_value_object_field:Zn,_embind_register_void:Qn,_emval_create_invoker:oi,_emval_invoke:ai,_emval_run_destructors:si,_tzset_js:li,emscripten_resize_heap:di,environ_get:fi,environ_sizes_get:hi,fd_close:gi,fd_seek:pi,fd_write:_i,invoke_diii:ji,invoke_fiii:Vi,invoke_i:zi,invoke_ii:Ai,invoke_iii:Pi,invoke_iiii:$i,invoke_iiiii:Ui,invoke_iiiiii:Di,invoke_iiiiiii:Mi,invoke_iiiiiiii:Oi,invoke_iiiiiiiiiii:Ni,invoke_iiiiiiiiiiii:qi,invoke_iiiiiiiiiiiii:Hi,invoke_jiiii:Bi,invoke_v:xi,invoke_vi:Ri,invoke_vii:Li,invoke_viii:Wi,invoke_viiidi:ki,invoke_viiifi:Ci,invoke_viiii:Ii,invoke_viiiiiii:Gi,invoke_viiiiiiiiii:Yi,invoke_viiiiiiiiiiiiiii:Ji};function Ci(e,t,r,n,s,l){var c=W();try{O(e)(t,r,n,s,l)}catch(f){if(D(c),!(f instanceof M))throw f;N(1,0)}}function ki(e,t,r,n,s,l){var c=W();try{O(e)(t,r,n,s,l)}catch(f){if(D(c),!(f instanceof M))throw f;N(1,0)}}function Ii(e,t,r,n,s){var l=W();try{O(e)(t,r,n,s)}catch(c){if(D(l),!(c instanceof M))throw c;N(1,0)}}function $i(e,t,r,n){var s=W();try{return O(e)(t,r,n)}catch(l){if(D(s),!(l instanceof M))throw l;N(1,0)}}function Pi(e,t,r){var n=W();try{return O(e)(t,r)}catch(s){if(D(n),!(s instanceof M))throw s;N(1,0)}}function Ai(e,t){var r=W();try{return O(e)(t)}catch(n){if(D(r),!(n instanceof M))throw n;N(1,0)}}function Li(e,t,r){var n=W();try{O(e)(t,r)}catch(s){if(D(n),!(s instanceof M))throw s;N(1,0)}}function Ri(e,t){var r=W();try{O(e)(t)}catch(n){if(D(r),!(n instanceof M))throw n;N(1,0)}}function xi(e){var t=W();try{O(e)()}catch(r){if(D(t),!(r instanceof M))throw r;N(1,0)}}function Mi(e,t,r,n,s,l,c){var f=W();try{return O(e)(t,r,n,s,l,c)}catch(h){if(D(f),!(h instanceof M))throw h;N(1,0)}}function Di(e,t,r,n,s,l){var c=W();try{return O(e)(t,r,n,s,l)}catch(f){if(D(c),!(f instanceof M))throw f;N(1,0)}}function Wi(e,t,r,n){var s=W();try{O(e)(t,r,n)}catch(l){if(D(s),!(l instanceof M))throw l;N(1,0)}}function Oi(e,t,r,n,s,l,c,f){var h=W();try{return O(e)(t,r,n,s,l,c,f)}catch(_){if(D(h),!(_ instanceof M))throw _;N(1,0)}}function Ni(e,t,r,n,s,l,c,f,h,_,S){var E=W();try{return O(e)(t,r,n,s,l,c,f,h,_,S)}catch(C){if(D(E),!(C instanceof M))throw C;N(1,0)}}function Ui(e,t,r,n,s){var l=W();try{return O(e)(t,r,n,s)}catch(c){if(D(l),!(c instanceof M))throw c;N(1,0)}}function Bi(e,t,r,n,s){var l=W();try{return O(e)(t,r,n,s)}catch(c){if(D(l),!(c instanceof M))throw c;return N(1,0),0n}}function Hi(e,t,r,n,s,l,c,f,h,_,S,E,C){var k=W();try{return O(e)(t,r,n,s,l,c,f,h,_,S,E,C)}catch(L){if(D(k),!(L instanceof M))throw L;N(1,0)}}function Vi(e,t,r,n){var s=W();try{return O(e)(t,r,n)}catch(l){if(D(s),!(l instanceof M))throw l;N(1,0)}}function ji(e,t,r,n){var s=W();try{return O(e)(t,r,n)}catch(l){if(D(s),!(l instanceof M))throw l;N(1,0)}}function zi(e){var t=W();try{return O(e)()}catch(r){if(D(t),!(r instanceof M))throw r;N(1,0)}}function Gi(e,t,r,n,s,l,c,f){var h=W();try{O(e)(t,r,n,s,l,c,f)}catch(_){if(D(h),!(_ instanceof M))throw _;N(1,0)}}function qi(e,t,r,n,s,l,c,f,h,_,S,E){var C=W();try{return O(e)(t,r,n,s,l,c,f,h,_,S,E)}catch(k){if(D(C),!(k instanceof M))throw k;N(1,0)}}function Yi(e,t,r,n,s,l,c,f,h,_,S){var E=W();try{O(e)(t,r,n,s,l,c,f,h,_,S)}catch(C){if(D(E),!(C instanceof M))throw C;N(1,0)}}function Ji(e,t,r,n,s,l,c,f,h,_,S,E,C,k,L,x){var z=W();try{O(e)(t,r,n,s,l,c,f,h,_,S,E,C,k,L,x)}catch(G){if(D(z),!(G instanceof M))throw G;N(1,0)}}var pr;function Ki(){or(),Lr()}function Xi(){Ki(),Wr();function e(){y(!pr),pr=!0,i.calledRun=!0,!Se&&(Or(),Et?.(i),i.onRuntimeInitialized?.(),Re("onRuntimeInitialized"),y(!i._main,'compiled without a main, but one is present. if you added it from JS, use Module["onRuntimeInitialized"]'),Nr())}i.setStatus?(i.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>i.setStatus(""),1),e()},1)):e(),Ze()}var Te;Te=await Gr(),Xi(),xe?o=i:o=new Promise((e,t)=>{Et=e,Ft=t});for(const e of Object.keys(i))e in a||Object.defineProperty(a,e,{configurable:!0,get(){q(`Access to module property ('${e}') is no longer possible via the module constructor argument; Instead, use the result of the module constructor.`)}});return o}let Ae=null;async function no(){return Ae||(Ae=await ro()),Ae}function io(){if(!Ae)throw new Error("Call init() first");return Ae}const A={Blank:0,Context:1,Removed:2,Added:3};function bt(a){return typeof a=="number"?a:typeof a=="object"&&a!==null&&"value"in a?a.value:a}function oo(a,o,i=3){return io().createViewModel(a,o,i)}function mt(a){const o=[];for(let i=0;i<a.size();i++)o.push(a.get(i));return o}function yr(a,o,i){return bt(o.kind)===A.Blank||o.lineNo===0?"":(i?a.oldLines:a.newLines).get(o.lineNo-1)}function ao(a){const o=mt(a.lines).map((u,g)=>({index:g,left:{kind:bt(u.left.kind),lineNo:u.left.lineNo,content:yr(a,u.left,!0)},right:{kind:bt(u.right.kind),lineNo:u.right.lineNo,content:yr(a,u.right,!1)}})),i=mt(a.highlights).map(u=>({row:u.row,start:u.start,end:u.end,isLeft:u.isLeft})),d=mt(a.connectors).map(u=>({top:u.top,bottom:u.bottom,leftStart:u.leftStart,leftEnd:u.leftEnd,rightStart:u.rightStart,rightEnd:u.rightEnd}));return{lines:o,highlights:i,connectors:d}}const B=20,H=8,se=48,Ir="diffViewerData",so=1024*1024,lo=150;function yt(){return Math.random().toString(36).slice(2,10)}function Ye(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function co(){return{leftEditor:document.getElementById("leftEditor"),rightEditor:document.getElementById("rightEditor"),leftHighlight:document.getElementById("leftHighlight"),rightHighlight:document.getElementById("rightHighlight"),leftContent:document.getElementById("leftContent"),rightContent:document.getElementById("rightContent"),leftLineNumbers:document.getElementById("leftLineNumbers"),rightLineNumbers:document.getElementById("rightLineNumbers"),leftStats:document.getElementById("leftStats"),rightStats:document.getElementById("rightStats"),connectorSvg:document.getElementById("connectorSvg"),connectorContent:document.querySelector(".connector-content"),diffConnector:document.getElementById("diffConnector"),wrapBtn:document.getElementById("wrapBtn"),themeBtn:document.getElementById("themeBtn"),connectorBtn:document.getElementById("connectorBtn"),syncScrollBtn:document.getElementById("syncScrollBtn"),indentSelect:document.getElementById("indentSelect"),leftTabContainer:document.getElementById("leftTabContainer"),rightTabContainer:document.getElementById("rightTabContainer"),leftTabScrollLeft:document.getElementById("leftTabScrollLeft"),leftTabScrollRight:document.getElementById("leftTabScrollRight"),rightTabScrollLeft:document.getElementById("rightTabScrollLeft"),rightTabScrollRight:document.getElementById("rightTabScrollRight"),leftTabAdd:document.getElementById("leftTabAdd"),rightTabAdd:document.getElementById("rightTabAdd"),leftSave:document.getElementById("leftSave"),leftDownload:document.getElementById("leftDownload"),leftUpload:document.getElementById("leftUpload"),leftClear:document.getElementById("leftClear"),leftFileInput:document.getElementById("leftFileInput"),rightSave:document.getElementById("rightSave"),rightDownload:document.getElementById("rightDownload"),rightUpload:document.getElementById("rightUpload"),rightClear:document.getElementById("rightClear"),rightFileInput:document.getElementById("rightFileInput"),leftWrapper:document.querySelector(".editor-panel:first-of-type .editor-wrapper"),rightWrapper:document.querySelector(".editor-panel:last-of-type .editor-wrapper")}}function uo(a){try{const o=localStorage.getItem(Ir);if(o){const i=JSON.parse(o);a.leftTabs=i.leftTabs||[],a.rightTabs=i.rightTabs||[],a.leftActiveTabId=i.leftActiveTab||"",a.rightActiveTabId=i.rightActiveTab||""}}catch{}for(const o of a.leftTabs)o.savedContent===void 0&&(o.savedContent=o.content);for(const o of a.rightTabs)o.savedContent===void 0&&(o.savedContent=o.content);if(a.leftTabs.length===0){const o={id:yt(),name:"Untitled",content:"",savedContent:null};a.leftTabs.push(o),a.leftActiveTabId=o.id}if(a.rightTabs.length===0){const o={id:yt(),name:"Untitled",content:"",savedContent:null};a.rightTabs.push(o),a.rightActiveTabId=o.id}a.leftTabs.find(o=>o.id===a.leftActiveTabId)||(a.leftActiveTabId=a.leftTabs[0].id),a.rightTabs.find(o=>o.id===a.rightActiveTabId)||(a.rightActiveTabId=a.rightTabs[0].id)}function Tt(a){const o={leftTabs:a.leftTabs,rightTabs:a.rightTabs,leftActiveTab:a.leftActiveTabId,rightActiveTab:a.rightActiveTabId},i=JSON.stringify(o);i.length>so&&alert(`Warning: Data size (${(i.length/1024/1024).toFixed(2)} MiB) exceeds 1 MiB.`);try{localStorage.setItem(Ir,i)}catch{alert("Failed to save to local storage. Data may be too large.")}}function $r(a,o,i,d){if(d.savedContent===null)return!0;const u=i==="left"?a.leftActiveTabId:a.rightActiveTabId,g=i==="left"?o.leftEditor:o.rightEditor;return(d.id===u?g.value:d.content)!==d.savedContent}function ie(a,o,i,d){const u=i==="left"?o.leftTabContainer:o.rightTabContainer,g=i==="left"?a.leftTabs:a.rightTabs,p=i==="left"?a.leftActiveTabId:a.rightActiveTabId;u.innerHTML="";for(const v of g){const m=document.createElement("div"),b=v.id===p;m.className=`tab${b?" active":""}`,m.dataset.id=v.id,m.setAttribute("role","tab"),m.setAttribute("aria-selected",String(b)),m.setAttribute("tabindex",b?"0":"-1");const T=$r(a,o,i,v),w=document.createElement("span");w.className="tab-name",w.textContent=T?`*${v.name}`:v.name,m.appendChild(w);const F=document.createElement("span");F.className="tab-close",F.setAttribute("role","button"),F.setAttribute("aria-label",`Close ${v.name}`),F.setAttribute("tabindex","0"),F.innerHTML='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>',F.addEventListener("click",R=>{R.stopPropagation(),d.onTabClose(i,v.id)}),F.addEventListener("keydown",R=>{(R.key==="Enter"||R.key===" ")&&(R.preventDefault(),R.stopPropagation(),d.onTabClose(i,v.id))}),m.appendChild(F);let $=null;m.addEventListener("click",()=>{if($){clearTimeout($),$=null;return}$=window.setTimeout(()=>{$=null,v.id!==p&&d.onTabSelect(i,v.id)},200)}),m.addEventListener("dblclick",R=>{R.preventDefault(),$&&(clearTimeout($),$=null),Tr(a,o,i,v.id,w,d)}),m.addEventListener("keydown",R=>{R.key==="Enter"?(R.preventDefault(),Tr(a,o,i,v.id,w,d)):(R.key==="ArrowLeft"||R.key==="ArrowRight")&&(R.preventDefault(),fo(a,o,i,R.key==="ArrowLeft"?-1:1,d))}),u.appendChild(m)}St(o,i)}function Je(a,o,i){const d=i==="left"?o.leftTabContainer:o.rightTabContainer,u=i==="left"?a.leftTabs:a.rightTabs;d.querySelectorAll(".tab").forEach((p,v)=>{if(v<u.length){const m=u[v],b=$r(a,o,i,m),T=p.querySelector(".tab-name");T&&(T.textContent=b?`*${m.name}`:m.name)}})}function fo(a,o,i,d,u){const g=i==="left"?a.leftTabs:a.rightTabs,p=i==="left"?a.leftActiveTabId:a.rightActiveTabId,v=g.findIndex(b=>b.id===p),m=Math.max(0,Math.min(g.length-1,v+d));m!==v&&(u.onTabSelect(i,g[m].id),(i==="left"?o.leftTabContainer:o.rightTabContainer).children[m]?.focus())}function ho(a,o,i,d){Le(a,o,i);const u=i==="left"?a.leftTabs:a.rightTabs,g={id:yt(),name:"Untitled",content:"",savedContent:null};u.push(g),i==="left"?a.leftActiveTabId=g.id:a.rightActiveTabId=g.id,Xe(a,o),ie(a,o,i,d),d.onContentChange();const p=i==="left"?o.leftTabContainer:o.rightTabContainer;requestAnimationFrame(()=>{p.scrollLeft=p.scrollWidth})}function go(a,o,i,d,u){const g=i==="left"?a.leftTabs:a.rightTabs,p=i==="left"?a.leftActiveTabId:a.rightActiveTabId;if(g.length<=1){const m=g[0];m.content="",m.savedContent=null,m.name="Untitled";const b=i==="left"?o.leftEditor:o.rightEditor;b.value="",ie(a,o,i,u),u.onContentChange();return}const v=g.findIndex(m=>m.id===d);if(v!==-1){if(g.splice(v,1),p===d){const m=Math.min(v,g.length-1);i==="left"?a.leftActiveTabId=g[m].id:a.rightActiveTabId=g[m].id,Xe(a,o)}ie(a,o,i,u),Tt(a),u.onContentChange()}}function po(a,o,i,d,u){Le(a,o,i),i==="left"?a.leftActiveTabId=d:a.rightActiveTabId=d,Xe(a,o),ie(a,o,i,u),u.onContentChange()}function Le(a,o,i){const d=i==="left"?a.leftTabs:a.rightTabs,u=i==="left"?a.leftActiveTabId:a.rightActiveTabId,g=i==="left"?o.leftEditor:o.rightEditor,p=d.find(v=>v.id===u);p&&(p.content=g.value)}function Xe(a,o){const i=a.leftTabs.find(u=>u.id===a.leftActiveTabId),d=a.rightTabs.find(u=>u.id===a.rightActiveTabId);o.leftEditor.value=i?.content??"",o.rightEditor.value=d?.content??""}function Tr(a,o,i,d,u,g){const v=(i==="left"?a.leftTabs:a.rightTabs).find(w=>w.id===d);if(!v)return;const m=document.createElement("input");m.type="text",m.className="tab-name-input",m.value=v.name,m.setAttribute("aria-label","Tab name");let b=!1;const T=()=>{if(b)return;b=!0;const w=m.value.trim()||"Untitled";v.name=w,Tt(a),ie(a,o,i,g)};m.addEventListener("blur",T),m.addEventListener("keydown",w=>{w.key==="Enter"?(w.preventDefault(),m.blur()):w.key==="Escape"&&(w.preventDefault(),b=!0,ie(a,o,i,g))}),u.replaceWith(m),m.focus(),m.select()}function ze(a,o,i){(o==="left"?a.leftTabContainer:a.rightTabContainer).scrollBy({left:i,behavior:"smooth"}),setTimeout(()=>St(a,o),200)}function Sr(a,o,i){o.preventDefault();const d=i==="left"?a.leftTabContainer:a.rightTabContainer;d.scrollLeft+=o.deltaY,St(a,i)}function St(a,o){const i=o==="left"?a.leftTabContainer:a.rightTabContainer,d=o==="left"?a.leftTabScrollLeft:a.rightTabScrollLeft,u=o==="left"?a.leftTabScrollRight:a.rightTabScrollRight;d.disabled=i.scrollLeft<=0,u.disabled=i.scrollLeft>=i.scrollWidth-i.clientWidth}function Pr(a){const o=[],i=new Set;let d=0;for(;d<a.length;){const u=a[d],g=u.left.kind,p=u.right.kind;if(g===A.Context||g===A.Blank){g===A.Context&&i.add(d),d++;continue}if(g===A.Removed){const m=p===A.Added?"modified":"removed",b=d;let T=d;for(;T+1<a.length;){const w=a[T+1],F=w.left.kind,$=w.right.kind,R=F===A.Removed&&$===A.Added,J=F===A.Removed&&$===A.Blank;if(m==="modified"&&R||m==="removed"&&J)T++;else break}for(let w=b;w<=T;w++)(a[w].right.kind!==A.Added||a[w].left.kind===A.Removed)&&i.add(w);o.push({type:m,startIndex:b,endIndex:T}),d=T+1}else d++}for(d=0;d<a.length;){const u=a[d];if(!i.has(d)&&u.right.kind===A.Added&&u.left.kind===A.Blank){const g=d;let p=d;for(;p+1<a.length;){const v=a[p+1];if(!i.has(p+1)&&v.right.kind===A.Added&&v.left.kind===A.Blank)p++;else break}o.push({type:"added",startIndex:g,endIndex:p}),d=p+1}else d++}return o}function vo(a,o,i){const d=o.diffResult;if(!d||!o.showConnector)return;const u=i.connectorContent.getBoundingClientRect(),g=a.clientY-u.top,p=Pr(d.lines),v=i.leftContent.scrollTop,m=i.rightContent.scrollTop;for(const b of p){const T=Ke(d.lines,b,!0),w=Ke(d.lines,b,!1);let F,$;if(b.type==="added"){const j=fe(d.lines,b.startIndex,!0);F=H+(j-1)*B-v,$=H+(w.end+1)*B-m}else if(b.type==="removed"){F=H+T.start*B-v;const j=fe(d.lines,b.startIndex,!1);$=H+(j-1)*B-m}else F=H+T.start*B-v,$=H+(w.end+1)*B-m;const R=Math.min(F,H+w.start*B-m),J=Math.max($,H+(T.end+1)*B-v);if(g>=R&&g<=J){const j=b.type==="added"?fe(d.lines,b.startIndex,!0):T.start+1,le=b.type==="removed"?fe(d.lines,b.startIndex,!1):w.start+1,Se=(j-1)*B,y=(le-1)*B;o.isScrolling=!0,i.leftContent.scrollTo({top:Se,behavior:"smooth"}),i.rightContent.scrollTo({top:y,behavior:"smooth"}),setTimeout(()=>{o.isScrolling=!1},500);break}}}function Ge(a,o){const i=a.diffResult;if(!i||!a.showConnector)return;for(;o.connectorSvg.firstChild;)o.connectorSvg.removeChild(o.connectorSvg.firstChild);const d=o.connectorContent.clientHeight;o.connectorSvg.setAttribute("width",String(se)),o.connectorSvg.setAttribute("height",String(d)),o.connectorSvg.setAttribute("viewBox",`0 0 ${se} ${d}`),o.connectorSvg.setAttribute("preserveAspectRatio","none");const u=o.leftContent.scrollTop,g=o.rightContent.scrollTop,p=Pr(i.lines);for(const v of p)mo(o,v,i.lines,u,g,d)}function mo(a,o,i,d,u,g){const p=Ke(i,o,!0),v=Ke(i,o,!1);let m,b,T,w;if(o.type==="added"){const J=fe(i,o.startIndex,!0)-1;m=H+J*B-d,b=m,T=H+v.start*B-u,w=H+(v.end+1)*B-u}else if(o.type==="removed"){const J=fe(i,o.startIndex,!1)-1;m=H+p.start*B-d,b=H+(p.end+1)*B-d,T=H+J*B-u,w=T}else m=H+p.start*B-d,b=H+(p.end+1)*B-d,T=H+v.start*B-u,w=H+(v.end+1)*B-u;const F=Math.min(m,T);Math.max(b,w)<0||F>g||_o(a,m,b,T,w,o.type)}function Ke(a,o,i){let d=-1,u=-1;for(let g=o.startIndex;g<=o.endIndex;g++){const p=i?a[g].left:a[g].right;p.kind!==A.Blank&&p.lineNo>0&&((d===-1||p.lineNo<d)&&(d=p.lineNo),(u===-1||p.lineNo>u)&&(u=p.lineNo))}if(d===-1){const g=fe(a,o.startIndex,i);return{start:g-1,end:g-1}}return{start:d-1,end:u-1}}function fe(a,o,i){for(let d=o-1;d>=0;d--){const u=i?a[d].left:a[d].right;if(u.kind!==A.Blank&&u.lineNo>0)return u.lineNo+1}return 1}function _o(a,o,i,d,u,g){const p=bo(g),v=se*.4,m=se*.6,b=_t(`M 0,${o} C ${v},${o} ${m},${d} ${se},${d} L ${se},${u} C ${m},${u} ${v},${i} 0,${i} Z`,{fill:p,opacity:"0.3"}),T=_t(`M 0,${o} C ${v},${o} ${m},${d} ${se},${d}`,{stroke:p,"stroke-width":"2",fill:"none",opacity:"0.8"}),w=_t(`M 0,${i} C ${v},${i} ${m},${u} ${se},${u}`,{stroke:p,"stroke-width":"2",fill:"none",opacity:"0.8"});a.connectorSvg.appendChild(b),a.connectorSvg.appendChild(T),a.connectorSvg.appendChild(w)}function bo(a){const o=getComputedStyle(document.documentElement);switch(a){case"added":return o.getPropertyValue("--color-connector-added").trim();case"removed":return o.getPropertyValue("--color-connector-removed").trim();default:return o.getPropertyValue("--color-connector-modified").trim()}}function _t(a,o){const i=document.createElementNS("http://www.w3.org/2000/svg","path");i.setAttribute("d",a);for(const[d,u]of Object.entries(o))i.setAttribute(d,u);return i}function wr(a,o,i){const d=a.diffResult;if(!d)return;const u=i==="left",g=u?o.leftHighlight:o.rightHighlight,p=u?o.leftEditor:o.rightEditor,v=u?o.leftLineNumbers:o.rightLineNumbers,m=p.value.split(`
`);v.innerHTML=m.map((b,T)=>`<div class="line-number">${T+1}</div>`).join(""),yo(g,p,d,u),ue(g,p)}function yo(a,o,i,d){if(!i.lines.some(m=>{const b=d?m.left:m.right;return b.kind!==A.Context&&b.kind!==A.Blank})){a.classList.remove("visible"),o.classList.remove("has-highlights");return}a.classList.add("visible"),o.classList.add("has-highlights");const g=new Map;for(const m of i.lines){const b=m.left,T=m.right,w=d?b:T;if(w.kind===A.Blank)continue;const F=To(b.kind,T.kind,d),R=b.kind===A.Removed&&T.kind===A.Added?i.highlights.filter(J=>J.row===m.index&&J.isLeft===d):[];g.set(w.lineNo,{lineClass:F,highlights:R})}const p=o.value.split(`
`),v=[];for(let m=0;m<p.length;m++){const b=m+1,T=p[m];m>0&&v.push(`
`);const w=g.get(b),F=w?.lineClass??"",$=w?.highlights??[];v.push(`<span class="hl-line ${F}">`),$.length>0?v.push(So(T,$,d)):v.push(Ye(T)),v.push("</span>")}a.innerHTML=v.join("")}function To(a,o,i){if(a===A.Removed&&o===A.Added)return"hl-modified";if(i){if(a===A.Removed&&o===A.Blank)return"hl-removed"}else if(o===A.Added&&a===A.Blank)return"hl-added";return""}function So(a,o,i){const d=[...o].sort((p,v)=>p.start-v.start),u=[];let g=0;for(const p of d){p.start>g&&u.push(Ye(a.slice(g,p.start)));const v=i?"hl-char-removed":"hl-char-added";u.push(`<span class="${v}">${Ye(a.slice(p.start,p.end))}</span>`),g=p.end}return g<a.length&&u.push(Ye(a.slice(g))),u.join("")}function ue(a,o){o.style.height="auto",o.offsetHeight;const i=o.scrollHeight,d=o.parentElement?.clientHeight??0,u=Math.max(i,d);o.style.height=`${u}px`,a.style.height=`${u}px`}function wo(a,o){const i=a.diffResult;if(!i)return;const d=i.lines.filter(g=>g.left.kind===A.Removed).length,u=i.lines.filter(g=>g.right.kind===A.Added).length;o.leftStats.innerHTML=d>0?`<span class="stat-removed">-${d}</span>`:"",o.rightStats.innerHTML=u>0?`<span class="stat-added">+${u}</span>`:""}function Eo(a,o){const{selectionStart:i,selectionEnd:d,value:u}=a,g=" ".repeat(o);if(i===d)a.value=u.slice(0,i)+g+u.slice(d),a.selectionStart=a.selectionEnd=i+o;else{const p=u.split(`
`);let v=0,m=i,b=d;for(let T=0;T<p.length;T++){const w=v,F=v+p[T].length;F>=i&&w<d&&(p[T]=g+p[T],w<=i&&(m+=o),w<d&&(b+=o)),v=F+1}a.value=p.join(`
`),a.selectionStart=m,a.selectionEnd=b}a.dispatchEvent(new Event("input"))}function Fo(a,o){const{selectionStart:i,selectionEnd:d,value:u}=a;if(i===d){const g=u.lastIndexOf(`
`,i-1)+1,p=u.slice(g,i);let v=0;for(let m=p.length-1;m>=0&&v<o&&p[m]===" ";m--)v++;v>0&&(a.value=u.slice(0,i-v)+u.slice(i),a.selectionStart=a.selectionEnd=i-v,a.dispatchEvent(new Event("input")))}else{const g=u.split(`
`);let p=0,v=i,m=d;for(let b=0;b<g.length;b++){const T=p,w=p+g[b].length;if(w>=i&&T<d){let F=0;for(let $=0;$<g[b].length&&$<o&&g[b][$]===" ";$++)F++;F>0&&(g[b]=g[b].slice(F),T<=i&&(v-=Math.min(F,i-T)),T<d&&(m-=F))}p=w+1}a.value=g.join(`
`),a.selectionStart=v,a.selectionEnd=m,a.dispatchEvent(new Event("input"))}}function Er(a,o,i,d,u){a.addEventListener("dragenter",g=>{g.preventDefault(),a.classList.add("drag-over")}),a.addEventListener("dragover",g=>{g.preventDefault()}),a.addEventListener("dragleave",g=>{a.contains(g.relatedTarget)||a.classList.remove("drag-over")}),a.addEventListener("drop",g=>{g.preventDefault(),a.classList.remove("drag-over");const p=g.dataTransfer?.files;p&&p.length>0&&Ar(p[0],o,i,d,u)})}function Ar(a,o,i,d,u){const g=new FileReader;g.onload=()=>{const p=g.result,v=o==="left"?d.leftEditor:d.rightEditor;v.value=p;const m=o==="left"?i.leftTabs:i.rightTabs,b=o==="left"?i.leftActiveTabId:i.rightActiveTabId,T=m.find(w=>w.id===b);T&&(T.name=a.name,T.content=p,ie(i,d,o,u)),u.onContentChange()},g.readAsText(a)}function Fr(a,o,i,d,u){const g=a.target,p=g.files;p&&p.length>0&&Ar(p[0],o,i,d,u),g.value=""}function qe(a,o,i){const d=i==="left"?a.leftTabs:a.rightTabs,u=i==="left"?a.leftActiveTabId:a.rightActiveTabId,g=i==="left"?o.leftEditor:o.rightEditor,p=d.find(v=>v.id===u);p&&(p.content=g.value,p.savedContent=g.value),Tt(a),Je(a,o,i)}function Cr(a,o,i){const d=i==="left"?a.leftTabs:a.rightTabs,u=i==="left"?a.leftActiveTabId:a.rightActiveTabId,g=i==="left"?o.leftEditor:o.rightEditor,v=d.find(F=>F.id===u)?.name||"untitled.txt",m=g.value,b=new Blob([m],{type:"text/plain"}),T=URL.createObjectURL(b),w=document.createElement("a");w.href=T,w.download=v.includes(".")?v:`${v}.txt`,document.body.appendChild(w),w.click(),document.body.removeChild(w),URL.revokeObjectURL(T)}function kr(a,o,i,d){const u=i==="left"?o.leftEditor:o.rightEditor;u.value="",Le(a,o,i),Je(a,o,i),d.onContentChange()}class Co{el;state;tabCallbacks;constructor(){this.state={isDarkMode:localStorage.getItem("darkMode")!=="false",isSoftWrap:localStorage.getItem("softWrap")==="true",showConnector:localStorage.getItem("showConnector")!=="false",syncScroll:localStorage.getItem("syncScroll")==="true",indentSize:parseInt(localStorage.getItem("indentSize")??"4",10),diffResult:null,scrollPending:!1,resizeTimeout:null,diffDebounceTimeout:null,leftTabs:[],rightTabs:[],leftActiveTabId:"",rightActiveTabId:"",isScrolling:!1,lastFocusedSide:"left"},this.el=co(),this.tabCallbacks={onTabSelect:(o,i)=>this.handleTabSelect(o,i),onTabClose:(o,i)=>this.handleTabClose(o,i),onTabAdd:o=>this.handleTabAdd(o),onContentChange:()=>this.updateDiffDebounced()},uo(this.state),this.setup()}setup(){this.el.indentSelect.value=String(this.state.indentSize),this.bindEvents(),this.applyTheme(),this.applyWrap(),this.applyConnectorVisibility(),this.applySyncScroll(),Xe(this.state,this.el),ie(this.state,this.el,"left",this.tabCallbacks),ie(this.state,this.el,"right",this.tabCallbacks),this.updateDiffImmediate(),requestAnimationFrame(()=>{ue(this.el.leftHighlight,this.el.leftEditor),ue(this.el.rightHighlight,this.el.rightEditor)})}bindEvents(){this.el.leftEditor.addEventListener("input",()=>this.onLeftInput()),this.el.rightEditor.addEventListener("input",()=>this.onRightInput()),this.el.leftEditor.addEventListener("keydown",o=>this.handleKeyDown(o,this.el.leftEditor)),this.el.rightEditor.addEventListener("keydown",o=>this.handleKeyDown(o,this.el.rightEditor)),this.el.leftEditor.addEventListener("focus",()=>this.state.lastFocusedSide="left"),this.el.rightEditor.addEventListener("focus",()=>this.state.lastFocusedSide="right"),this.el.leftContent.addEventListener("scroll",()=>this.handleLeftScroll()),this.el.rightContent.addEventListener("scroll",()=>this.handleRightScroll()),this.el.wrapBtn.addEventListener("click",()=>this.toggleWrap()),this.el.themeBtn.addEventListener("click",()=>this.toggleTheme()),this.el.connectorBtn.addEventListener("click",()=>this.toggleConnector()),this.el.syncScrollBtn.addEventListener("click",()=>this.toggleSyncScroll()),this.el.indentSelect.addEventListener("change",()=>this.handleIndentChange()),this.el.leftTabAdd.addEventListener("click",()=>this.handleTabAdd("left")),this.el.rightTabAdd.addEventListener("click",()=>this.handleTabAdd("right")),this.el.leftTabScrollLeft.addEventListener("click",()=>ze(this.el,"left",-100)),this.el.leftTabScrollRight.addEventListener("click",()=>ze(this.el,"left",100)),this.el.rightTabScrollLeft.addEventListener("click",()=>ze(this.el,"right",-100)),this.el.rightTabScrollRight.addEventListener("click",()=>ze(this.el,"right",100)),this.el.leftTabContainer.addEventListener("wheel",o=>Sr(this.el,o,"left")),this.el.rightTabContainer.addEventListener("wheel",o=>Sr(this.el,o,"right")),this.el.leftSave.addEventListener("click",()=>qe(this.state,this.el,"left")),this.el.rightSave.addEventListener("click",()=>qe(this.state,this.el,"right")),this.el.leftDownload.addEventListener("click",()=>Cr(this.state,this.el,"left")),this.el.rightDownload.addEventListener("click",()=>Cr(this.state,this.el,"right")),this.el.leftUpload.addEventListener("click",()=>this.el.leftFileInput.click()),this.el.rightUpload.addEventListener("click",()=>this.el.rightFileInput.click()),this.el.leftFileInput.addEventListener("change",o=>Fr(o,"left",this.state,this.el,this.tabCallbacks)),this.el.rightFileInput.addEventListener("change",o=>Fr(o,"right",this.state,this.el,this.tabCallbacks)),this.el.leftClear.addEventListener("click",()=>kr(this.state,this.el,"left",this.tabCallbacks)),this.el.rightClear.addEventListener("click",()=>kr(this.state,this.el,"right",this.tabCallbacks)),Er(this.el.leftWrapper,"left",this.state,this.el,this.tabCallbacks),Er(this.el.rightWrapper,"right",this.state,this.el,this.tabCallbacks),this.el.connectorContent.addEventListener("click",o=>vo(o,this.state,this.el)),document.addEventListener("keydown",o=>this.handleGlobalKeyDown(o)),window.addEventListener("resize",()=>{this.state.resizeTimeout&&clearTimeout(this.state.resizeTimeout),this.state.resizeTimeout=window.setTimeout(()=>{this.state.isSoftWrap&&(ue(this.el.leftHighlight,this.el.leftEditor),ue(this.el.rightHighlight,this.el.rightEditor)),Ge(this.state,this.el)},100)})}handleGlobalKeyDown(o){const d=navigator.platform.toUpperCase().indexOf("MAC")>=0?o.metaKey:o.ctrlKey;if(d&&o.key==="s")o.preventDefault(),qe(this.state,this.el,"left"),qe(this.state,this.el,"right");else if(d&&o.key==="t")o.preventDefault(),this.handleTabAdd(this.state.lastFocusedSide);else if(d&&o.key==="w"){o.preventDefault();const u=this.state.lastFocusedSide,g=u==="left"?this.state.leftActiveTabId:this.state.rightActiveTabId;this.handleTabClose(u,g)}}handleTabSelect(o,i){po(this.state,this.el,o,i,this.tabCallbacks)}handleTabClose(o,i){go(this.state,this.el,o,i,this.tabCallbacks)}handleTabAdd(o){ho(this.state,this.el,o,this.tabCallbacks)}onLeftInput(){Le(this.state,this.el,"left"),Je(this.state,this.el,"left"),this.updateDiffDebounced()}onRightInput(){Le(this.state,this.el,"right"),Je(this.state,this.el,"right"),this.updateDiffDebounced()}toggleTheme(){this.state.isDarkMode=!this.state.isDarkMode,localStorage.setItem("darkMode",String(this.state.isDarkMode)),this.applyTheme()}applyTheme(){document.body.classList.toggle("light-mode",!this.state.isDarkMode)}toggleWrap(){this.state.isSoftWrap=!this.state.isSoftWrap,localStorage.setItem("softWrap",String(this.state.isSoftWrap)),this.applyWrap()}applyWrap(){[this.el.leftEditor,this.el.rightEditor,this.el.leftHighlight,this.el.rightHighlight].forEach(i=>i.classList.toggle("soft-wrap",this.state.isSoftWrap)),this.el.wrapBtn.classList.toggle("active",this.state.isSoftWrap),this.el.wrapBtn.setAttribute("aria-pressed",String(this.state.isSoftWrap)),requestAnimationFrame(()=>{ue(this.el.leftHighlight,this.el.leftEditor),ue(this.el.rightHighlight,this.el.rightEditor)})}toggleConnector(){this.state.showConnector=!this.state.showConnector,localStorage.setItem("showConnector",String(this.state.showConnector)),this.applyConnectorVisibility()}applyConnectorVisibility(){if(this.el.connectorBtn.classList.toggle("active",this.state.showConnector),this.el.connectorBtn.setAttribute("aria-pressed",String(this.state.showConnector)),this.state.showConnector)Ge(this.state,this.el);else for(;this.el.connectorSvg.firstChild;)this.el.connectorSvg.removeChild(this.el.connectorSvg.firstChild)}toggleSyncScroll(){this.state.syncScroll=!this.state.syncScroll,localStorage.setItem("syncScroll",String(this.state.syncScroll)),this.applySyncScroll()}applySyncScroll(){this.el.syncScrollBtn.classList.toggle("active",this.state.syncScroll),this.el.syncScrollBtn.setAttribute("aria-pressed",String(this.state.syncScroll))}handleIndentChange(){this.state.indentSize=parseInt(this.el.indentSelect.value,10),localStorage.setItem("indentSize",String(this.state.indentSize))}handleKeyDown(o,i){o.key==="Tab"&&(o.preventDefault(),o.shiftKey?Fo(i,this.state.indentSize):Eo(i,this.state.indentSize))}handleLeftScroll(){this.el.leftLineNumbers.scrollTop=this.el.leftContent.scrollTop,this.state.syncScroll&&!this.state.isScrolling&&(this.state.isScrolling=!0,this.el.rightContent.scrollTop=this.el.leftContent.scrollTop,this.el.rightLineNumbers.scrollTop=this.el.leftContent.scrollTop,requestAnimationFrame(()=>{this.state.isScrolling=!1})),this.scheduleConnectorRedraw()}handleRightScroll(){this.el.rightLineNumbers.scrollTop=this.el.rightContent.scrollTop,this.state.syncScroll&&!this.state.isScrolling&&(this.state.isScrolling=!0,this.el.leftContent.scrollTop=this.el.rightContent.scrollTop,this.el.leftLineNumbers.scrollTop=this.el.rightContent.scrollTop,requestAnimationFrame(()=>{this.state.isScrolling=!1})),this.scheduleConnectorRedraw()}scheduleConnectorRedraw(){this.state.scrollPending||(this.state.scrollPending=!0,requestAnimationFrame(()=>{Ge(this.state,this.el),this.state.scrollPending=!1}))}updateDiffDebounced(){this.state.diffDebounceTimeout&&clearTimeout(this.state.diffDebounceTimeout),this.state.diffDebounceTimeout=window.setTimeout(()=>{this.updateDiffImmediate()},lo)}updateDiffImmediate(){const o=this.el.leftEditor.value,i=this.el.rightEditor.value,d=oo(o,i);this.state.diffResult=ao(d),wr(this.state,this.el,"left"),wr(this.state,this.el,"right"),wo(this.state,this.el),requestAnimationFrame(()=>Ge(this.state,this.el))}}no().then(()=>new Co);const ko=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));
