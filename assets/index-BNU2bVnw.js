(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))f(d);new MutationObserver(d=>{for(const g of d)if(g.type==="childList")for(const h of g.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&f(h)}).observe(document,{childList:!0,subtree:!0});function i(d){const g={};return d.integrity&&(g.integrity=d.integrity),d.referrerPolicy&&(g.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?g.credentials="include":d.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function f(d){if(d.ep)return;d.ep=!0;const g=i(d);fetch(d.href,g)}})();const $i="modulepreload",Ii=function(I){return"/diff-viewer/"+I},sr={},Ai=function(a,i,f){let d=Promise.resolve();if(i&&i.length>0){let T=function(m){return Promise.all(m.map(y=>Promise.resolve(y).then(w=>({status:"fulfilled",value:w}),w=>({status:"rejected",reason:w}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),v=h?.nonce||h?.getAttribute("nonce");d=T(i.map(m=>{if(m=Ii(m),m in sr)return;sr[m]=!0;const y=m.endsWith(".css"),w=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${w}`))return;const F=document.createElement("link");if(F.rel=y?"stylesheet":$i,y||(F.as="script"),F.crossOrigin="",F.href=m,v&&F.setAttribute("nonce",v),document.head.appendChild(F),y)return new Promise((U,G)=>{F.addEventListener("load",U),F.addEventListener("error",()=>G(new Error(`Unable to preload CSS for ${m}`)))})}))}function g(h){const v=new Event("vite:preloadError",{cancelable:!0});if(v.payload=h,window.dispatchEvent(v),!v.defaultPrevented)throw h}return d.then(h=>{for(const v of h||[])v.status==="rejected"&&g(v.reason);return a().catch(g)})};async function Ri(I={}){var a;(function(){function e(u){u=u.split("-")[0];for(var p=u.split(".").slice(0,3);p.length<3;)p.push("00");return p=p.map((b,S,E)=>b.padStart(2,"0")),p.join("")}var t=u=>[u/1e4|0,(u/100|0)%100,u%100].join("."),r=2147483647,n=typeof process<"u"&&process.versions?.node?e(process.versions.node):r;if(n<16e4)throw new Error(`This emscripten-generated code requires node v${t(16e4)} (detected v${t(n)})`);var s=typeof navigator<"u"&&navigator.userAgent;if(s){var o=s.includes("Safari/")&&!s.includes("Chrome/")&&s.match(/Version\/(\d+\.?\d*\.?\d*)/)?e(s.match(/Version\/(\d+\.?\d*\.?\d*)/)[1]):r;if(o<15e4)throw new Error(`This emscripten-generated code requires Safari v${t(15e4)} (detected v${o})`);var l=s.match(/Firefox\/(\d+(?:\.\d+)?)/)?parseFloat(s.match(/Firefox\/(\d+(?:\.\d+)?)/)[1]):r;if(l<79)throw new Error(`This emscripten-generated code requires Firefox v79 (detected v${l})`);var c=s.match(/Chrome\/(\d+(?:\.\d+)?)/)?parseFloat(s.match(/Chrome\/(\d+(?:\.\d+)?)/)[1]):r;if(c<85)throw new Error(`This emscripten-generated code requires Chrome v85 (detected v${c})`)}})();var i=I,f=!!globalThis.window,d=!!globalThis.WorkerGlobalScope,g=globalThis.process?.versions?.node&&globalThis.process?.type!="renderer",h=!f&&!g&&!d;if(g){const{createRequire:e}=await Ai(async()=>{const{createRequire:t}=await Promise.resolve().then(()=>Ui);return{createRequire:t}},void 0);var v=e(import.meta.url)}var T="./this.program",m=import.meta.url,y="";function w(e){return i.locateFile?i.locateFile(e,y):y+e}var F,U;if(g){if(!(globalThis.process?.versions?.node&&globalThis.process?.type!="renderer"))throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");var G=v("node:fs");m.startsWith("file:")&&(y=v("node:path").dirname(v("node:url").fileURLToPath(m))+"/"),U=t=>{t=be(t)?new URL(t):t;var r=G.readFileSync(t);return _(Buffer.isBuffer(r)),r},F=async(t,r=!0)=>{t=be(t)?new URL(t):t;var n=G.readFileSync(t,r?void 0:"utf8");return _(r?Buffer.isBuffer(n):typeof n=="string"),n},process.argv.length>1&&(T=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2)}else if(!h)if(f||d){try{y=new URL(".",m).href}catch{}if(!(globalThis.window||globalThis.WorkerGlobalScope))throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");d&&(U=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),F=async e=>{if(be(e))return new Promise((r,n)=>{var s=new XMLHttpRequest;s.open("GET",e,!0),s.responseType="arraybuffer",s.onload=()=>{if(s.status==200||s.status==0&&s.response){r(s.response);return}n(s.status)},s.onerror=n,s.send(null)});var t=await fetch(e,{credentials:"same-origin"});if(t.ok)return t.arrayBuffer();throw new Error(t.status+" : "+t.url)}}else throw new Error("environment detection error");var J=console.log.bind(console),V=console.error.bind(console);_(!h,"shell environment detected but not enabled at build time.  Add `shell` to `-sENVIRONMENT` to enable.");var me;globalThis.WebAssembly||V("no native wasm support detected");var Ne=!1;function _(e,t){e||j("Assertion failed"+(t?": "+t:""))}var be=e=>e.startsWith("file://");function lr(){var e=rt();_((e&3)==0),e==0&&(e+=4),k[e>>2]=34821223,k[e+4>>2]=2310721022,k[0]=1668509029}function Be(){if(!Ne){var e=rt();e==0&&(e+=4);var t=k[e>>2],r=k[e+4>>2];(t!=34821223||r!=2310721022)&&j(`Stack overflow! Stack cookie has been overwritten at ${ue(e)}, expected hex dwords 0x89BACDFE and 0x2135467, but received ${ue(r)} ${ue(t)}`),k[0]!=1668509029&&j("Runtime error: The application has corrupted its heap memory area (address zero)!")}}class L extends Error{}class He extends L{constructor(t){super(t),this.excPtr=t;const r=Ht(t);this.name=r[0],this.message=r[1]}}(()=>{var e=new Int16Array(1),t=new Int8Array(e.buffer);e[0]=25459,(t[0]!==115||t[1]!==99)&&j("Runtime error: expected the system to be little-endian! (Run with -sSUPPORT_BIG_ENDIAN to bypass)")})();function Pe(e){Object.getOwnPropertyDescriptor(i,e)||Object.defineProperty(i,e,{configurable:!0,set(){j(`Attempt to set \`Module.${e}\` after it has already been processed.  This can happen, for example, when code is injected via '--post-js' rather than '--pre-js'`)}})}function N(e){return()=>_(!1,`call to '${e}' via reference taken before Wasm module initialization`)}function cr(e){Object.getOwnPropertyDescriptor(i,e)&&j(`\`Module.${e}\` was supplied but \`${e}\` not included in INCOMING_MODULE_JS_API`)}function dr(e){return e==="FS_createPath"||e==="FS_createDataFile"||e==="FS_createPreloadedFile"||e==="FS_preloadFile"||e==="FS_unlink"||e==="addRunDependency"||e==="FS_createLazyFile"||e==="FS_createDevice"||e==="removeRunDependency"}function ur(e){ct(e)}function ct(e){Object.getOwnPropertyDescriptor(i,e)||Object.defineProperty(i,e,{configurable:!0,get(){var t=`'${e}' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the Emscripten FAQ)`;dr(e)&&(t+=". Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you"),j(t)}})}var dt,ut,re,K,ye,ce,de,k,ft,ht,gt,pt,$e=!1;function fr(){var e=Qt.buffer;re=new Int8Array(e),ye=new Int16Array(e),K=new Uint8Array(e),ce=new Uint16Array(e),de=new Int32Array(e),k=new Uint32Array(e),ft=new Float32Array(e),ht=new Float64Array(e),gt=new BigInt64Array(e),pt=new BigUint64Array(e)}_(globalThis.Int32Array&&globalThis.Float64Array&&Int32Array.prototype.subarray&&Int32Array.prototype.set,"JS engine does not provide full typed array support");function hr(){if(i.preRun)for(typeof i.preRun=="function"&&(i.preRun=[i.preRun]);i.preRun.length;)Er(i.preRun.shift());Pe("preRun"),vt(mt)}function gr(){_(!$e),$e=!0,Be(),_e.__wasm_call_ctors()}function pr(){if(Be(),i.postRun)for(typeof i.postRun=="function"&&(i.postRun=[i.postRun]);i.postRun.length;)wr(i.postRun.shift());Pe("postRun"),vt(_t)}function j(e){i.onAbort?.(e),e="Aborted("+e+")",V(e),Ne=!0;var t=new WebAssembly.RuntimeError(e);throw ut?.(t),t}var q={error(){j("Filesystem support (FS) was not included. The problem is that you are using files from JS, but files were not used from C/C++, so filesystem support was not auto-included. You can force-include filesystem support with -sFORCE_FILESYSTEM")},init(){q.error()},createDataFile(){q.error()},createPreloadedFile(){q.error()},createLazyFile(){q.error()},open(){q.error()},mkdev(){q.error()},registerDevice(){q.error()},analyzePath(){q.error()},ErrnoError(){q.error()}};function X(e,t){return(...r)=>{_($e,`native function \`${e}\` called before runtime initialization`);var n=_e[e];return _(n,`exported native function \`${e}\` not found`),_(r.length<=t,`native function \`${e}\` called with ${r.length} args but expects ${t}`),n(...r)}}var Ve;function vr(){return i.locateFile?w("DiffViewWASM.wasm"):new URL("/diff-viewer/assets/DiffViewWASM-USCNajdT.wasm",import.meta.url).href}function _r(e){if(e==Ve&&me)return new Uint8Array(me);if(U)return U(e);throw"both async and sync fetching of the wasm failed"}async function mr(e){if(!me)try{var t=await F(e);return new Uint8Array(t)}catch{}return _r(e)}async function br(e,t){try{var r=await mr(e),n=await WebAssembly.instantiate(r,t);return n}catch(s){V(`failed to asynchronously prepare wasm: ${s}`),be(e)&&V(`warning: Loading from a file URI (${e}) is not supported in most browsers. See https://emscripten.org/docs/getting_started/FAQ.html#how-do-i-run-a-local-webserver-for-testing-why-does-my-program-stall-in-downloading-or-preparing`),j(s)}}async function yr(e,t,r){if(!e&&!be(t)&&!g)try{var n=fetch(t,{credentials:"same-origin"}),s=await WebAssembly.instantiateStreaming(n,r);return s}catch(o){V(`wasm streaming compile failed: ${o}`),V("falling back to ArrayBuffer instantiation")}return br(t,r)}function Tr(){var e={env:er,wasi_snapshot_preview1:er};return e}async function Sr(){function e(l,c){return _e=l.exports,ti(_e),fr(),_e}var t=i;function r(l){return _(i===t,"the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?"),t=null,e(l.instance)}var n=Tr();if(i.instantiateWasm)return new Promise((l,c)=>{try{i.instantiateWasm(n,(u,p)=>{l(e(u,p))})}catch(u){V(`Module.instantiateWasm callback failed with error: ${u}`),c(u)}});Ve??=vr();var s=await yr(me,Ve,n),o=r(s);return o}var vt=e=>{for(;e.length>0;)e.shift()(i)},_t=[],wr=e=>_t.push(e),mt=[],Er=e=>mt.push(e),ue=e=>(_(typeof e=="number",`ptrToString expects a number, got ${typeof e}`),e>>>=0,"0x"+e.toString(16).padStart(8,"0")),x=e=>Gt(e),M=()=>Yt(),Te=e=>{Te.shown||={},Te.shown[e]||(Te.shown[e]=1,g&&(e="warning: "+e),V(e))},bt=globalThis.TextDecoder&&new TextDecoder,yt=(e,t,r,n)=>{var s=t+r;if(n)return s;for(;e[t]&&!(t>=s);)++t;return t},Tt=(e,t=0,r,n)=>{var s=yt(e,t,r,n);if(s-t>16&&e.buffer&&bt)return bt.decode(e.subarray(t,s));for(var o="";t<s;){var l=e[t++];if(!(l&128)){o+=String.fromCharCode(l);continue}var c=e[t++]&63;if((l&224)==192){o+=String.fromCharCode((l&31)<<6|c);continue}var u=e[t++]&63;if((l&240)==224?l=(l&15)<<12|c<<6|u:((l&248)!=240&&Te("Invalid UTF-8 leading byte "+ue(l)+" encountered when deserializing a UTF-8 string in wasm memory to a JS string!"),l=(l&7)<<18|c<<12|u<<6|e[t++]&63),l<65536)o+=String.fromCharCode(l);else{var p=l-65536;o+=String.fromCharCode(55296|p>>10,56320|p&1023)}}return o},fe=(e,t,r)=>(_(typeof e=="number",`UTF8ToString expects a number (got ${typeof e})`),e?Tt(K,e,t,r):""),Fr=(e,t,r,n)=>j(`Assertion failed: ${fe(e)}, at: `+[t?fe(t):"unknown filename",r,n?fe(n):"unknown function"]),Cr=e=>{var t=new je(e);return t.get_caught()||t.set_caught(!0),t.set_rethrown(!1),Zt(e)},he=0;class je{constructor(t){this.excPtr=t,this.ptr=t-24}set_type(t){k[this.ptr+4>>2]=t}get_type(){return k[this.ptr+4>>2]}set_destructor(t){k[this.ptr+8>>2]=t}get_destructor(){return k[this.ptr+8>>2]}set_caught(t){t=t?1:0,re[this.ptr+12]=t}get_caught(){return re[this.ptr+12]!=0}set_rethrown(t){t=t?1:0,re[this.ptr+13]=t}get_rethrown(){return re[this.ptr+13]!=0}init(t,r){this.set_adjusted_ptr(0),this.set_type(t),this.set_destructor(r)}set_adjusted_ptr(t){k[this.ptr+16>>2]=t}get_adjusted_ptr(){return k[this.ptr+16>>2]}}var Ie=e=>jt(e),St=e=>{var t=he?.excPtr;if(!t)return Ie(0),0;var r=new je(t);r.set_adjusted_ptr(t);var n=r.get_type();if(!n)return Ie(0),t;for(var s of e){if(s===0||s===n)break;var o=r.ptr+16;if(Xt(s,n,o))return Ie(s),t}return Ie(n),t},kr=()=>St([]),Pr=e=>St([e]),$r=(e,t,r)=>{var n=new je(e);throw n.init(t,r),nt(e),he=new He(e),he},Ir=e=>{throw he||(he=new He(e)),he},Ar=()=>j("native code called abort()"),Ae={},ze=e=>{for(;e.length;){var t=e.pop(),r=e.pop();r(t)}};function Se(e){return this.fromWireType(k[e>>2])}var ge={},oe={},Re={},Rr=class extends Error{constructor(t){super(t),this.name="InternalError"}},Le=e=>{throw new Rr(e)},ie=(e,t,r)=>{e.forEach(c=>Re[c]=t);function n(c){var u=r(c);u.length!==e.length&&Le("Mismatched type converter count");for(var p=0;p<e.length;++p)z(e[p],u[p])}var s=new Array(t.length),o=[],l=0;for(let[c,u]of t.entries())oe.hasOwnProperty(u)?s[c]=oe[u]:(o.push(u),ge.hasOwnProperty(u)||(ge[u]=[]),ge[u].push(()=>{s[c]=oe[u],++l,l===o.length&&n(s)}));o.length===0&&n(s)},Lr=e=>{var t=Ae[e];delete Ae[e];var r=t.rawConstructor,n=t.rawDestructor,s=t.fields,o=s.map(l=>l.getterReturnType).concat(s.map(l=>l.setterArgumentType));ie([e],o,l=>{var c={};for(var[u,p]of s.entries()){const b=l[u],S=p.getter,E=p.getterContext,C=l[u+s.length],A=p.setter,R=p.setterContext;c[p.fieldName]={read:B=>b.fromWireType(S(E,B)),write:(B,H)=>{var se=[];A(R,B,C.toWireType(se,H)),ze(se)},optional:b.optional}}return[{name:t.name,fromWireType:b=>{var S={};for(var E in c)S[E]=c[E].read(b);return n(b),S},toWireType:(b,S)=>{for(var E in c)if(!(E in S)&&!c[E].optional)throw new TypeError(`Missing field: "${E}"`);var C=r();for(E in c)c[E].write(C,S[E]);return b!==null&&b.push(n,C),C},readValueFromPointer:Se,destructorFunction:n}]})},O=e=>{for(var t="";;){var r=K[e++];if(!r)return t;t+=String.fromCharCode(r)}},we=class extends Error{constructor(t){super(t),this.name="BindingError"}},P=e=>{throw new we(e)};function xr(e,t,r={}){var n=t.name;if(e||P(`type "${n}" must have a positive integer typeid pointer`),oe.hasOwnProperty(e)){if(r.ignoreDuplicateRegistrations)return;P(`Cannot register type '${n}' twice`)}if(oe[e]=t,delete Re[e],ge.hasOwnProperty(e)){var s=ge[e];delete ge[e],s.forEach(o=>o())}}function z(e,t,r={}){return xr(e,t,r)}var wt=(e,t,r)=>{switch(t){case 1:return r?n=>re[n]:n=>K[n];case 2:return r?n=>ye[n>>1]:n=>ce[n>>1];case 4:return r?n=>de[n>>2]:n=>k[n>>2];case 8:return r?n=>gt[n>>3]:n=>pt[n>>3];default:throw new TypeError(`invalid integer width (${t}): ${e}`)}},le=e=>{if(e===null)return"null";var t=typeof e;return t==="object"||t==="array"||t==="function"?e.toString():""+e},Et=(e,t,r,n)=>{if(t<r||t>n)throw new TypeError(`Passing a number "${le(t)}" from JS side to C/C++ side to an argument of type "${e}", which is outside the valid range [${r}, ${n}]!`)},Mr=(e,t,r,n,s)=>{t=O(t);const o=n===0n;let l=c=>c;if(o){const c=r*8;l=u=>BigInt.asUintN(c,u),s=l(s)}z(e,{name:t,fromWireType:l,toWireType:(c,u)=>{if(typeof u=="number")u=BigInt(u);else if(typeof u!="bigint")throw new TypeError(`Cannot convert "${le(u)}" to ${this.name}`);return Et(t,u,n,s),u},readValueFromPointer:wt(t,r,!o),destructorFunction:null})},Dr=(e,t,r,n)=>{t=O(t),z(e,{name:t,fromWireType:function(s){return!!s},toWireType:function(s,o){return o?r:n},readValueFromPointer:function(s){return this.fromWireType(K[s])},destructorFunction:null})},Wr=e=>({count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType}),Ge=e=>{function t(r){return r.$$.ptrType.registeredClass.name}P(t(e)+" instance already deleted")},qe=!1,Ft=e=>{},Or=e=>{e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)},Ct=e=>{e.count.value-=1;var t=e.count.value===0;t&&Or(e)},kt=(e,t,r)=>{if(t===r)return e;if(r.baseClass===void 0)return null;var n=kt(e,t,r.baseClass);return n===null?null:r.downcast(n)},Pt={},Ur={},Nr=(e,t)=>{for(t===void 0&&P("ptr should not be undefined");e.baseClass;)t=e.upcast(t),e=e.baseClass;return t},Br=(e,t)=>(t=Nr(e,t),Ur[t]),xe=(e,t)=>{(!t.ptrType||!t.ptr)&&Le("makeClassHandle requires ptr and ptrType");var r=!!t.smartPtrType,n=!!t.smartPtr;return r!==n&&Le("Both smartPtrType and smartPtr must be specified"),t.count={value:1},Ee(Object.create(e,{$$:{value:t,writable:!0}}))};function $t(e){var t=this.getPointee(e);if(!t)return this.destructor(e),null;var r=Br(this.registeredClass,t);if(r!==void 0){if(r.$$.count.value===0)return r.$$.ptr=t,r.$$.smartPtr=e,r.clone();var n=r.clone();return this.destructor(e),n}function s(){return this.isSmartPointer?xe(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:t,smartPtrType:this,smartPtr:e}):xe(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var o=this.registeredClass.getActualType(t),l=Pt[o];if(!l)return s.call(this);var c;this.isConst?c=l.constPointerType:c=l.pointerType;var u=kt(t,this.registeredClass,c.registeredClass);return u===null?s.call(this):this.isSmartPointer?xe(c.registeredClass.instancePrototype,{ptrType:c,ptr:u,smartPtrType:this,smartPtr:e}):xe(c.registeredClass.instancePrototype,{ptrType:c,ptr:u})}var Ee=e=>globalThis.FinalizationRegistry?(qe=new FinalizationRegistry(t=>{console.warn(t.leakWarning),Ct(t.$$)}),Ee=t=>{var r=t.$$,n=!!r.smartPtr;if(n){var s={$$:r},o=r.ptrType.registeredClass,l=new Error(`Embind found a leaked C++ instance ${o.name} <${ue(r.ptr)}>.
We'll free it automatically in this case, but this functionality is not reliable across various environments.
Make sure to invoke .delete() manually once you're done with the instance instead.
Originally allocated`);"captureStackTrace"in Error&&Error.captureStackTrace(l,$t),s.leakWarning=l.stack.replace(/^Error: /,""),qe.register(t,s,t)}return t},Ft=t=>qe.unregister(t),Ee(e)):(Ee=t=>t,e),Hr=()=>{let e=Me.prototype;Object.assign(e,{isAliasOf(r){if(!(this instanceof Me)||!(r instanceof Me))return!1;var n=this.$$.ptrType.registeredClass,s=this.$$.ptr;r.$$=r.$$;for(var o=r.$$.ptrType.registeredClass,l=r.$$.ptr;n.baseClass;)s=n.upcast(s),n=n.baseClass;for(;o.baseClass;)l=o.upcast(l),o=o.baseClass;return n===o&&s===l},clone(){if(this.$$.ptr||Ge(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var r=Ee(Object.create(Object.getPrototypeOf(this),{$$:{value:Wr(this.$$)}}));return r.$$.count.value+=1,r.$$.deleteScheduled=!1,r},delete(){this.$$.ptr||Ge(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&P("Object already scheduled for deletion"),Ft(this),Ct(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted(){return!this.$$.ptr},deleteLater(){return this.$$.ptr||Ge(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&P("Object already scheduled for deletion"),this.$$.deleteScheduled=!0,this}});const t=Symbol.dispose;t&&(e[t]=e.delete)};function Me(){}var De=(e,t)=>Object.defineProperty(t,"name",{value:e}),It=(e,t,r)=>{if(e[t].overloadTable===void 0){var n=e[t];e[t]=function(...s){return e[t].overloadTable.hasOwnProperty(s.length)||P(`Function '${r}' called with an invalid number of arguments (${s.length}) - expects one of (${e[t].overloadTable})!`),e[t].overloadTable[s.length].apply(this,s)},e[t].overloadTable=[],e[t].overloadTable[n.argCount]=n}},Fe=(e,t,r)=>{i.hasOwnProperty(e)?((r===void 0||i[e].overloadTable!==void 0&&i[e].overloadTable[r]!==void 0)&&P(`Cannot register public name '${e}' twice`),It(i,e,e),i[e].overloadTable.hasOwnProperty(r)&&P(`Cannot register multiple overloads of a function with the same number of arguments (${r})!`),i[e].overloadTable[r]=t):(i[e]=t,i[e].argCount=r)},Vr=48,jr=57,zr=e=>{_(typeof e=="string"),e=e.replace(/[^a-zA-Z0-9_]/g,"$");var t=e.charCodeAt(0);return t>=Vr&&t<=jr?`_${e}`:e};function Gr(e,t,r,n,s,o,l,c){this.name=e,this.constructor=t,this.instancePrototype=r,this.rawDestructor=n,this.baseClass=s,this.getActualType=o,this.upcast=l,this.downcast=c,this.pureVirtualFunctions=[]}var Ye=(e,t,r)=>{for(;t!==r;)t.upcast||P(`Expected null or instance of ${r.name}, got an instance of ${t.name}`),e=t.upcast(e),t=t.baseClass;return e};function qr(e,t){if(t===null)return this.isReference&&P(`null is not a valid ${this.name}`),0;t.$$||P(`Cannot pass "${le(t)}" as a ${this.name}`),t.$$.ptr||P(`Cannot pass deleted object as a pointer of type ${this.name}`);var r=t.$$.ptrType.registeredClass,n=Ye(t.$$.ptr,r,this.registeredClass);return n}function Yr(e,t){var r;if(t===null)return this.isReference&&P(`null is not a valid ${this.name}`),this.isSmartPointer?(r=this.rawConstructor(),e!==null&&e.push(this.rawDestructor,r),r):0;(!t||!t.$$)&&P(`Cannot pass "${le(t)}" as a ${this.name}`),t.$$.ptr||P(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&t.$$.ptrType.isConst&&P(`Cannot convert argument of type ${t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name} to parameter type ${this.name}`);var n=t.$$.ptrType.registeredClass;if(r=Ye(t.$$.ptr,n,this.registeredClass),this.isSmartPointer)switch(t.$$.smartPtr===void 0&&P("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:t.$$.smartPtrType===this?r=t.$$.smartPtr:P(`Cannot convert argument of type ${t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:r=t.$$.smartPtr;break;case 2:if(t.$$.smartPtrType===this)r=t.$$.smartPtr;else{var s=t.clone();r=this.rawShare(r,pe.toHandle(()=>s.delete())),e!==null&&e.push(this.rawDestructor,r)}break;default:P("Unsupported sharing policy")}return r}function Jr(e,t){if(t===null)return this.isReference&&P(`null is not a valid ${this.name}`),0;t.$$||P(`Cannot pass "${le(t)}" as a ${this.name}`),t.$$.ptr||P(`Cannot pass deleted object as a pointer of type ${this.name}`),t.$$.ptrType.isConst&&P(`Cannot convert argument of type ${t.$$.ptrType.name} to parameter type ${this.name}`);var r=t.$$.ptrType.registeredClass,n=Ye(t.$$.ptr,r,this.registeredClass);return n}var Kr=()=>{Object.assign(We.prototype,{getPointee(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e},destructor(e){this.rawDestructor?.(e)},readValueFromPointer:Se,fromWireType:$t})};function We(e,t,r,n,s,o,l,c,u,p,b){this.name=e,this.registeredClass=t,this.isReference=r,this.isConst=n,this.isSmartPointer=s,this.pointeeType=o,this.sharingPolicy=l,this.rawGetPointee=c,this.rawConstructor=u,this.rawShare=p,this.rawDestructor=b,!s&&t.baseClass===void 0?n?(this.toWireType=qr,this.destructorFunction=null):(this.toWireType=Jr,this.destructorFunction=null):this.toWireType=Yr}var At=(e,t,r)=>{i.hasOwnProperty(e)||Le("Replacing nonexistent public symbol"),i[e].overloadTable!==void 0&&r!==void 0?i[e].overloadTable[r]=t:(i[e]=t,i[e].argCount=r)},Rt=[],D=e=>{var t=Rt[e];return t||(Rt[e]=t=it.get(e)),_(it.get(e)==t,"JavaScript-side Wasm function table mirror is out of date!"),t},Y=(e,t,r=!1)=>{_(!r,"Async bindings are only supported with JSPI."),e=O(e);function n(){var o=D(t);return o}var s=n();return typeof s!="function"&&P(`unknown function pointer with signature ${e}: ${t}`),s};class Xr extends Error{}var Lt=e=>{var t=Vt(e),r=O(t);return Z(t),r},Oe=(e,t)=>{var r=[],n={};function s(o){if(!n[o]&&!oe[o]){if(Re[o]){Re[o].forEach(s);return}r.push(o),n[o]=!0}}throw t.forEach(s),new Xr(`${e}: `+r.map(Lt).join([", "]))},Zr=(e,t,r,n,s,o,l,c,u,p,b,S,E)=>{b=O(b),o=Y(s,o),c&&=Y(l,c),p&&=Y(u,p),E=Y(S,E);var C=zr(b);Fe(C,function(){Oe(`Cannot construct ${b} due to unbound types`,[n])}),ie([e,t,r],n?[n]:[],A=>{A=A[0];var R,B;n?(R=A.registeredClass,B=R.instancePrototype):B=Me.prototype;var H=De(b,function(...st){if(Object.getPrototypeOf(this)!==se)throw new we(`Use 'new' to construct ${b}`);if(Q.constructor_body===void 0)throw new we(`${b} has no accessible constructor`);var ir=Q.constructor_body[st.length];if(ir===void 0)throw new we(`Tried to invoke ctor of ${b} with invalid number of parameters (${st.length}) - expected (${Object.keys(Q.constructor_body).toString()}) parameters instead!`);return ir.apply(this,st)}),se=Object.create(B,{constructor:{value:H}});H.prototype=se;var Q=new Gr(b,H,se,E,R,o,c,p);Q.baseClass&&(Q.baseClass.__derivedClasses??=[],Q.baseClass.__derivedClasses.push(Q));var Pi=new We(b,Q,!0,!1,!1),rr=new We(b+"*",Q,!1,!1,!1),nr=new We(b+" const*",Q,!1,!0,!1);return Pt[e]={pointerType:rr,constPointerType:nr},At(C,H),[Pi,rr,nr]})},Je=(e,t)=>{for(var r=[],n=0;n<e;n++)r.push(k[t+n*4>>2]);return r};function xt(e){for(var t=1;t<e.length;++t)if(e[t]!==null&&e[t].destructorFunction===void 0)return!0;return!1}function Qr(e,t,r,n,s){if(e<t||e>r){var o=t==r?t:`${t} to ${r}`;s(`function ${n} called with ${e} arguments, expected ${o}`)}}function en(e,t,r,n){var s=xt(e),o=e.length-2,l=[],c=["fn"];t&&c.push("thisWired");for(var u=0;u<o;++u)l.push(`arg${u}`),c.push(`arg${u}Wired`);l=l.join(","),c=c.join(",");var p=`return function (${l}) {
`;p+=`checkArgCount(arguments.length, minArgs, maxArgs, humanName, throwBindingError);
`,s&&(p+=`var destructors = [];
`);var b=s?"destructors":"null",S=["humanName","throwBindingError","invoker","fn","runDestructors","fromRetWire","toClassParamWire"];t&&(p+=`var thisWired = toClassParamWire(${b}, this);
`);for(var u=0;u<o;++u){var E=`toArg${u}Wire`;p+=`var arg${u}Wired = ${E}(${b}, arg${u});
`,S.push(E)}if(p+=(r||n?"var rv = ":"")+`invoker(${c});
`,s)p+=`runDestructors(destructors);
`;else for(var u=t?1:2;u<e.length;++u){var C=u===1?"thisWired":"arg"+(u-2)+"Wired";e[u].destructorFunction!==null&&(p+=`${C}_dtor(${C});
`,S.push(`${C}_dtor`))}return r&&(p+=`var ret = fromRetWire(rv);
return ret;
`),p+=`}
`,S.push("checkArgCount","minArgs","maxArgs"),p=`if (arguments.length !== ${S.length}){ throw new Error(humanName + "Expected ${S.length} closure arguments " + arguments.length + " given."); }
${p}`,new Function(S,p)}function tn(e){for(var t=e.length-2,r=e.length-1;r>=2&&e[r].optional;--r)t--;return t}function Ke(e,t,r,n,s,o){var l=t.length;l<2&&P("argTypes array size mismatch! Must at least get return value and 'this' types!"),_(!o,"Async bindings are only supported with JSPI.");for(var c=t[1]!==null&&r!==null,u=xt(t),p=!t[0].isVoid,b=l-2,S=tn(t),E=t[0],C=t[1],A=[e,P,n,s,ze,E.fromWireType.bind(E),C?.toWireType.bind(C)],R=2;R<l;++R){var B=t[R];A.push(B.toWireType.bind(B))}if(!u)for(var R=c?1:2;R<t.length;++R)t[R].destructorFunction!==null&&A.push(t[R].destructorFunction);A.push(Qr,S,b);var se=en(t,c,p,o)(...A);return De(e,se)}var rn=(e,t,r,n,s,o)=>{_(t>0);var l=Je(t,r);s=Y(n,s),ie([],[e],c=>{c=c[0];var u=`constructor ${c.name}`;if(c.registeredClass.constructor_body===void 0&&(c.registeredClass.constructor_body=[]),c.registeredClass.constructor_body[t-1]!==void 0)throw new we(`Cannot register multiple constructors with identical number of parameters (${t-1}) for class '${c.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return c.registeredClass.constructor_body[t-1]=()=>{Oe(`Cannot construct ${c.name} due to unbound types`,l)},ie([],l,p=>(p.splice(1,0,null),c.registeredClass.constructor_body[t-1]=Ke(u,p,null,s,o),[])),[]})},Mt=e=>{e=e.trim();const t=e.indexOf("(");return t===-1?e:(_(e.endsWith(")"),"Parentheses for argument names should match."),e.slice(0,t))},nn=(e,t,r,n,s,o,l,c,u,p)=>{var b=Je(r,n);t=O(t),t=Mt(t),o=Y(s,o,u),ie([],[e],S=>{S=S[0];var E=`${S.name}.${t}`;t.startsWith("@@")&&(t=Symbol[t.substring(2)]),c&&S.registeredClass.pureVirtualFunctions.push(t);function C(){Oe(`Cannot call ${E} due to unbound types`,b)}var A=S.registeredClass.instancePrototype,R=A[t];return R===void 0||R.overloadTable===void 0&&R.className!==S.name&&R.argCount===r-2?(C.argCount=r-2,C.className=S.name,A[t]=C):(It(A,t,E),A[t].overloadTable[r-2]=C),ie([],b,B=>{var H=Ke(E,B,S,o,l,u);return A[t].overloadTable===void 0?(H.argCount=r-2,A[t]=H):A[t].overloadTable[r-2]=H,[]}),[]})},Dt=[],ne=[0,1,,1,null,1,!0,1,!1,1],Wt=e=>{e>9&&--ne[e+1]===0&&(_(ne[e]!==void 0,"Decref for unallocated handle."),ne[e]=void 0,Dt.push(e))},pe={toValue:e=>(e||P(`Cannot use deleted val. handle = ${e}`),_(e===2||ne[e]!==void 0&&e%2===0,`invalid handle: ${e}`),ne[e]),toHandle:e=>{switch(e){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:{const t=Dt.pop()||ne.length;return ne[t]=e,ne[t+1]=1,t}}}},Ot={name:"emscripten::val",fromWireType:e=>{var t=pe.toValue(e);return Wt(e),t},toWireType:(e,t)=>pe.toHandle(t),readValueFromPointer:Se,destructorFunction:null},sn=e=>z(e,Ot),Xe=(e,t,r)=>{switch(t){case 1:return r?function(n){return this.fromWireType(re[n])}:function(n){return this.fromWireType(K[n])};case 2:return r?function(n){return this.fromWireType(ye[n>>1])}:function(n){return this.fromWireType(ce[n>>1])};case 4:return r?function(n){return this.fromWireType(de[n>>2])}:function(n){return this.fromWireType(k[n>>2])};default:throw new TypeError(`invalid integer width (${t}): ${e}`)}};function an(e){return e===0?"object":e===1?"number":"string"}var on=(e,t,r,n,s)=>{t=O(t);const o=an(s);switch(o){case"object":{let p=function(){};p.values={},z(e,{name:t,constructor:p,valueType:o,fromWireType:function(b){return this.constructor.values[b]},toWireType:(b,S)=>S.value,readValueFromPointer:Xe(t,r,n),destructorFunction:null}),Fe(t,p);break}case"number":{var l={};z(e,{name:t,keysMap:l,valueType:o,fromWireType:p=>p,toWireType:(p,b)=>b,readValueFromPointer:Xe(t,r,n),destructorFunction:null}),Fe(t,l),delete i[t].argCount;break}case"string":{var c={},u={},l={};z(e,{name:t,valuesMap:c,reverseMap:u,keysMap:l,valueType:o,fromWireType:function(b){return this.reverseMap[b]},toWireType:function(b,S){return this.valuesMap[S]},readValueFromPointer:Xe(t,r,n),destructorFunction:null}),Fe(t,l),delete i[t].argCount;break}}},Ut=(e,t)=>{var r=oe[e];return r===void 0&&P(`${t} has unknown type ${Lt(e)}`),r},ln=(e,t,r)=>{var n=Ut(e,"enum");switch(t=O(t),n.valueType){case"object":{var s=n.constructor,o=Object.create(n.constructor.prototype,{value:{value:r},constructor:{value:De(`${n.name}_${t}`,function(){})}});s.values[r]=o,s[t]=o;break}case"number":{n.keysMap[t]=r;break}case"string":{n.valuesMap[t]=r,n.reverseMap[r]=t,n.keysMap[t]=t;break}}},cn=(e,t)=>{switch(t){case 4:return function(r){return this.fromWireType(ft[r>>2])};case 8:return function(r){return this.fromWireType(ht[r>>3])};default:throw new TypeError(`invalid float width (${t}): ${e}`)}},dn=(e,t,r)=>{t=O(t),z(e,{name:t,fromWireType:n=>n,toWireType:(n,s)=>{if(typeof s!="number"&&typeof s!="boolean")throw new TypeError(`Cannot convert ${le(s)} to ${this.name}`);return s},readValueFromPointer:cn(t,r),destructorFunction:null})},un=(e,t,r,n,s,o,l,c)=>{var u=Je(t,r);e=O(e),e=Mt(e),s=Y(n,s,l),Fe(e,function(){Oe(`Cannot call ${e} due to unbound types`,u)},t-1),ie([],u,p=>{var b=[p[0],null].concat(p.slice(1));return At(e,Ke(e,b,null,s,o,l),t-1),[]})},fn=(e,t,r,n,s)=>{t=O(t);const o=n===0;let l=u=>u;if(o){var c=32-8*r;l=u=>u<<c>>>c,s=l(s)}z(e,{name:t,fromWireType:l,toWireType:(u,p)=>{if(typeof p!="number"&&typeof p!="boolean")throw new TypeError(`Cannot convert "${le(p)}" to ${t}`);return Et(t,p,n,s),p},readValueFromPointer:wt(t,r,n!==0),destructorFunction:null})},hn=(e,t,r)=>{const n=(s,o)=>{let l=0;return{next(){if(l>=s)return{done:!0};const c=l;return l++,{value:o(c),done:!1}},[Symbol.iterator](){return this}}};e[Symbol.iterator]||(e[Symbol.iterator]=function(){const s=this[t]();return n(s,o=>this[r](o))})},gn=(e,t,r,n)=>{r=O(r),n=O(n),ie([],[e,t],s=>{const o=s[0];return hn(o.registeredClass.instancePrototype,r,n),[]})},pn=(e,t,r)=>{var n=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array],s=n[t];function o(l){var c=k[l>>2],u=k[l+4>>2];return new s(re.buffer,u,c)}r=O(r),z(e,{name:r,fromWireType:o,readValueFromPointer:o},{ignoreDuplicateRegistrations:!0})},vn=Object.assign({optional:!0},Ot),_n=(e,t)=>{z(e,vn)},mn=(e,t,r,n)=>{if(_(typeof e=="string",`stringToUTF8Array expects a string (got ${typeof e})`),!(n>0))return 0;for(var s=r,o=r+n-1,l=0;l<e.length;++l){var c=e.codePointAt(l);if(c<=127){if(r>=o)break;t[r++]=c}else if(c<=2047){if(r+1>=o)break;t[r++]=192|c>>6,t[r++]=128|c&63}else if(c<=65535){if(r+2>=o)break;t[r++]=224|c>>12,t[r++]=128|c>>6&63,t[r++]=128|c&63}else{if(r+3>=o)break;c>1114111&&Te("Invalid Unicode code point "+ue(c)+" encountered when serializing a JS string to a UTF-8 string in wasm memory! (Valid unicode code points should be in range 0-0x10FFFF)."),t[r++]=240|c>>18,t[r++]=128|c>>12&63,t[r++]=128|c>>6&63,t[r++]=128|c&63,l++}}return t[r]=0,r-s},ve=(e,t,r)=>(_(typeof r=="number","stringToUTF8(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),mn(e,K,t,r)),Ue=e=>{for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);n<=127?t++:n<=2047?t+=2:n>=55296&&n<=57343?(t+=4,++r):t+=3}return t},bn=(e,t)=>{t=O(t),z(e,{name:t,fromWireType(r){var n=k[r>>2],s=r+4,o;return o=fe(s,n,!0),Z(r),o},toWireType(r,n){n instanceof ArrayBuffer&&(n=new Uint8Array(n));var s,o=typeof n=="string";o||ArrayBuffer.isView(n)&&n.BYTES_PER_ELEMENT==1||P("Cannot pass non-string to std::string"),o?s=Ue(n):s=n.length;var l=tt(4+s+1),c=l+4;return k[l>>2]=s,o?ve(n,c,s+1):K.set(n,c),r!==null&&r.push(Z,l),l},readValueFromPointer:Se,destructorFunction(r){Z(r)}})},Nt=globalThis.TextDecoder?new TextDecoder("utf-16le"):void 0,yn=(e,t,r)=>{_(e%2==0,"Pointer passed to UTF16ToString must be aligned to two bytes!");var n=e>>1,s=yt(ce,n,t/2,r);if(s-n>16&&Nt)return Nt.decode(ce.subarray(n,s));for(var o="",l=n;l<s;++l){var c=ce[l];o+=String.fromCharCode(c)}return o},Tn=(e,t,r)=>{if(_(t%2==0,"Pointer passed to stringToUTF16 must be aligned to two bytes!"),_(typeof r=="number","stringToUTF16(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),r??=2147483647,r<2)return 0;r-=2;for(var n=t,s=r<e.length*2?r/2:e.length,o=0;o<s;++o){var l=e.charCodeAt(o);ye[t>>1]=l,t+=2}return ye[t>>1]=0,t-n},Sn=e=>e.length*2,wn=(e,t,r)=>{_(e%4==0,"Pointer passed to UTF32ToString must be aligned to four bytes!");for(var n="",s=e>>2,o=0;!(o>=t/4);o++){var l=k[s+o];if(!l&&!r)break;n+=String.fromCodePoint(l)}return n},En=(e,t,r)=>{if(_(t%4==0,"Pointer passed to stringToUTF32 must be aligned to four bytes!"),_(typeof r=="number","stringToUTF32(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),r??=2147483647,r<4)return 0;for(var n=t,s=n+r-4,o=0;o<e.length;++o){var l=e.codePointAt(o);if(l>65535&&o++,de[t>>2]=l,t+=4,t+4>s)break}return de[t>>2]=0,t-n},Fn=e=>{for(var t=0,r=0;r<e.length;++r){var n=e.codePointAt(r);n>65535&&r++,t+=4}return t},Cn=(e,t,r)=>{r=O(r);var n,s,o;t===2?(n=yn,s=Tn,o=Sn):(_(t===4,"only 2-byte and 4-byte strings are currently supported"),n=wn,s=En,o=Fn),z(e,{name:r,fromWireType:l=>{var c=k[l>>2],u=n(l+4,c*t,!0);return Z(l),u},toWireType:(l,c)=>{typeof c!="string"&&P(`Cannot pass non-string to C++ string type ${r}`);var u=o(c),p=tt(4+u+t);return k[p>>2]=u/t,s(c,p+4,u+t),l!==null&&l.push(Z,p),p},readValueFromPointer:Se,destructorFunction(l){Z(l)}})},kn=(e,t,r,n,s,o)=>{Ae[e]={name:O(t),rawConstructor:Y(r,n),rawDestructor:Y(s,o),fields:[]}},Pn=(e,t,r,n,s,o,l,c,u,p)=>{Ae[e].fields.push({fieldName:O(t),getterReturnType:r,getter:Y(n,s),getterContext:o,setterArgumentType:l,setter:Y(c,u),setterContext:p})},$n=(e,t)=>{t=O(t),z(e,{isVoid:!0,name:t,fromWireType:()=>{},toWireType:(r,n)=>{}})},Ze=[],In=e=>{var t=Ze.length;return Ze.push(e),t},An=(e,t)=>{for(var r=new Array(e),n=0;n<e;++n)r[n]=Ut(k[t+n*4>>2],`parameter ${n}`);return r},Rn=(e,t,r)=>{var n=[],s=e(n,r);return n.length&&(k[t>>2]=pe.toHandle(n)),s},Ln={},xn=e=>{var t=Ln[e];return t===void 0?O(e):t},Mn=(e,t,r)=>{var n=8,[s,...o]=An(e,t),l=s.toWireType.bind(s),c=o.map(C=>C.readValueFromPointer.bind(C));e--;var u={toValue:pe.toValue},p=c.map((C,A)=>{var R=`argFromPtr${A}`;return u[R]=C,`${R}(args${A?"+"+A*n:""})`}),b;switch(r){case 0:b="toValue(handle)";break;case 2:b="new (toValue(handle))";break;case 3:b="";break;case 1:u.getStringOrSymbol=xn,b="toValue(handle)[getStringOrSymbol(methodName)]";break}b+=`(${p})`,s.isVoid||(u.toReturnWire=l,u.emval_returnValue=Rn,b=`return emval_returnValue(toReturnWire, destructorsRef, ${b})`),b=`return function (handle, methodName, destructorsRef, args) {
${b}
}`;var S=new Function(Object.keys(u),b)(...Object.values(u)),E=`methodCaller<(${o.map(C=>C.name)}) => ${s.name}>`;return In(De(E,S))},Dn=(e,t,r,n,s)=>Ze[e](t,r,n,s),Wn=e=>{var t=pe.toValue(e);ze(t),Wt(e)},On=(e,t,r,n)=>{var s=new Date().getFullYear(),o=new Date(s,0,1),l=new Date(s,6,1),c=o.getTimezoneOffset(),u=l.getTimezoneOffset(),p=Math.max(c,u);k[e>>2]=p*60,de[t>>2]=+(c!=u);var b=C=>{var A=C>=0?"-":"+",R=Math.abs(C),B=String(Math.floor(R/60)).padStart(2,"0"),H=String(R%60).padStart(2,"0");return`UTC${A}${B}${H}`},S=b(c),E=b(u);_(S),_(E),_(Ue(S)<=16,`timezone name truncated to fit in TZNAME_MAX (${S})`),_(Ue(E)<=16,`timezone name truncated to fit in TZNAME_MAX (${E})`),u<c?(ve(S,r,17),ve(E,n,17)):(ve(S,n,17),ve(E,r,17))},Un=e=>{j(`Cannot enlarge memory arrays to size ${e} bytes (OOM). Either (1) compile with -sINITIAL_MEMORY=X with X higher than the current value ${re.length}, (2) compile with -sALLOW_MEMORY_GROWTH which allows increasing the size at runtime, or (3) if you want malloc to return NULL (0) instead of this abort, compile with -sABORTING_MALLOC=0`)},Nn=e=>{K.length,e>>>=0,Un(e)},Qe={},Bn=()=>T||"./this.program",Ce=()=>{if(!Ce.strings){var e=(globalThis.navigator?.language??"C").replace("-","_")+".UTF-8",t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:e,_:Bn()};for(var r in Qe)Qe[r]===void 0?delete t[r]:t[r]=Qe[r];var n=[];for(var r in t)n.push(`${r}=${t[r]}`);Ce.strings=n}return Ce.strings},Hn=(e,t)=>{var r=0,n=0;for(var s of Ce()){var o=t+r;k[e+n>>2]=o,r+=ve(s,o,1/0)+1,n+=4}return 0},Vn=(e,t)=>{var r=Ce();k[e>>2]=r.length;var n=0;for(var s of r)n+=Ue(s)+1;return k[t>>2]=n,0},jn=e=>{j("fd_close called without SYSCALLS_REQUIRE_FILESYSTEM")};function zn(e,t,r,n){return 70}var Gn=[null,[],[]],qn=(e,t)=>{var r=Gn[e];_(r),t===0||t===10?((e===1?J:V)(Tt(r)),r.length=0):r.push(t)},Yn=(e,t,r,n)=>{for(var s=0,o=0;o<r;o++){var l=k[t>>2],c=k[t+4>>2];t+=8;for(var u=0;u<c;u++)qn(e,K[l+u]);s+=c}return k[n>>2]=s,0},et=e=>e instanceof He?e.excPtr:e,Jn=e=>nt(et(e)),Kn=e=>Jt(et(e)),Bt=e=>qt(e),Xn=e=>{var t=M(),r=Bt(4),n=Bt(4);Kt(e,r,n);var s=k[r>>2],o=k[n>>2],l=fe(s);Z(s);var c;return o&&(c=fe(o),Z(o)),x(t),[l,c]},Ht=e=>Xn(et(e));Hr(),Kr(),_(ne.length===10);{if(i.noExitRuntime&&i.noExitRuntime,i.print&&(J=i.print),i.printErr&&(V=i.printErr),i.wasmBinary&&(me=i.wasmBinary),i.FS_createDataFile=q.createDataFile,i.FS_createPreloadedFile=q.createPreloadedFile,ei(),i.arguments&&i.arguments,i.thisProgram&&(T=i.thisProgram),_(typeof i.memoryInitializerPrefixURL>"u","Module.memoryInitializerPrefixURL option was removed, use Module.locateFile instead"),_(typeof i.pthreadMainPrefixURL>"u","Module.pthreadMainPrefixURL option was removed, use Module.locateFile instead"),_(typeof i.cdInitializerPrefixURL>"u","Module.cdInitializerPrefixURL option was removed, use Module.locateFile instead"),_(typeof i.filePackagePrefixURL>"u","Module.filePackagePrefixURL option was removed, use Module.locateFile instead"),_(typeof i.read>"u","Module.read option was removed"),_(typeof i.readAsync>"u","Module.readAsync option was removed (modify readAsync in JS)"),_(typeof i.readBinary>"u","Module.readBinary option was removed (modify readBinary in JS)"),_(typeof i.setWindowTitle>"u","Module.setWindowTitle option was removed (modify emscripten_set_window_title in JS)"),_(typeof i.TOTAL_MEMORY>"u","Module.TOTAL_MEMORY has been renamed Module.INITIAL_MEMORY"),_(typeof i.ENVIRONMENT>"u","Module.ENVIRONMENT has been deprecated. To force the environment, use the ENVIRONMENT compile-time option (for example, -sENVIRONMENT=web or -sENVIRONMENT=node)"),_(typeof i.STACK_SIZE>"u","STACK_SIZE can no longer be set at runtime.  Use -sSTACK_SIZE at link time"),_(typeof i.wasmMemory>"u","Use of `wasmMemory` detected.  Use -sIMPORTED_MEMORY to define wasmMemory externally"),_(typeof i.INITIAL_MEMORY>"u","Detected runtime INITIAL_MEMORY setting.  Use -sIMPORTED_MEMORY to define wasmMemory dynamically"),i.preInit)for(typeof i.preInit=="function"&&(i.preInit=[i.preInit]);i.preInit.length>0;)i.preInit.shift()();Pe("preInit")}var Zn=["writeI53ToI64","writeI53ToI64Clamped","writeI53ToI64Signaling","writeI53ToU64Clamped","writeI53ToU64Signaling","readI53FromI64","readI53FromU64","convertI32PairToI53","convertI32PairToI53Checked","convertU32PairToI53","getTempRet0","zeroMemory","exitJS","getHeapMax","growMemory","withStackSave","strError","inetPton4","inetNtop4","inetPton6","inetNtop6","readSockaddr","writeSockaddr","readEmAsmArgs","jstoi_q","autoResumeAudioContext","getDynCaller","dynCall","handleException","keepRuntimeAlive","runtimeKeepalivePush","runtimeKeepalivePop","callUserCallback","maybeExit","asyncLoad","asmjsMangle","alignMemory","mmapAlloc","HandleAllocator","getUniqueRunDependency","addRunDependency","removeRunDependency","addOnInit","addOnPostCtor","addOnPreMain","addOnExit","STACK_SIZE","STACK_ALIGN","POINTER_SIZE","ASSERTIONS","ccall","cwrap","convertJsFunctionToWasm","getEmptyTableSlot","updateTableMap","getFunctionAddress","addFunction","removeFunction","intArrayFromString","intArrayToString","stringToAscii","stringToNewUTF8","stringToUTF8OnStack","writeArrayToMemory","registerKeyEventCallback","maybeCStringToJsString","findEventTarget","getBoundingClientRect","fillMouseEventData","registerMouseEventCallback","registerWheelEventCallback","registerUiEventCallback","registerFocusEventCallback","fillDeviceOrientationEventData","registerDeviceOrientationEventCallback","fillDeviceMotionEventData","registerDeviceMotionEventCallback","screenOrientation","fillOrientationChangeEventData","registerOrientationChangeEventCallback","fillFullscreenChangeEventData","registerFullscreenChangeEventCallback","JSEvents_requestFullscreen","JSEvents_resizeCanvasForFullscreen","registerRestoreOldStyle","hideEverythingExceptGivenElement","restoreHiddenElements","setLetterbox","softFullscreenResizeWebGLRenderTarget","doRequestFullscreen","fillPointerlockChangeEventData","registerPointerlockChangeEventCallback","registerPointerlockErrorEventCallback","requestPointerLock","fillVisibilityChangeEventData","registerVisibilityChangeEventCallback","registerTouchEventCallback","fillGamepadEventData","registerGamepadEventCallback","registerBeforeUnloadEventCallback","fillBatteryEventData","registerBatteryEventCallback","setCanvasElementSize","getCanvasElementSize","jsStackTrace","getCallstack","convertPCtoSourceLocation","checkWasiClock","wasiRightsToMuslOFlags","wasiOFlagsToMuslOFlags","initRandomFill","randomFill","safeSetTimeout","setImmediateWrapped","safeRequestAnimationFrame","clearImmediateWrapped","registerPostMainLoop","registerPreMainLoop","getPromise","makePromise","idsToPromises","makePromiseCallback","Browser_asyncPrepareDataCounter","isLeapYear","ydayFromDate","arraySum","addDays","getSocketFromFD","getSocketAddress","FS_createPreloadedFile","FS_preloadFile","FS_modeStringToFlags","FS_getMode","FS_stdin_getChar","FS_mkdirTree","_setNetworkCallback","heapObjectForWebGLType","toTypedArrayIndex","webgl_enable_ANGLE_instanced_arrays","webgl_enable_OES_vertex_array_object","webgl_enable_WEBGL_draw_buffers","webgl_enable_WEBGL_multi_draw","webgl_enable_EXT_polygon_offset_clamp","webgl_enable_EXT_clip_control","webgl_enable_WEBGL_polygon_mode","emscriptenWebGLGet","computeUnpackAlignedImageSize","colorChannelsInGlTextureFormat","emscriptenWebGLGetTexPixelData","emscriptenWebGLGetUniform","webglGetUniformLocation","webglPrepareUniformLocationsBeforeFirstUse","webglGetLeftBracePos","emscriptenWebGLGetVertexAttrib","__glGetActiveAttribOrUniform","writeGLArray","registerWebGlEventCallback","runAndAbortIfError","ALLOC_NORMAL","ALLOC_STACK","allocate","writeStringToMemory","writeAsciiToMemory","allocateUTF8","allocateUTF8OnStack","demangle","stackTrace","getNativeTypeSize","getFunctionArgsName","createJsInvokerSignature","PureVirtualError","registerInheritedInstance","unregisterInheritedInstance","getInheritedInstanceCount","getLiveInheritedInstances","setDelayFunction","validateThis","count_emval_handles"];Zn.forEach(ur);var Qn=["run","out","err","callMain","abort","wasmExports","HEAPF32","HEAPF64","HEAP8","HEAPU8","HEAP16","HEAPU16","HEAP32","HEAPU32","HEAP64","HEAPU64","writeStackCookie","checkStackCookie","INT53_MAX","INT53_MIN","bigintToI53Checked","stackSave","stackRestore","stackAlloc","setTempRet0","createNamedFunction","ptrToString","abortOnCannotGrowMemory","ENV","ERRNO_CODES","DNS","Protocols","Sockets","timers","warnOnce","readEmAsmArgsArray","getExecutableName","wasmTable","wasmMemory","noExitRuntime","addOnPreRun","addOnPostRun","freeTableIndexes","functionsInTableMap","setValue","getValue","PATH","PATH_FS","UTF8Decoder","UTF8ArrayToString","UTF8ToString","stringToUTF8Array","stringToUTF8","lengthBytesUTF8","AsciiToString","UTF16Decoder","UTF16ToString","stringToUTF16","lengthBytesUTF16","UTF32ToString","stringToUTF32","lengthBytesUTF32","JSEvents","specialHTMLTargets","findCanvasEventTarget","currentFullscreenStrategy","restoreOldWindowedStyle","UNWIND_CACHE","ExitStatus","getEnvStrings","flush_NO_FILESYSTEM","emSetImmediate","emClearImmediate_deps","emClearImmediate","promiseMap","uncaughtExceptionCount","exceptionLast","exceptionCaught","ExceptionInfo","findMatchingCatch","getExceptionMessageCommon","exnToPtr","Browser","requestFullscreen","requestFullScreen","setCanvasSize","getUserMedia","createContext","getPreloadedImageData__data","wget","MONTH_DAYS_REGULAR","MONTH_DAYS_LEAP","MONTH_DAYS_REGULAR_CUMULATIVE","MONTH_DAYS_LEAP_CUMULATIVE","SYSCALLS","preloadPlugins","FS_stdin_getChar_buffer","FS_unlink","FS_createPath","FS_createDevice","FS_readFile","FS","FS_root","FS_mounts","FS_devices","FS_streams","FS_nextInode","FS_nameTable","FS_currentPath","FS_initialized","FS_ignorePermissions","FS_filesystems","FS_syncFSRequests","FS_readFiles","FS_lookupPath","FS_getPath","FS_hashName","FS_hashAddNode","FS_hashRemoveNode","FS_lookupNode","FS_createNode","FS_destroyNode","FS_isRoot","FS_isMountpoint","FS_isFile","FS_isDir","FS_isLink","FS_isChrdev","FS_isBlkdev","FS_isFIFO","FS_isSocket","FS_flagsToPermissionString","FS_nodePermissions","FS_mayLookup","FS_mayCreate","FS_mayDelete","FS_mayOpen","FS_checkOpExists","FS_nextfd","FS_getStreamChecked","FS_getStream","FS_createStream","FS_closeStream","FS_dupStream","FS_doSetAttr","FS_chrdev_stream_ops","FS_major","FS_minor","FS_makedev","FS_registerDevice","FS_getDevice","FS_getMounts","FS_syncfs","FS_mount","FS_unmount","FS_lookup","FS_mknod","FS_statfs","FS_statfsStream","FS_statfsNode","FS_create","FS_mkdir","FS_mkdev","FS_symlink","FS_rename","FS_rmdir","FS_readdir","FS_readlink","FS_stat","FS_fstat","FS_lstat","FS_doChmod","FS_chmod","FS_lchmod","FS_fchmod","FS_doChown","FS_chown","FS_lchown","FS_fchown","FS_doTruncate","FS_truncate","FS_ftruncate","FS_utime","FS_open","FS_close","FS_isClosed","FS_llseek","FS_read","FS_write","FS_mmap","FS_msync","FS_ioctl","FS_writeFile","FS_cwd","FS_chdir","FS_createDefaultDirectories","FS_createDefaultDevices","FS_createSpecialDirectories","FS_createStandardStreams","FS_staticInit","FS_init","FS_quit","FS_findObject","FS_analyzePath","FS_createFile","FS_createDataFile","FS_forceLoadFile","FS_createLazyFile","FS_absolutePath","FS_createFolder","FS_createLink","FS_joinPath","FS_mmapAlloc","FS_standardizePath","MEMFS","TTY","PIPEFS","SOCKFS","tempFixedLengthArray","miniTempWebGLFloatBuffers","miniTempWebGLIntBuffers","GL","AL","GLUT","EGL","GLEW","IDBStore","SDL","SDL_gfx","print","printErr","jstoi_s","InternalError","BindingError","throwInternalError","throwBindingError","registeredTypes","awaitingDependencies","typeDependencies","tupleRegistrations","structRegistrations","sharedRegisterType","whenDependentTypesAreResolved","getTypeName","getFunctionName","heap32VectorToArray","requireRegisteredType","usesDestructorStack","checkArgCount","getEnumValueType","getRequiredArgCount","createJsInvoker","UnboundTypeError","EmValType","EmValOptionalType","throwUnboundTypeError","ensureOverloadTable","exposePublicSymbol","replacePublicSymbol","embindRepr","registeredInstances","getBasestPointer","getInheritedInstance","registeredPointers","registerType","integerReadValueFromPointer","enumReadValueFromPointer","floatReadValueFromPointer","assertIntegerRange","readPointer","installIndexedIterator","runDestructors","craftInvokerFunction","embind__requireFunction","genericPointerToWireType","constNoSmartPtrRawPointerToWireType","nonConstNoSmartPtrRawPointerToWireType","init_RegisteredPointer","RegisteredPointer","RegisteredPointer_fromWireType","runDestructor","releaseClassHandle","finalizationRegistry","detachFinalizer_deps","detachFinalizer","attachFinalizer","makeClassHandle","init_ClassHandle","ClassHandle","throwInstanceAlreadyDeleted","deletionQueue","flushPendingDeletes","delayFunction","RegisteredClass","shallowCopyInternalPointer","downcastPointer","upcastPointer","char_0","char_9","makeLegalFunctionName","emval_freelist","emval_handles","emval_symbols","getStringOrSymbol","Emval","emval_returnValue","emval_lookupTypes","emval_methodCallers","emval_addMethodCaller"];Qn.forEach(ct),i.incrementExceptionRefcount=Jn,i.decrementExceptionRefcount=Kn,i.getExceptionMessage=Ht;function ei(){cr("fetchSettings")}var Vt=N("___getTypeName"),tt=N("_malloc"),rt=N("_emscripten_stack_get_end"),Z=N("_free"),W=N("_setThrew"),jt=N("__emscripten_tempret_set"),zt=N("_emscripten_stack_init"),Gt=N("__emscripten_stack_restore"),qt=N("__emscripten_stack_alloc"),Yt=N("_emscripten_stack_get_current"),Jt=N("___cxa_decrement_exception_refcount"),nt=N("___cxa_increment_exception_refcount"),Kt=N("___get_exception_message"),Xt=N("___cxa_can_catch"),Zt=N("___cxa_get_exception_ptr"),Qt=N("wasmMemory"),it=N("wasmTable");function ti(e){_(typeof e.__getTypeName<"u","missing Wasm export: __getTypeName"),_(typeof e.malloc<"u","missing Wasm export: malloc"),_(typeof e.fflush<"u","missing Wasm export: fflush"),_(typeof e.emscripten_stack_get_end<"u","missing Wasm export: emscripten_stack_get_end"),_(typeof e.emscripten_stack_get_base<"u","missing Wasm export: emscripten_stack_get_base"),_(typeof e.strerror<"u","missing Wasm export: strerror"),_(typeof e.free<"u","missing Wasm export: free"),_(typeof e.setThrew<"u","missing Wasm export: setThrew"),_(typeof e._emscripten_tempret_set<"u","missing Wasm export: _emscripten_tempret_set"),_(typeof e.emscripten_stack_init<"u","missing Wasm export: emscripten_stack_init"),_(typeof e.emscripten_stack_get_free<"u","missing Wasm export: emscripten_stack_get_free"),_(typeof e._emscripten_stack_restore<"u","missing Wasm export: _emscripten_stack_restore"),_(typeof e._emscripten_stack_alloc<"u","missing Wasm export: _emscripten_stack_alloc"),_(typeof e.emscripten_stack_get_current<"u","missing Wasm export: emscripten_stack_get_current"),_(typeof e.__cxa_decrement_exception_refcount<"u","missing Wasm export: __cxa_decrement_exception_refcount"),_(typeof e.__cxa_increment_exception_refcount<"u","missing Wasm export: __cxa_increment_exception_refcount"),_(typeof e.__cxa_free_exception<"u","missing Wasm export: __cxa_free_exception"),_(typeof e.__get_exception_message<"u","missing Wasm export: __get_exception_message"),_(typeof e.__cxa_can_catch<"u","missing Wasm export: __cxa_can_catch"),_(typeof e.__cxa_get_exception_ptr<"u","missing Wasm export: __cxa_get_exception_ptr"),_(typeof e.memory<"u","missing Wasm export: memory"),_(typeof e.__indirect_function_table<"u","missing Wasm export: __indirect_function_table"),Vt=X("__getTypeName",1),tt=X("malloc",1),rt=e.emscripten_stack_get_end,e.emscripten_stack_get_base,Z=X("free",1),W=X("setThrew",2),jt=X("_emscripten_tempret_set",1),zt=e.emscripten_stack_init,e.emscripten_stack_get_free,Gt=e._emscripten_stack_restore,qt=e._emscripten_stack_alloc,Yt=e.emscripten_stack_get_current,Jt=X("__cxa_decrement_exception_refcount",1),nt=X("__cxa_increment_exception_refcount",1),Kt=X("__get_exception_message",3),Xt=X("__cxa_can_catch",3),Zt=X("__cxa_get_exception_ptr",1),Qt=e.memory,it=e.__indirect_function_table}var er={__assert_fail:Fr,__cxa_begin_catch:Cr,__cxa_find_matching_catch_2:kr,__cxa_find_matching_catch_3:Pr,__cxa_throw:$r,__resumeException:Ir,_abort_js:Ar,_embind_finalize_value_object:Lr,_embind_register_bigint:Mr,_embind_register_bool:Dr,_embind_register_class:Zr,_embind_register_class_constructor:rn,_embind_register_class_function:nn,_embind_register_emval:sn,_embind_register_enum:on,_embind_register_enum_value:ln,_embind_register_float:dn,_embind_register_function:un,_embind_register_integer:fn,_embind_register_iterable:gn,_embind_register_memory_view:pn,_embind_register_optional:_n,_embind_register_std_string:bn,_embind_register_std_wstring:Cn,_embind_register_value_object:kn,_embind_register_value_object_field:Pn,_embind_register_void:$n,_emval_create_invoker:Mn,_emval_invoke:Dn,_emval_run_destructors:Wn,_tzset_js:On,emscripten_resize_heap:Nn,environ_get:Hn,environ_sizes_get:Vn,fd_close:jn,fd_seek:zn,fd_write:Yn,invoke_diii:yi,invoke_fiii:bi,invoke_i:Ti,invoke_ii:oi,invoke_iii:ai,invoke_iiii:si,invoke_iiiii:vi,invoke_iiiiii:fi,invoke_iiiiiii:ui,invoke_iiiiiiii:gi,invoke_iiiiiiiiiii:pi,invoke_iiiiiiiiiiii:wi,invoke_iiiiiiiiiiiii:mi,invoke_jiiii:_i,invoke_v:di,invoke_vi:ci,invoke_vii:li,invoke_viii:hi,invoke_viiidi:ni,invoke_viiifi:ri,invoke_viiii:ii,invoke_viiiiiii:Si,invoke_viiiiiiiiii:Ei,invoke_viiiiiiiiiiiiiii:Fi};function ri(e,t,r,n,s,o){var l=M();try{D(e)(t,r,n,s,o)}catch(c){if(x(l),!(c instanceof L))throw c;W(1,0)}}function ni(e,t,r,n,s,o){var l=M();try{D(e)(t,r,n,s,o)}catch(c){if(x(l),!(c instanceof L))throw c;W(1,0)}}function ii(e,t,r,n,s){var o=M();try{D(e)(t,r,n,s)}catch(l){if(x(o),!(l instanceof L))throw l;W(1,0)}}function si(e,t,r,n){var s=M();try{return D(e)(t,r,n)}catch(o){if(x(s),!(o instanceof L))throw o;W(1,0)}}function ai(e,t,r){var n=M();try{return D(e)(t,r)}catch(s){if(x(n),!(s instanceof L))throw s;W(1,0)}}function oi(e,t){var r=M();try{return D(e)(t)}catch(n){if(x(r),!(n instanceof L))throw n;W(1,0)}}function li(e,t,r){var n=M();try{D(e)(t,r)}catch(s){if(x(n),!(s instanceof L))throw s;W(1,0)}}function ci(e,t){var r=M();try{D(e)(t)}catch(n){if(x(r),!(n instanceof L))throw n;W(1,0)}}function di(e){var t=M();try{D(e)()}catch(r){if(x(t),!(r instanceof L))throw r;W(1,0)}}function ui(e,t,r,n,s,o,l){var c=M();try{return D(e)(t,r,n,s,o,l)}catch(u){if(x(c),!(u instanceof L))throw u;W(1,0)}}function fi(e,t,r,n,s,o){var l=M();try{return D(e)(t,r,n,s,o)}catch(c){if(x(l),!(c instanceof L))throw c;W(1,0)}}function hi(e,t,r,n){var s=M();try{D(e)(t,r,n)}catch(o){if(x(s),!(o instanceof L))throw o;W(1,0)}}function gi(e,t,r,n,s,o,l,c){var u=M();try{return D(e)(t,r,n,s,o,l,c)}catch(p){if(x(u),!(p instanceof L))throw p;W(1,0)}}function pi(e,t,r,n,s,o,l,c,u,p,b){var S=M();try{return D(e)(t,r,n,s,o,l,c,u,p,b)}catch(E){if(x(S),!(E instanceof L))throw E;W(1,0)}}function vi(e,t,r,n,s){var o=M();try{return D(e)(t,r,n,s)}catch(l){if(x(o),!(l instanceof L))throw l;W(1,0)}}function _i(e,t,r,n,s){var o=M();try{return D(e)(t,r,n,s)}catch(l){if(x(o),!(l instanceof L))throw l;return W(1,0),0n}}function mi(e,t,r,n,s,o,l,c,u,p,b,S,E){var C=M();try{return D(e)(t,r,n,s,o,l,c,u,p,b,S,E)}catch(A){if(x(C),!(A instanceof L))throw A;W(1,0)}}function bi(e,t,r,n){var s=M();try{return D(e)(t,r,n)}catch(o){if(x(s),!(o instanceof L))throw o;W(1,0)}}function yi(e,t,r,n){var s=M();try{return D(e)(t,r,n)}catch(o){if(x(s),!(o instanceof L))throw o;W(1,0)}}function Ti(e){var t=M();try{return D(e)()}catch(r){if(x(t),!(r instanceof L))throw r;W(1,0)}}function Si(e,t,r,n,s,o,l,c){var u=M();try{D(e)(t,r,n,s,o,l,c)}catch(p){if(x(u),!(p instanceof L))throw p;W(1,0)}}function wi(e,t,r,n,s,o,l,c,u,p,b,S){var E=M();try{return D(e)(t,r,n,s,o,l,c,u,p,b,S)}catch(C){if(x(E),!(C instanceof L))throw C;W(1,0)}}function Ei(e,t,r,n,s,o,l,c,u,p,b){var S=M();try{D(e)(t,r,n,s,o,l,c,u,p,b)}catch(E){if(x(S),!(E instanceof L))throw E;W(1,0)}}function Fi(e,t,r,n,s,o,l,c,u,p,b,S,E,C,A,R){var B=M();try{D(e)(t,r,n,s,o,l,c,u,p,b,S,E,C,A,R)}catch(H){if(x(B),!(H instanceof L))throw H;W(1,0)}}var tr;function Ci(){zt(),lr()}function ki(){Ci(),hr();function e(){_(!tr),tr=!0,i.calledRun=!0,!Ne&&(gr(),dt?.(i),i.onRuntimeInitialized?.(),Pe("onRuntimeInitialized"),_(!i._main,'compiled without a main, but one is present. if you added it from JS, use Module["onRuntimeInitialized"]'),pr())}i.setStatus?(i.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>i.setStatus(""),1),e()},1)):e(),Be()}var _e;_e=await Sr(),ki(),$e?a=i:a=new Promise((e,t)=>{dt=e,ut=t});for(const e of Object.keys(i))e in I||Object.defineProperty(I,e,{configurable:!0,get(){j(`Access to module property ('${e}') is no longer possible via the module constructor argument; Instead, use the result of the module constructor.`)}});return a}let ke=null;async function Li(){return ke||(ke=await Ri()),ke}function xi(){if(!ke)throw new Error("Call init() first");return ke}const $={Blank:0,Context:1,Removed:2,Added:3};function lt(I){return typeof I=="number"?I:typeof I=="object"&&I!==null&&"value"in I?I.value:I}function Mi(I,a,i=3){return xi().createViewModel(I,a,i)}function at(I){const a=[];for(let i=0;i<I.size();i++)a.push(I.get(i));return a}function ar(I,a,i){return lt(a.kind)===$.Blank||a.lineNo===0?"":(i?I.oldLines:I.newLines).get(a.lineNo-1)}function Di(I){const a=at(I.lines).map((d,g)=>({index:g,left:{kind:lt(d.left.kind),lineNo:d.left.lineNo,content:ar(I,d.left,!0)},right:{kind:lt(d.right.kind),lineNo:d.right.lineNo,content:ar(I,d.right,!1)}})),i=at(I.highlights).map(d=>({row:d.row,start:d.start,end:d.end,isLeft:d.isLeft})),f=at(I.connectors).map(d=>({top:d.top,bottom:d.bottom,leftStart:d.leftStart,leftEnd:d.leftEnd,rightStart:d.rightStart,rightEnd:d.rightEnd}));return{lines:a,highlights:i,connectors:f}}const ee=20,te=8,ae=48,or="diffViewerData",Wi=1024*1024;function ot(){return Math.random().toString(36).slice(2,10)}class Oi{el;state;constructor(){this.state={isDarkMode:localStorage.getItem("darkMode")!=="false",isSoftWrap:localStorage.getItem("softWrap")==="true",showConnector:localStorage.getItem("showConnector")!=="false",indentSize:parseInt(localStorage.getItem("indentSize")??"4",10),diffResult:null,scrollPending:!1,resizeTimeout:null,leftTabs:[],rightTabs:[],leftActiveTabId:"",rightActiveTabId:""},this.el=this.queryElements(),this.loadFromStorage(),this.setup()}queryElements(){return{leftEditor:document.getElementById("leftEditor"),rightEditor:document.getElementById("rightEditor"),leftHighlight:document.getElementById("leftHighlight"),rightHighlight:document.getElementById("rightHighlight"),leftContent:document.getElementById("leftContent"),rightContent:document.getElementById("rightContent"),leftLineNumbers:document.getElementById("leftLineNumbers"),rightLineNumbers:document.getElementById("rightLineNumbers"),leftStats:document.getElementById("leftStats"),rightStats:document.getElementById("rightStats"),connectorSvg:document.getElementById("connectorSvg"),connectorContent:document.querySelector(".connector-content"),diffConnector:document.getElementById("diffConnector"),wrapBtn:document.getElementById("wrapBtn"),themeBtn:document.getElementById("themeBtn"),connectorBtn:document.getElementById("connectorBtn"),indentSelect:document.getElementById("indentSelect"),leftTabContainer:document.getElementById("leftTabContainer"),rightTabContainer:document.getElementById("rightTabContainer"),leftTabScrollLeft:document.getElementById("leftTabScrollLeft"),leftTabScrollRight:document.getElementById("leftTabScrollRight"),rightTabScrollLeft:document.getElementById("rightTabScrollLeft"),rightTabScrollRight:document.getElementById("rightTabScrollRight"),leftTabAdd:document.getElementById("leftTabAdd"),rightTabAdd:document.getElementById("rightTabAdd"),leftSave:document.getElementById("leftSave"),leftDownload:document.getElementById("leftDownload"),leftUpload:document.getElementById("leftUpload"),leftClear:document.getElementById("leftClear"),leftFileInput:document.getElementById("leftFileInput"),rightSave:document.getElementById("rightSave"),rightDownload:document.getElementById("rightDownload"),rightUpload:document.getElementById("rightUpload"),rightClear:document.getElementById("rightClear"),rightFileInput:document.getElementById("rightFileInput"),leftWrapper:document.querySelector(".editor-panel:first-of-type .editor-wrapper"),rightWrapper:document.querySelector(".editor-panel:last-of-type .editor-wrapper")}}loadFromStorage(){try{const a=localStorage.getItem(or);if(a){const i=JSON.parse(a);this.state.leftTabs=i.leftTabs||[],this.state.rightTabs=i.rightTabs||[],this.state.leftActiveTabId=i.leftActiveTab||"",this.state.rightActiveTabId=i.rightActiveTab||""}}catch{}for(const a of this.state.leftTabs)a.savedContent===void 0&&(a.savedContent=a.content);for(const a of this.state.rightTabs)a.savedContent===void 0&&(a.savedContent=a.content);if(this.state.leftTabs.length===0){const a={id:ot(),name:"Untitled",content:"",savedContent:null};this.state.leftTabs.push(a),this.state.leftActiveTabId=a.id}if(this.state.rightTabs.length===0){const a={id:ot(),name:"Untitled",content:"",savedContent:null};this.state.rightTabs.push(a),this.state.rightActiveTabId=a.id}this.state.leftTabs.find(a=>a.id===this.state.leftActiveTabId)||(this.state.leftActiveTabId=this.state.leftTabs[0].id),this.state.rightTabs.find(a=>a.id===this.state.rightActiveTabId)||(this.state.rightActiveTabId=this.state.rightTabs[0].id)}saveToStorage(){const a={leftTabs:this.state.leftTabs,rightTabs:this.state.rightTabs,leftActiveTab:this.state.leftActiveTabId,rightActiveTab:this.state.rightActiveTabId},i=JSON.stringify(a);i.length>Wi&&alert(`Warning: Data size (${(i.length/1024/1024).toFixed(2)} MiB) exceeds 1 MiB.`);try{localStorage.setItem(or,i)}catch{alert("Failed to save to local storage. Data may be too large.")}}setup(){this.el.indentSelect.value=String(this.state.indentSize),this.bindEvents(),this.applyTheme(),this.applyWrap(),this.applyConnectorVisibility(),this.loadActiveTabContent(),this.renderTabs("left"),this.renderTabs("right"),this.updateDiff(),requestAnimationFrame(()=>{this.syncHeight(this.el.leftHighlight,this.el.leftEditor),this.syncHeight(this.el.rightHighlight,this.el.rightEditor)})}loadActiveTabContent(){const a=this.state.leftTabs.find(f=>f.id===this.state.leftActiveTabId),i=this.state.rightTabs.find(f=>f.id===this.state.rightActiveTabId);this.el.leftEditor.value=a?.content??"",this.el.rightEditor.value=i?.content??""}bindEvents(){this.el.leftEditor.addEventListener("input",()=>this.onLeftInput()),this.el.rightEditor.addEventListener("input",()=>this.onRightInput()),this.el.leftEditor.addEventListener("keydown",a=>this.handleKeyDown(a,this.el.leftEditor)),this.el.rightEditor.addEventListener("keydown",a=>this.handleKeyDown(a,this.el.rightEditor)),this.el.leftContent.addEventListener("scroll",()=>this.handleLeftScroll()),this.el.rightContent.addEventListener("scroll",()=>this.handleRightScroll()),this.el.wrapBtn.addEventListener("click",()=>this.toggleWrap()),this.el.themeBtn.addEventListener("click",()=>this.toggleTheme()),this.el.connectorBtn.addEventListener("click",()=>this.toggleConnector()),this.el.indentSelect.addEventListener("change",()=>this.handleIndentChange()),this.el.leftTabAdd.addEventListener("click",()=>this.addTab("left")),this.el.rightTabAdd.addEventListener("click",()=>this.addTab("right")),this.el.leftTabScrollLeft.addEventListener("click",()=>this.scrollTabs("left",-100)),this.el.leftTabScrollRight.addEventListener("click",()=>this.scrollTabs("left",100)),this.el.rightTabScrollLeft.addEventListener("click",()=>this.scrollTabs("right",-100)),this.el.rightTabScrollRight.addEventListener("click",()=>this.scrollTabs("right",100)),this.el.leftTabContainer.addEventListener("wheel",a=>this.handleTabWheel(a,"left")),this.el.rightTabContainer.addEventListener("wheel",a=>this.handleTabWheel(a,"right")),this.el.leftSave.addEventListener("click",()=>this.saveCurrentTab("left")),this.el.rightSave.addEventListener("click",()=>this.saveCurrentTab("right")),this.el.leftDownload.addEventListener("click",()=>this.downloadCurrentTab("left")),this.el.rightDownload.addEventListener("click",()=>this.downloadCurrentTab("right")),this.el.leftUpload.addEventListener("click",()=>this.el.leftFileInput.click()),this.el.rightUpload.addEventListener("click",()=>this.el.rightFileInput.click()),this.el.leftFileInput.addEventListener("change",a=>this.handleFileUpload(a,"left")),this.el.rightFileInput.addEventListener("change",a=>this.handleFileUpload(a,"right")),this.el.leftClear.addEventListener("click",()=>this.clearEditor("left")),this.el.rightClear.addEventListener("click",()=>this.clearEditor("right")),this.setupDragDrop(this.el.leftWrapper,"left"),this.setupDragDrop(this.el.rightWrapper,"right"),window.addEventListener("resize",()=>{this.state.resizeTimeout&&clearTimeout(this.state.resizeTimeout),this.state.resizeTimeout=window.setTimeout(()=>{this.state.isSoftWrap&&(this.syncHeight(this.el.leftHighlight,this.el.leftEditor),this.syncHeight(this.el.rightHighlight,this.el.rightEditor)),this.drawConnectors()},100)})}setupDragDrop(a,i){a.addEventListener("dragenter",f=>{f.preventDefault(),a.classList.add("drag-over")}),a.addEventListener("dragover",f=>{f.preventDefault()}),a.addEventListener("dragleave",f=>{a.contains(f.relatedTarget)||a.classList.remove("drag-over")}),a.addEventListener("drop",f=>{f.preventDefault(),a.classList.remove("drag-over");const d=f.dataTransfer?.files;d&&d.length>0&&this.loadFile(d[0],i)})}loadFile(a,i){const f=new FileReader;f.onload=()=>{const d=f.result,g=i==="left"?this.el.leftEditor:this.el.rightEditor;g.value=d;const h=i==="left"?this.state.leftTabs:this.state.rightTabs,v=i==="left"?this.state.leftActiveTabId:this.state.rightActiveTabId,T=h.find(m=>m.id===v);T&&(T.name=a.name,T.content=d,this.renderTabs(i)),this.updateDiff()},f.readAsText(a)}handleFileUpload(a,i){const f=a.target,d=f.files;d&&d.length>0&&this.loadFile(d[0],i),f.value=""}saveCurrentTab(a){const i=a==="left"?this.state.leftTabs:this.state.rightTabs,f=a==="left"?this.state.leftActiveTabId:this.state.rightActiveTabId,d=a==="left"?this.el.leftEditor:this.el.rightEditor,g=i.find(h=>h.id===f);g&&(g.content=d.value,g.savedContent=d.value),this.saveToStorage(),this.renderTabs(a)}downloadCurrentTab(a){const i=a==="left"?this.state.leftTabs:this.state.rightTabs,f=a==="left"?this.state.leftActiveTabId:this.state.rightActiveTabId,d=a==="left"?this.el.leftEditor:this.el.rightEditor,h=i.find(w=>w.id===f)?.name||"untitled.txt",v=d.value,T=new Blob([v],{type:"text/plain"}),m=URL.createObjectURL(T),y=document.createElement("a");y.href=m,y.download=h.includes(".")?h:`${h}.txt`,document.body.appendChild(y),y.click(),document.body.removeChild(y),URL.revokeObjectURL(m)}clearEditor(a){const i=a==="left"?this.el.leftEditor:this.el.rightEditor;i.value="",this.saveCurrentTabContent(a),this.renderTabs(a),this.updateDiff()}renderTabs(a){const i=a==="left"?this.el.leftTabContainer:this.el.rightTabContainer,f=a==="left"?this.state.leftTabs:this.state.rightTabs,d=a==="left"?this.state.leftActiveTabId:this.state.rightActiveTabId;i.innerHTML="";for(const g of f){const h=document.createElement("div"),v=g.id===d;h.className=`tab${v?" active":""}`,h.dataset.id=g.id;const T=this.isTabUnsaved(a,g),m=document.createElement("span");m.className="tab-name",m.textContent=T?`*${g.name}`:g.name,h.appendChild(m);const y=document.createElement("span");y.className="tab-close",y.innerHTML='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>',y.addEventListener("click",F=>{F.stopPropagation(),this.closeTab(a,g.id)}),h.appendChild(y);let w=null;h.addEventListener("click",()=>{if(w){clearTimeout(w),w=null;return}w=window.setTimeout(()=>{w=null,g.id!==d&&this.selectTab(a,g.id)},200)}),h.addEventListener("dblclick",F=>{F.preventDefault(),w&&(clearTimeout(w),w=null),this.startEditTabName(a,g.id,m)}),i.appendChild(h)}this.updateTabScrollButtons(a)}addTab(a){this.saveCurrentTabContent(a);const i=a==="left"?this.state.leftTabs:this.state.rightTabs,f={id:ot(),name:"Untitled",content:"",savedContent:null};i.push(f),a==="left"?this.state.leftActiveTabId=f.id:this.state.rightActiveTabId=f.id,this.loadActiveTabContent(),this.renderTabs(a),this.updateDiff();const d=a==="left"?this.el.leftTabContainer:this.el.rightTabContainer;requestAnimationFrame(()=>{d.scrollLeft=d.scrollWidth})}closeTab(a,i){const f=a==="left"?this.state.leftTabs:this.state.rightTabs,d=a==="left"?this.state.leftActiveTabId:this.state.rightActiveTabId;if(f.length<=1){const h=f[0];h.content="",h.savedContent=null,h.name="Untitled";const v=a==="left"?this.el.leftEditor:this.el.rightEditor;v.value="",this.renderTabs(a),this.updateDiff();return}const g=f.findIndex(h=>h.id===i);if(g!==-1){if(f.splice(g,1),d===i){const h=Math.min(g,f.length-1);a==="left"?this.state.leftActiveTabId=f[h].id:this.state.rightActiveTabId=f[h].id,this.loadActiveTabContent()}this.renderTabs(a),this.saveToStorage(),this.updateDiff()}}isTabUnsaved(a,i){if(i.savedContent===null)return!0;const f=a==="left"?this.state.leftActiveTabId:this.state.rightActiveTabId,d=a==="left"?this.el.leftEditor:this.el.rightEditor;return(i.id===f?d.value:i.content)!==i.savedContent}selectTab(a,i){this.saveCurrentTabContent(a),a==="left"?this.state.leftActiveTabId=i:this.state.rightActiveTabId=i,this.loadActiveTabContent(),this.renderTabs(a),this.updateDiff()}saveCurrentTabContent(a){const i=a==="left"?this.state.leftTabs:this.state.rightTabs,f=a==="left"?this.state.leftActiveTabId:this.state.rightActiveTabId,d=a==="left"?this.el.leftEditor:this.el.rightEditor,g=i.find(h=>h.id===f);g&&(g.content=d.value)}startEditTabName(a,i,f){const g=(a==="left"?this.state.leftTabs:this.state.rightTabs).find(m=>m.id===i);if(!g)return;const h=document.createElement("input");h.type="text",h.className="tab-name-input",h.value=g.name;let v=!1;const T=()=>{if(v)return;v=!0;const m=h.value.trim()||"Untitled";g.name=m,this.saveToStorage(),this.renderTabs(a)};h.addEventListener("blur",T),h.addEventListener("keydown",m=>{m.key==="Enter"?(m.preventDefault(),h.blur()):m.key==="Escape"&&(m.preventDefault(),v=!0,this.renderTabs(a))}),f.replaceWith(h),h.focus(),h.select()}scrollTabs(a,i){(a==="left"?this.el.leftTabContainer:this.el.rightTabContainer).scrollBy({left:i,behavior:"smooth"}),setTimeout(()=>this.updateTabScrollButtons(a),200)}handleTabWheel(a,i){a.preventDefault();const f=i==="left"?this.el.leftTabContainer:this.el.rightTabContainer;f.scrollLeft+=a.deltaY,this.updateTabScrollButtons(i)}updateTabScrollButtons(a){const i=a==="left"?this.el.leftTabContainer:this.el.rightTabContainer,f=a==="left"?this.el.leftTabScrollLeft:this.el.rightTabScrollLeft,d=a==="left"?this.el.leftTabScrollRight:this.el.rightTabScrollRight;f.disabled=i.scrollLeft<=0,d.disabled=i.scrollLeft>=i.scrollWidth-i.clientWidth}onLeftInput(){this.saveCurrentTabContent("left"),this.renderTabs("left"),this.updateDiff()}onRightInput(){this.saveCurrentTabContent("right"),this.renderTabs("right"),this.updateDiff()}toggleTheme(){this.state.isDarkMode=!this.state.isDarkMode,localStorage.setItem("darkMode",String(this.state.isDarkMode)),this.applyTheme()}applyTheme(){document.body.classList.toggle("light-mode",!this.state.isDarkMode)}toggleWrap(){this.state.isSoftWrap=!this.state.isSoftWrap,localStorage.setItem("softWrap",String(this.state.isSoftWrap)),this.applyWrap()}applyWrap(){[this.el.leftEditor,this.el.rightEditor,this.el.leftHighlight,this.el.rightHighlight].forEach(i=>i.classList.toggle("soft-wrap",this.state.isSoftWrap)),this.el.wrapBtn.classList.toggle("active",this.state.isSoftWrap),requestAnimationFrame(()=>{this.syncHeight(this.el.leftHighlight,this.el.leftEditor),this.syncHeight(this.el.rightHighlight,this.el.rightEditor)})}toggleConnector(){this.state.showConnector=!this.state.showConnector,localStorage.setItem("showConnector",String(this.state.showConnector)),this.applyConnectorVisibility()}applyConnectorVisibility(){if(this.el.connectorBtn.classList.toggle("active",this.state.showConnector),this.state.showConnector)this.drawConnectors();else for(;this.el.connectorSvg.firstChild;)this.el.connectorSvg.removeChild(this.el.connectorSvg.firstChild)}handleIndentChange(){this.state.indentSize=parseInt(this.el.indentSelect.value,10),localStorage.setItem("indentSize",String(this.state.indentSize))}handleKeyDown(a,i){a.key==="Tab"&&(a.preventDefault(),a.shiftKey?this.unindent(i):this.indent(i))}indent(a){const{selectionStart:i,selectionEnd:f,value:d}=a,g=" ".repeat(this.state.indentSize);if(i===f)a.value=d.slice(0,i)+g+d.slice(f),a.selectionStart=a.selectionEnd=i+this.state.indentSize;else{const h=d.split(`
`);let v=0,T=i,m=f;for(let y=0;y<h.length;y++){const w=v,F=v+h[y].length;F>=i&&w<f&&(h[y]=g+h[y],w<=i&&(T+=this.state.indentSize),w<f&&(m+=this.state.indentSize)),v=F+1}a.value=h.join(`
`),a.selectionStart=T,a.selectionEnd=m}a.dispatchEvent(new Event("input"))}unindent(a){const{selectionStart:i,selectionEnd:f,value:d}=a;if(i===f){const g=d.lastIndexOf(`
`,i-1)+1,h=d.slice(g,i);let v=0;for(let T=h.length-1;T>=0&&v<this.state.indentSize&&h[T]===" ";T--)v++;v>0&&(a.value=d.slice(0,i-v)+d.slice(i),a.selectionStart=a.selectionEnd=i-v,a.dispatchEvent(new Event("input")))}else{const g=d.split(`
`);let h=0,v=i,T=f;for(let m=0;m<g.length;m++){const y=h,w=h+g[m].length;if(w>=i&&y<f){let F=0;for(let U=0;U<g[m].length&&U<this.state.indentSize&&g[m][U]===" ";U++)F++;F>0&&(g[m]=g[m].slice(F),y<=i&&(v-=Math.min(F,i-y)),y<f&&(T-=F))}h=w+1}a.value=g.join(`
`),a.selectionStart=v,a.selectionEnd=T,a.dispatchEvent(new Event("input"))}}handleLeftScroll(){this.el.leftLineNumbers.scrollTop=this.el.leftContent.scrollTop,this.scheduleConnectorRedraw()}handleRightScroll(){this.el.rightLineNumbers.scrollTop=this.el.rightContent.scrollTop,this.scheduleConnectorRedraw()}scheduleConnectorRedraw(){this.state.scrollPending||(this.state.scrollPending=!0,requestAnimationFrame(()=>{this.drawConnectors(),this.state.scrollPending=!1}))}updateDiff(){const a=this.el.leftEditor.value,i=this.el.rightEditor.value,f=Mi(a,i);this.state.diffResult=Di(f),this.updateEditor("left"),this.updateEditor("right"),this.updateStats(),requestAnimationFrame(()=>this.drawConnectors())}updateEditor(a){const i=this.state.diffResult;if(!i)return;const f=a==="left",d=f?this.el.leftHighlight:this.el.rightHighlight,g=f?this.el.leftEditor:this.el.rightEditor,h=f?this.el.leftLineNumbers:this.el.rightLineNumbers,v=g.value.split(`
`);h.innerHTML=v.map((T,m)=>`<div class="line-number">${m+1}</div>`).join(""),this.renderHighlights(d,g,i,f),this.syncHeight(d,g)}renderHighlights(a,i,f,d){if(!f.lines.some(m=>{const y=d?m.left:m.right;return y.kind!==$.Context&&y.kind!==$.Blank})){a.classList.remove("visible"),i.classList.remove("has-highlights");return}a.classList.add("visible"),i.classList.add("has-highlights");const h=new Map;for(const m of f.lines){const y=m.left,w=m.right,F=d?y:w;if(F.kind===$.Blank)continue;const U=this.getLineClass(y.kind,w.kind,d),J=y.kind===$.Removed&&w.kind===$.Added?f.highlights.filter(V=>V.row===m.index&&V.isLeft===d):[];h.set(F.lineNo,{line:m,lineClass:U,highlights:J})}const v=i.value.split(`
`),T=[];for(let m=0;m<v.length;m++){const y=m+1,w=v[m];m>0&&T.push(`
`);const F=h.get(y),U=F?.lineClass??"",G=F?.highlights??[];T.push(`<span class="hl-line ${U}">`),G.length>0?T.push(this.renderCharHighlights(w,G,d)):T.push(this.escapeHtml(w)),T.push("</span>")}a.innerHTML=T.join("")}getLineClass(a,i,f){if(a===$.Removed&&i===$.Added)return"hl-modified";if(f){if(a===$.Removed&&i===$.Blank)return"hl-removed"}else if(i===$.Added&&a===$.Blank)return"hl-added";return""}renderCharHighlights(a,i,f){const d=[...i].sort((v,T)=>v.start-T.start),g=[];let h=0;for(const v of d){v.start>h&&g.push(this.escapeHtml(a.slice(h,v.start)));const T=f?"hl-char-removed":"hl-char-added";g.push(`<span class="${T}">${this.escapeHtml(a.slice(v.start,v.end))}</span>`),h=v.end}return h<a.length&&g.push(this.escapeHtml(a.slice(h))),g.join("")}escapeHtml(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}syncHeight(a,i){i.style.height="auto",i.offsetHeight;const f=i.scrollHeight,d=i.parentElement?.clientHeight??0,g=Math.max(f,d);i.style.height=`${g}px`,a.style.height=`${g}px`}updateStats(){const a=this.state.diffResult;if(!a)return;const i=a.lines.filter(d=>d.left.kind===$.Removed).length,f=a.lines.filter(d=>d.right.kind===$.Added).length;this.el.leftStats.innerHTML=i>0?`<span class="stat-removed">-${i}</span>`:"",this.el.rightStats.innerHTML=f>0?`<span class="stat-added">+${f}</span>`:""}buildConnectorBlocks(a){const i=[],f=new Set;let d=0;for(;d<a.length;){const g=a[d],h=g.left.kind,v=g.right.kind;if(h===$.Context||h===$.Blank){h===$.Context&&f.add(d),d++;continue}if(h===$.Removed){const m=v===$.Added?"modified":"removed",y=d;let w=d;for(;w+1<a.length;){const F=a[w+1],U=F.left.kind,G=F.right.kind,J=U===$.Removed&&G===$.Added,V=U===$.Removed&&G===$.Blank;if(m==="modified"&&J||m==="removed"&&V)w++;else break}for(let F=y;F<=w;F++)(a[F].right.kind!==$.Added||a[F].left.kind===$.Removed)&&f.add(F);i.push({type:m,startIndex:y,endIndex:w}),d=w+1}else d++}for(d=0;d<a.length;){const g=a[d];if(!f.has(d)&&g.right.kind===$.Added&&g.left.kind===$.Blank){const h=d;let v=d;for(;v+1<a.length;){const T=a[v+1];if(!f.has(v+1)&&T.right.kind===$.Added&&T.left.kind===$.Blank)v++;else break}i.push({type:"added",startIndex:h,endIndex:v}),d=v+1}else d++}return i}drawConnectors(){const a=this.state.diffResult;if(!a||!this.state.showConnector)return;for(;this.el.connectorSvg.firstChild;)this.el.connectorSvg.removeChild(this.el.connectorSvg.firstChild);const i=this.el.connectorContent.clientHeight;this.el.connectorSvg.setAttribute("width",String(ae)),this.el.connectorSvg.setAttribute("height",String(i)),this.el.connectorSvg.setAttribute("viewBox",`0 0 ${ae} ${i}`),this.el.connectorSvg.setAttribute("preserveAspectRatio","none");const f=this.el.leftContent.scrollTop,d=this.el.rightContent.scrollTop,g=this.buildConnectorBlocks(a.lines);for(const h of g)this.drawConnectorBlock(h,a.lines,f,d,i)}drawConnectorBlock(a,i,f,d,g){const h=this.getBlockDisplayPositions(i,a,!0),v=this.getBlockDisplayPositions(i,a,!1);let T,m,y,w;if(a.type==="added"){const J=this.getInsertionLineNo(i,a.startIndex,!0)-1;T=te+J*ee-f,m=T,y=te+v.start*ee-d,w=te+(v.end+1)*ee-d}else if(a.type==="removed"){const J=this.getInsertionLineNo(i,a.startIndex,!1)-1;T=te+h.start*ee-f,m=te+(h.end+1)*ee-f,y=te+J*ee-d,w=y}else T=te+h.start*ee-f,m=te+(h.end+1)*ee-f,y=te+v.start*ee-d,w=te+(v.end+1)*ee-d;const F=Math.min(T,y);Math.max(m,w)<0||F>g||this.drawConnectorShape(T,m,y,w,a.type)}getBlockDisplayPositions(a,i,f){let d=-1,g=-1;for(let h=i.startIndex;h<=i.endIndex;h++){const v=f?a[h].left:a[h].right;v.kind!==$.Blank&&v.lineNo>0&&((d===-1||v.lineNo<d)&&(d=v.lineNo),(g===-1||v.lineNo>g)&&(g=v.lineNo))}if(d===-1){const h=this.getInsertionLineNo(a,i.startIndex,f);return{start:h-1,end:h-1}}return{start:d-1,end:g-1}}getInsertionLineNo(a,i,f){for(let d=i-1;d>=0;d--){const g=f?a[d].left:a[d].right;if(g.kind!==$.Blank&&g.lineNo>0)return g.lineNo+1}return 1}drawConnectorShape(a,i,f,d,g){const h=this.getConnectorColor(g),v=ae*.4,T=ae*.6,m=this.createSvgPath(`M 0,${a} C ${v},${a} ${T},${f} ${ae},${f} L ${ae},${d} C ${T},${d} ${v},${i} 0,${i} Z`,{fill:h,opacity:"0.3"}),y=this.createSvgPath(`M 0,${a} C ${v},${a} ${T},${f} ${ae},${f}`,{stroke:h,"stroke-width":"2",fill:"none",opacity:"0.8"}),w=this.createSvgPath(`M 0,${i} C ${v},${i} ${T},${d} ${ae},${d}`,{stroke:h,"stroke-width":"2",fill:"none",opacity:"0.8"});this.el.connectorSvg.appendChild(m),this.el.connectorSvg.appendChild(y),this.el.connectorSvg.appendChild(w)}getConnectorColor(a){const i=getComputedStyle(document.documentElement);switch(a){case"added":return i.getPropertyValue("--color-connector-added").trim();case"removed":return i.getPropertyValue("--color-connector-removed").trim();default:return i.getPropertyValue("--color-connector-modified").trim()}}createSvgPath(a,i){const f=document.createElementNS("http://www.w3.org/2000/svg","path");f.setAttribute("d",a);for(const[d,g]of Object.entries(i))f.setAttribute(d,g);return f}}Li().then(()=>new Oi);const Ui=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));
